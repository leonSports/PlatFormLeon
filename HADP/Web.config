<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="SystemParameters" type="System.Configuration.AppSettingsSection, System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
    <section name="DatabaseConfiguration" type="Hongbin.Data.DbCfg.DatabaseConfiguration, Hongbin.Data, Version=3.0.0.0, Culture=neutral, PublicKeyToken=null"/>
    <section name="RedisConfig" type="Hongbin.Data.RedisConfigInfo, Hongbin.Data"/>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
  </configSections>
  <RedisConfig WriteServerList="127.0.0.1:6379" ReadServerList="127.0.0.1:6379" MaxWritePoolSize="60" MaxReadPoolSize="60" AutoStart="true" LocalCacheTime="180" DefaultDB="0"/>
  <connectionStrings>
    <!--平台有自己的数据库配置节，这里仅为测试-->
    <add name="SYERPDATAConnectionString" connectionString="Data Source=10.10.0.11;Initial Catalog=SYERPDATA;Persist Security Info=True;User ID=sa;Password=1" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <appSettings>
    <!--<add key="EFTracingProvider.logToFile" value="d:\tracing\bdp.sql"/>-->
    <!--<add key="EFTracingProvider.logToConsole" value="true"/>-->
  </appSettings>
  <!--系统参数节，可以在该节中增加其他参数，使用SystemParameters类访问-->
  <SystemParameters>
    <add key="AppTitle" value="红彬业务开发平台"/>
    <add key="LoginPage" value="~/Frame/login.aspx"/>
    <add key="LoginValidationItems" value="UserName,UserCode"/>
    <add key="DefaultPage" value="~/Frame/Default.aspx"/>
    <add key="SuperUser" value="Admin"/>
    <add key="IconPath" value="~/Images/Ico/"/>
    <add key="DefaultIconFile" value="folder16.gif"/>
    <add key="AutoUpdate" value="False"/>
    <!--<add key="模块装配方案" value="教育厅版本" />-->
    <!--日志范围  et: debug,info,warn,error     Hongbin.Logger.BdpLogger处理此参数-->
    <add key="LogScope" value="debug,warn,error"/>
    <!--
    重复登录系统的处理方式： 
      Allow 允许重复登录，同一用户可以在不同的地方登录系统。缺省的处理方式
      Deny 拒绝登录，如果检查到用户已经登录了，则不允许重复登录 
      Force 强制登录，如果检查到用户已经登录了，则清除先前的登录信息后重新登录
    -->
    <add key="RLPM" value="Force"/>
    <!--是否启用SQL监控  Global.aspx处理此参数-->
    <add key="SqlMonitorEnabled" value="false"/>
    <!--SQL语句记录文件-->
    <!--<add key="SqlLogFile" value="~/logs/"/>-->
    <!-- 是否启用数据缓存,  问题太多， 暂不使用 -->
    <!--<add key="DataCacheEnabled" value="true" />-->
    <!--设置上传文件地址-->
    <add key="UploadFileFolder" value="UploadFiles\"/>
    <!--短信相关配置-->
    <!--是否允许短信服务-->
    <add key="SmsEnabled" value="false"/>
    <!--短信发送延迟秒钟数-->
    <add key="SmsDelaySeconds" value="30"/>
    <!--短信发送服务配置端点名-->
    <add key="SmsEndPoint" value="InfomationServiceSoap"/>
    <!--集成登录地址, 当通过互联平台登录时使用此地址 -->
    <!--<add key="BdpAuthUrl" value="http://localhost:1111/Frame/Integate/Auth.aspx?client_id=SYS_0001"/>-->
    <!--与同样基于BDP开发的系统集成-->
    <add key="PortalServiceEndPoint" value="http://localhost:1111/frame/data/jdp.ashx"/>
    <add key="PortalServiceIntfType" value="Hongbin.WebService.SynAccountBDP"/>
    <!--JBDP的门户帐户接口配置及类名
    <add key="PortalServiceEndPoint" value="http://10.10.0.232:80/engine/rest/login/verifyToken?userToken={token}"/>
    <add key="PortalServiceIntfType" value="Hongbin.WebService.SynAccountJBDP"/>-->
    <!--黄陵的门户帐户接口配置及类名-->
    <!--<add key="PortalServiceEndPoint" value="hlAccountSrvHttpSoap11Endpoint"/>
    <add key="PortalServiceIntfType" value="Hongbin.Webhlservice.SynAccountHL"/>-->
    <!--张家峁的门户帐户接口配置及类名-->
    <!--<add key="PortalServiceEndPoint" value="SmSrvPubServiceHttpSoap11Endpoint" />-->
    <!--<add key="PortalServiceIntfType" value="Hongbin.Webjrservice.SynAccountZJM" />-->
    <!--数据缓存模式
      Memory  内存模式，缺省
      redis   
    -->
    <add key="DataBufferMode" value="Memory"/>
    <!--是否隐藏顶部的LOGO面板, 缺省为不隐藏-->
    <add key="HideLogoPanel" value=""/>
    <!--是否允许注销/退出系统, 缺省为允许-->
    <add key="AllowLogout" value=""/>
    <!--模块装配开发节点, 即该节点下的子节点作为顶级模块, 缺省为树中所有顶级节点作为顶级模块-->
    <add key="模块装配方案" value="root"/>
  </SystemParameters>

  <!--
  数据库配置节可以指定SQL语句记录方式 LogKind, 值如下：
  Disable     不记录，缺省
  Executing   执行前
  Success     执行成功后
  Failed      执行失败后
  After       执行后，不论成功或失败
  注：SQL语句跟踪文件在执行目录下的dblog子目录下, web应用程序应先创建该目录，并授予可写权限
-->
  
  <DatabaseConfiguration DbType="2005" EfProvider="System.Data.SqlClient" LogKind="Disable">
    <DbUser Value="sa"/>
    <DbPwd Value="302B67684576614E517A673D" />
    <DbConnectParam Value="Data Source=.;Initial Catalog=master;pooling=true;min pool size=10;max pool size=256;connect timeout=20;Persist Security Info=True;MultipleActiveResultSets=True;" />
    <EfModelInfos>
      <EfModelInfo Name="SystemData" Schema="HBPlatform.dbo" Enabled="true">
        <ModelPath Value="Setting\Model\Mssql\"/>
        <ModelNames>
          <ModelName Value="BdpBaseData"/>
          <ModelName Value="BdpWorkFlow"/>
          <ModelName Value="BdpDataDict"/>
        </ModelNames>
      </EfModelInfo>
    </EfModelInfos>
  </DatabaseConfiguration>
  
  <!--<DatabaseConfiguration DbType="Ora10gR2" EfProvider="Devart.Data.Oracle" LogKind="Failed">
    <DbUser Value="AFPLAN" />
    <DbPwd Value="716B364F475437484D74493D" />
    <DbConnectParam Value="Server=127.0.0.1;Port=1521;Sid=orcl;Direct=True;Persist Security Info=True" />
    <EfModelInfos>
      <EfModelInfo Name="SystemData" Schema="AFPLAN" Enabled="True">
        <ModelPath Value="Setting\Model\ORA\" />
        <ModelNames>
          <ModelName Value="BdpBaseData" />
          <ModelName Value="BdpWorkFlow" />
          <ModelName Value="BdpDataDict" />
        </ModelNames>
      </EfModelInfo>
    </EfModelInfos>
  </DatabaseConfiguration>-->

  <system.data>
    <DbProviderFactories>
      <add name="BdpEntityProvider" invariant="BdpEntityProvider" description="Bdp Entity Data Provider" type="Hongbin.Data.Entity.EFTracingProviderFactory, Hongbin.Data, Version=3.0.0.0, Culture=neutral, PublicKeyToken=null"/>
      <!--<add name="dotConnect for Oracle" invariant="Devart.Data.Oracle" description="Devart dotConnect for Oracle" type="Devart.Data.Oracle.OracleProviderFactory, Devart.Data.Oracle, Version=7.2.114.0, Culture=neutral, PublicKeyToken=09af7300eec23701" />-->
    </DbProviderFactories>
  </system.data>
  <!--
    有关 web.config 更改的说明，请参见 http://go.microsoft.com/fwlink/?LinkId=235367。

    可在 <httpRuntime> 标记上设置以下特性。
      <system.Web>
        <httpRuntime targetFramework="4.5" />
      </system.Web>
  -->
  <system.web>
    <!--<globalization culture="cn" uiCulture="cn"/>-->
    <!--<customErrors mode="On" defaultRedirect="error/genericerror.htm">
      <error statusCode="500" redirect="error/callsupport.htm"/>
      <error statusCode="404" redirect="error/notfound.htm"/>
      <error statusCode="403" redirect="error/noaccess.htm"/>
    </customErrors>-->
    <compilation debug="true" targetFramework="4.5">
      <assemblies>
        <add assembly="Hongbin.Web"/>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.IO.Log, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="Microsoft.Build.Framework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Management, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="Devart.Data.Oracle.Web, Version=7.2.114.0, Culture=neutral, PublicKeyToken=09af7300eec23701" />
        <add assembly="Devart.Data.Oracle, Version=7.2.114.0, Culture=neutral, PublicKeyToken=09af7300eec23701" />
        <add assembly="Devart.Data, Version=5.0.573.0, Culture=neutral, PublicKeyToken=09af7300eec23701" />
        <!--<add assembly="Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845DCD8080CC91" />
        <add assembly="Microsoft.ReportViewer.Common, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845DCD8080CC91" />-->
      </assemblies>
      <buildProviders>
        <add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845DCD8080CC91"/>
      </buildProviders>
    </compilation>
    <authentication mode="Forms">
      <forms name="BDPOP"/>
    </authentication>
    <httpRuntime maxRequestLength="30720" requestValidationMode="2.0"/>
    <sessionState timeout="20" mode="InProc" cookieless="false"/>
    <!--<sessionState mode="SQLServer" allowCustomSqlDatabase="true" sqlConnectionString="server=10.0.0.191;database=DBSession;uid=sa;pwd=admin_0;" cookieless="false" timeout="20" />-->
    <httpModules>
      <!--<add name="BdpReqFilter" type="Hongbin.Web.Classes.BdpReqFilter"/>-->
    </httpModules>
    <pages theme="default" validateRequest="false" controlRenderingCompatibilityVersion="4.0">
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI.DataVisualization.Charting" assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add tagPrefix="Emp" namespace="Hongbin.Web.UI" assembly="Hongbin.Web"/>
      </controls>
    </pages>
    <httpHandlers>
      <add verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" validate="false"/>
    </httpHandlers>
  </system.web>
  <location path="decide.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>
  <system.webServer>
    <staticContent>
      <remove fileExtension=".woff"/>
      <remove fileExtension=".xap"/>
      <remove fileExtension=".xaml"/>
      <mimeMap fileExtension=".woff" mimeType="font/x-font-woff"/>
      <mimeMap fileExtension=".xap" mimeType="xapapplication/x-silverlight"/>
      <mimeMap fileExtension=".xaml" mimeType="application/xaml+xml"/>
    </staticContent>
    <httpProtocol>
      <customHeaders>
        <!--<add name="X-UA-Compatible" value="IE=EmulateIE7"/>-->
      </customHeaders>
    </httpProtocol>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules/>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="2097151000"/>
      </requestFiltering>
    </security>
    <handlers>
      <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
    </handlers>
  </system.webServer>
  <system.serviceModel>
    <bindings/>
    <client/>
  </system.serviceModel>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0"/>
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer"/>
    </providers>
  </entityFramework>
</configuration>