(function(n,t){function i(t,i){var u=t.nodeName.toLowerCase(),f,e,o;return"area"===u?(f=t.parentNode,e=f.name,!t.href||!e||f.nodeName.toLowerCase()!=="map")?!1:(o=n("img[usemap=#"+e+"]")[0],!!o&&r(o)):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"==u?t.href||i:i)&&r(t)}function r(t){return!n(t).parents().andSelf().filter(function(){return n.curCSS(this,"visibility")==="hidden"||n.expr.filters.hidden(this)}).length}(n.om=n.om||{},n.om.version)||(n.extend(n.om,{version:"2.0",keyCode:{TAB:9,ENTER:13,ESCAPE:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},lang:{_get:function(t,i,r){return t[r]?t[r]:n.om.lang[i][r]}}}),n.fn.extend({propAttr:n.fn.prop||n.fn.attr,_oldFocus:n.fn.focus,focus:function(t,i){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){n(r).focus();i&&i.call(r)},t)}):this._oldFocus.apply(this,arguments)},scrollParent:function(){var t;return t=n.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(n.curCSS(this,"position",1))&&/(auto|scroll)/.test(n.curCSS(this,"overflow",1)+n.curCSS(this,"overflow-y",1)+n.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(n.curCSS(this,"overflow",1)+n.curCSS(this,"overflow-y",1)+n.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?n(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var r=n(this[0]),u,f;r.length&&r[0]!==document;){if(u=r.css("position"),(u==="absolute"||u==="relative"||u==="fixed")&&(f=parseInt(r.css("zIndex"),10),!isNaN(f)&&f!==0))return f;r=r.parent()}return 0},disableSelection:function(){return this.bind((n.support.selectstart?"selectstart":"mousedown")+".om-disableSelection",function(n){n.preventDefault()})},enableSelection:function(){return this.unbind(".om-disableSelection")}}),n.each(["Width","Height"],function(i,r){function e(t,i,r,u){return n.each(o,function(){i-=parseFloat(n.curCSS(t,"padding"+this,!0))||0;r&&(i-=parseFloat(n.curCSS(t,"border"+this+"Width",!0))||0);u&&(i-=parseFloat(n.curCSS(t,"margin"+this,!0))||0)}),i}var o=r==="Width"?["Left","Right"]:["Top","Bottom"],u=r.toLowerCase(),f={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+r]=function(i){return i===t?f["inner"+r].call(this):this.each(function(){n(this).css(u,e(this,i)+"px")})};n.fn["outer"+r]=function(t,i){return typeof t!="number"?f["outer"+r].call(this,t):this.each(function(){n(this).css(u,e(this,t,!0,i)+"px")})}}),n.extend(n.expr[":"],{data:function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return i(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var r=n.attr(t,"tabindex"),u=isNaN(r);return(u||r>=0)&&i(t,!u)}}),n(function(){var i=document.body,t=i.appendChild(t=document.createElement("div"));n.extend(t.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});n.support.minHeight=t.offsetHeight===100;n.support.selectstart="onselectstart"in t;i.removeChild(t).style.display="none"}),n.extend(n.om,{plugin:{add:function(t,i,r){var f=n.om[t].prototype;for(var u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i){var u=n.plugins[t],r;if(u&&n.element[0].parentNode)for(r=0;r<u.length;r++)n.options[u[r][0]]&&u[r][1].apply(n.element,i)}}}))})(jQuery),function(n,t){if(n.cleanData){var i=n.cleanData;n.cleanData=function(t){for(var r=0,u;(u=t[r])!=null;r++)n(u).triggerHandler("om-remove");i(t)}}n.omWidget=function(t,i,r){var u=t.split(".")[0],e,f;t=t.split(".")[1];e=u+"-"+t;r||(r=i,i=n.OMWidget);n.expr[":"][e]=function(i){return!!n.data(i,t)};n[u]=n[u]||{};n[u][t]=function(n,t){arguments.length&&this._createWidget(n,t)};f=new i;f.options=n.extend(!0,{},f.options);n[u][t].prototype=n.extend(!0,f,{namespace:u,widgetName:t,widgetEventPrefix:n[u][t].prototype.widgetEventPrefix||t,widgetBaseClass:e},r);n.omWidget.bridge(t,n[u][t])};n.omWidget.bridge=function(i,r){n.fn[i]=function(u){var e=typeof u=="string",o=Array.prototype.slice.call(arguments,1),f=this;return(u=!e&&o.length?n.extend.apply(null,[!0,u].concat(o)):u,e&&u.charAt(0)==="_")?f:(e?this.each(function(){var r=n.data(this,i),e;return u=="options"?(f=r&&r.options,!1):(e=r&&n.isFunction(r[u])?r[u].apply(r,o):r,e!==r&&e!==t)?(f=e,!1):void 0}):this.each(function(){var t=n.data(this,i);t?(t._setOptions(u||{}),n.extend(t.options,u),n(t.beforeInitListeners).each(function(){this.call(t)}),t._init(),n(t.initListeners).each(function(){this.call(t)})):n.data(this,i,new r(u,this))}),f)}};n.omWidget.addCreateListener=function(t,i){var r=t.split(".");n[r[0]][r[1]].prototype.createListeners.push(i)};n.omWidget.addInitListener=function(t,i){var r=t.split(".");n[r[0]][r[1]].prototype.initListeners.push(i)};n.omWidget.addBeforeInitListener=function(t,i){var r=t.split(".");n[r[0]][r[1]].prototype.beforeInitListeners.push(i)};n.OMWidget=function(n,t){this.createListeners=[];this.initListeners=[];this.beforeInitListeners=[];arguments.length&&this._createWidget(n,t)};n.OMWidget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){n.data(i,this.widgetName,this);this.element=n(i);this.options=n.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("om-remove._"+this.widgetName,function(){r.destroy()});this._create();n(this.createListeners).each(function(){this.call(r)});this._trigger("create");n(this.beforeInitListeners).each(function(){this.call(r)});this._init();n(this.initListeners).each(function(){this.call(r)})},_getCreateOptions:function(){return n.metadata&&n.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName)},widget:function(){return this.element},option:function(i,r){var u=i;if(arguments.length===0)return n.extend({},this.options);if(typeof i=="string"){if(r===t)return this.options[i];u={};u[i]=r}return this._setOptions(u),this},_setOptions:function(t){var i=this;return n.each(t,function(n,t){i._setOption(n,t)}),this},_setOption:function(n,t){return this.options[n]=t,this},_trigger:function(t,i){var o=this.options[t],e,u,f,r;if(i=n.Event(i),i.type=t,i.originalEvent)for(r=n.event.props.length;r;)e=n.event.props[--r],i[e]=i.originalEvent[e];for(u=[],f=arguments.length,r=2;r<f;r++)u[r-2]=arguments[r];return f>1&&(u[f-2]=arguments[1]),!(n.isFunction(o)&&o.apply(this.element,u)===!1||i.isDefaultPrevented())}}}(jQuery),function(n){n.omWidget("om.omMouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(t.originalEvent=t.originalEvent||{},!t.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(t);this._mouseDownEvent=t;var i=this,r=t.which==1,u=typeof this.options.cancel=="string"?n(t.target).closest(this.options.cancel).length:!1;return!r||u||!this._mouseCapture(t)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted))?(t.preventDefault(),!0):(!0===n.data(t.target,this.widgetName+".preventClickEvent")&&n.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return i._mouseMove(n)},this._mouseUpDelegate=function(n){return i._mouseUp(n)},n(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),t.originalEvent.mouseHandled=!0,!0)}},_mouseMove:function(t){return n.browser.msie&&!(document.documentMode>=9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(n){n.om=n.om||{};var i=/left|center|right/,r=/top|center|bottom/,t="center",u=n.fn.position,f=n.fn.offset;n.fn.position=function(f){if(!f||!f.of)return u.apply(this,arguments);f=n.extend({},f);var o=n(f.of),a=o[0],l=(f.collision||"flip").split(" "),s=f.offset?f.offset.split(" "):[0,0],h,c,e;return a.nodeType===9?(h=o.width(),c=o.height(),e={top:0,left:0}):a.setTimeout?(h=o.width(),c=o.height(),e={top:o.scrollTop(),left:o.scrollLeft()}):a.preventDefault?(f.at="left top",h=c=0,e={top:f.of.pageY,left:f.of.pageX}):(h=o.outerWidth(),c=o.outerHeight(),e=o.offset()),n.each(["my","at"],function(){var n=(f[this]||"").split(" ");n.length===1&&(n=i.test(n[0])?n.concat([t]):r.test(n[0])?[t].concat(n):[t,t]);n[0]=i.test(n[0])?n[0]:t;n[1]=r.test(n[1])?n[1]:t;f[this]=n}),l.length===1&&(l[1]=l[0]),s[0]=parseInt(s[0],10)||0,s.length===1&&(s[1]=s[0]),s[1]=parseInt(s[1],10)||0,f.at[0]==="right"?e.left+=h:f.at[0]===t&&(e.left+=h/2),f.at[1]==="bottom"?e.top+=c:f.at[1]===t&&(e.top+=c/2),e.left+=s[0],e.top+=s[1],this.each(function(){var r=n(this),u=r.outerWidth(),o=r.outerHeight(),a=parseInt(n.curCSS(this,"marginLeft",!0))||0,v=parseInt(n.curCSS(this,"marginTop",!0))||0,p=u+a+(parseInt(n.curCSS(this,"marginRight",!0))||0),w=o+v+(parseInt(n.curCSS(this,"marginBottom",!0))||0),i=n.extend({},e),y;f.my[0]==="right"?i.left-=u:f.my[0]===t&&(i.left-=u/2);f.my[1]==="bottom"?i.top-=o:f.my[1]===t&&(i.top-=o/2);i.left=Math.round(i.left);i.top=Math.round(i.top);y={left:i.left-a,top:i.top-v};n.each(["left","top"],function(t,r){n.om.omPosition[l[t]]&&n.om.omPosition[l[t]][r](i,{targetWidth:h,targetHeight:c,elemWidth:u,elemHeight:o,collisionPosition:y,collisionWidth:p,collisionHeight:w,offset:s,my:f.my,at:f.at})});n.fn.bgiframe&&r.bgiframe();r.offset(n.extend(i,{using:f.using}))})};n.om.omPosition={fit:{left:function(t,i){var r=n(window),u=i.collisionPosition.left+i.collisionWidth-r.width()-r.scrollLeft();t.left=u>0?t.left-u:Math.max(t.left-i.collisionPosition.left,t.left)},top:function(t,i){var r=n(window),u=i.collisionPosition.top+i.collisionHeight-r.height()-r.scrollTop();t.top=u>0?t.top-u:Math.max(t.top-i.collisionPosition.top,t.top)}},flip:{left:function(i,r){if(r.at[0]!==t){var u=n(window),s=r.collisionPosition.left+r.collisionWidth-u.width()-u.scrollLeft(),f=r.my[0]==="left"?-r.elemWidth:r.my[0]==="right"?r.elemWidth:0,e=r.at[0]==="left"?r.targetWidth:-r.targetWidth,o=-2*r.offset[0];i.left+=r.collisionPosition.left<0?f+e+o:s>0?f+e+o:0}},top:function(i,r){if(r.at[1]!==t){var u=n(window),s=r.collisionPosition.top+r.collisionHeight-u.height()-u.scrollTop(),f=r.my[1]==="top"?-r.elemHeight:r.my[1]==="bottom"?r.elemHeight:0,e=r.at[1]==="top"?r.targetHeight:-r.targetHeight,o=-2*r.offset[1];i.top+=r.collisionPosition.top<0?f+e+o:s>0?f+e+o:0}}}};n.offset.setOffset||(n.offset.setOffset=function(t,i){/static/.test(n.curCSS(t,"position"))&&(t.style.position="relative");var r=n(t),u=r.offset(),e=parseInt(n.curCSS(t,"top",!0),10)||0,o=parseInt(n.curCSS(t,"left",!0),10)||0,f={top:i.top-u.top+e,left:i.left-u.left+o};"using"in i?i.using.call(t,f):r.css(f)},n.fn.offset=function(t){var i=this[0];return!i||!i.ownerDocument?null:t?this.each(function(){n.offset.setOffset(this,t)}):f.call(this)})}(jQuery),function(n){n.omWidget("om.omDraggable",n.om.omMouse,{widgetEventPrefix:"drag",options:{axis:!1,containment:!1,cursor:"auto",_scope:"default",handle:!1,helper:"original",revert:!1,scroll:!0},_create:function(){this.options.helper!="original"||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.element.addClass("om-draggable");this.options.disabled&&this.element.addClass("om-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("omDraggable"))return this.element.removeData("omDraggable").unbind(".draggable").removeClass("om-draggable om-draggable-dragging om-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||n(t.target).is(".om-resizable-handle")?!1:(this.handle=this._getHandle(t),!this.handle)?!1:!0},_mouseStart:function(t){var i=this.options;return(this.helper=this._createHelper(t),this._cacheHelperProportions(),n.om.ddmanager&&(n.om.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.containment&&this._setContainment(),this._trigger("onStart",t)===!1)?(this._clear(),!1):(this._cacheHelperProportions(),n.om.ddmanager&&!i.dropBehaviour&&n.om.ddmanager.prepareOffsets(this,t),this.helper.addClass("om-draggable-dragging"),this._mouseDrag(t,!0),n.om.ddmanager&&n.om.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("onDrag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&this.options.axis=="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis=="x"||(this.helper[0].style.top=this.position.top+"px"),n.om.ddmanager&&n.om.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1,r;return(n.om.ddmanager&&!this.options.dropBehaviour&&(i=n.om.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),(!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")?!1:(this.options.revert=="invalid"&&!i||this.options.revert=="valid"&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?(r=this,n(this.helper).animate(this.originalPosition,500,function(){r._trigger("onStop",t)!==!1&&r._clear()})):this._trigger("onStop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return n.om.ddmanager&&n.om.ddmanager.dragStop(this,t),n.om.omMouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".om-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!n(this.options.handle,this.element).length?!0:!1;return n(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t])):r.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(this.element[0].parentNode),i[0]==this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&n.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var n=this.element.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var i=this.options,r,t,f,u;if(i.containment=="parent"&&(i.containment=this.helper[0].parentNode),(i.containment=="document"||i.containment=="window")&&(this.containment=[i.containment=="document"?0:n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i.containment=="document"?0:n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(i.containment=="document"?0:n(window).scrollLeft())+n(i.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(i.containment=="document"?0:n(window).scrollTop())+(n(i.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||i.containment.constructor==Array)i.containment.constructor==Array&&(this.containment=i.containment);else{if(r=n(i.containment),t=r[0],!t)return;f=r.offset();u=n(t).css("overflow")!="hidden";this.containment=[(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0),(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0),(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=r}},_convertPositionTo:function(t,i){i||(i=this.position);var r=t=="absolute"?1:-1,e=this.options,u=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r),left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r)}},_generatePosition:function(t){var s=this.options,u=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,o=/(html|body)/i.test(u[0].tagName),f=t.pageX,e=t.pageY,i,r;return this.originalPosition&&this.containment&&(this.relative_container?(r=this.relative_container.offset(),i=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(f=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(e=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(f=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(e=i[3]+this.offset.click.top)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("om-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(t,i,r){return r=r||this._uiHash(),n.om.plugin.call(this,t,[i,r]),t=="onDrag"&&(this.positionAbs=this._convertPositionTo("absolute")),n.OMWidget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});n.om.plugin.add("omDraggable","cursor",{onStart:function(){var t=n("body"),i=n(this).data("omDraggable").options;t.css("cursor")&&(i._cursor=t.css("cursor"));t.css("cursor",i.cursor)},onStop:function(){var i=n(this).data("omDraggable"),t;i&&(t=i.options,t._cursor&&n("body").css("cursor",t._cursor))}});n.om.plugin.add("omDraggable","scroll",{onStart:function(){var t=n(this).data("omDraggable");t.scrollParent[0]!=document&&t.scrollParent[0].tagName!="HTML"&&(t.overflowOffset=t.scrollParent.offset())},onDrag:function(t,i){var r=n(this).data("omDraggable"),u=r.options,f=!1,e=20,o=20;r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"?(u.axis&&u.axis=="x"||(r.overflowOffset.top+r.scrollParent[0].offsetHeight-i.pageY<e?r.scrollParent[0].scrollTop=f=r.scrollParent[0].scrollTop+o:i.pageY-r.overflowOffset.top<e&&(r.scrollParent[0].scrollTop=f=r.scrollParent[0].scrollTop-o)),u.axis&&u.axis=="y"||(r.overflowOffset.left+r.scrollParent[0].offsetWidth-i.pageX<e?r.scrollParent[0].scrollLeft=f=r.scrollParent[0].scrollLeft+o:i.pageX-r.overflowOffset.left<e&&(r.scrollParent[0].scrollLeft=f=r.scrollParent[0].scrollLeft-o))):(u.axis&&u.axis=="x"||(i.pageY-n(document).scrollTop()<e?f=n(document).scrollTop(n(document).scrollTop()-o):n(window).height()-(i.pageY-n(document).scrollTop())<e&&(f=n(document).scrollTop(n(document).scrollTop()+o))),u.axis&&u.axis=="y"||(i.pageX-n(document).scrollLeft()<e?f=n(document).scrollLeft(n(document).scrollLeft()-o):n(window).width()-(i.pageX-n(document).scrollLeft())<e&&(f=n(document).scrollLeft(n(document).scrollLeft()+o))));f!==!1&&n.om.ddmanager&&!u.dropBehaviour&&n.om.ddmanager.prepareOffsets(r,i)}})}(jQuery),function(n){n.omWidget("om.omDroppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,greedy:!1,hoverClass:!1,_scope:"default"},_create:function(){var t=this.options,i=t.accept;this.isover=0;this.isout=1;this.accept=n.isFunction(i)?i:function(n){return n.is(i)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};n.om.ddmanager.droppables[t._scope]=n.om.ddmanager.droppables[t._scope]||[];n.om.ddmanager.droppables[t._scope].push(this);this.element.addClass("om-droppable")},destroy:function(){for(var i=n.om.ddmanager.droppables[this.options._scope],t=0;t<i.length;t++)i[t]==this&&i.splice(t,1);return this.element.removeClass("om-droppable om-droppable-disabled").removeData("omDroppable").unbind(".droppable"),this},_setOption:function(t,i){t=="accept"&&(this.accept=n.isFunction(i)?i:function(n){return n.is(i)});n.OMWidget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=n.om.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);i&&this._trigger("onDragStart",t,i.currentItem||i.element)},_deactivate:function(){var t=n.om.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_over:function(t){var i=n.om.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("onDragOver",t,i.currentItem||i.element))},_out:function(t){var i=n.om.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("onDragOut",t,i.currentItem||i.element))},_drop:function(t,i){var r=i||n.om.ddmanager.current,u;return!r||(r.currentItem||r.element)[0]==this.element[0]?!1:(u=!1,this.element.find(":data(omDroppable)").not(".om-draggable-dragging").each(function(){var t=n.data(this,"omDroppable");if(t.options.greedy&&!t.options.disabled&&t.options._scope==r.options._scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&n.om.intersect(r,n.extend(t,{offset:t.element.offset()})))return u=!0,!1}),u)?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("onDrop",t,r.currentItem||r.element),this.element):!1}});n.om.intersect=function(n,t){if(!t.offset)return!1;var i=(n.positionAbs||n.position.absolute).left,e=i+n.helperProportions.width,r=(n.positionAbs||n.position.absolute).top,o=r+n.helperProportions.height,u=t.offset.left,s=u+t.proportions.width,f=t.offset.top,h=f+t.proportions.height;return u<i+n.helperProportions.width/2&&e-n.helperProportions.width/2<s&&f<r+n.helperProportions.height/2&&o-n.helperProportions.height/2<h};n.om.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var u=n.om.ddmanager.droppables[t.options._scope]||[],o=i?i.type:null,e=(t.currentItem||t.element).find(":data(omDroppable)").andSelf(),r,f;n:for(r=0;r<u.length;r++)if(!u[r].options.disabled&&(!t||u[r].accept.call(u[r].element[0],t.currentItem||t.element))){for(f=0;f<e.length;f++)if(e[f]==u[r].element[0]){u[r].proportions.height=0;continue n}(u[r].visible=u[r].element.css("display")!="none",u[r].visible)&&(o=="mousedown"&&u[r]._activate.call(u[r],i),u[r].offset=u[r].element.offset(),u[r].proportions={width:u[r].element[0].offsetWidth,height:u[r].element[0].offsetHeight})}},drop:function(t,i){var r=!1;return n.each(n.om.ddmanager.droppables[t.options._scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&n.om.intersect(t,this)&&(r=r||this._drop.call(this,i)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),r},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||n.om.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&n.om.ddmanager.prepareOffsets(t,i);n.each(n.om.ddmanager.droppables[t.options._scope]||[],function(){var f,u,r,e;this.options.disabled||this.greedyChild||!this.visible||(f=n.om.intersect(t,this),u=!f&&this.isover==1?"isout":f&&this.isover==0?"isover":null,u)&&(this.options.greedy&&(e=this.element.parents(":data(omDroppable):eq(0)"),e.length&&(r=n.data(e[0],"omDroppable"),r.greedyChild=u=="isover"?1:0)),r&&u=="isover"&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[u]=1,this[u=="isout"?"isover":"isout"]=0,this[u=="isover"?"_over":"_out"].call(this,i),r&&u=="isout"&&(r.isout=0,r.isover=1,r._over.call(r,i)))})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable");t.options.refreshPositions||n.om.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(n){n.omWidget("om.omResizable",n.om.omMouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,aspectRatio:!1,autoHide:!1,containment:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var i=this,t=this.options,f,u;if(this.element.addClass("om-resizable"),n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"om-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&n.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(n('<div class="om-wrapper" style="overflow: hidden;"><\/div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=t.handles||(n(".om-resizable-handle",this.element).length?{n:".om-resizable-n",e:".om-resizable-e",s:".om-resizable-s",w:".om-resizable-w",se:".om-resizable-se",sw:".om-resizable-sw",ne:".om-resizable-ne",nw:".om-resizable-nw"}:"e,s,se"),this.handles.constructor==String)for(this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),f=this.handles.split(","),this.handles={},u=0;u<f.length;u++){var r=n.trim(f[u]),o="om-resizable-"+r,e=n('<div class="om-resizable-handle '+o+'"><\/div>');/sw|se|ne|nw/.test(r)&&e.css({zIndex:++t.zIndex});"se"==r&&e.addClass("om-icon om-icon-gripsmall-diagonal-se");this.handles[r]=".om-resizable-"+r;this.element.append(e)}this._renderAxis=function(t){var i,r,u,f;t=t||this.element;for(i in this.handles)this.handles[i].constructor==String&&(this.handles[i]=n(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=n(this.handles[i],this.element),u=0,u=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),f=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(f,u),this._proportionallyResize()),!n(this.handles[i]).length};this._renderAxis(this.element);this._handles=n(".om-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!i.resizing){if(this.className)var n=this.className.match(/om-resizable-(se|sw|ne|nw|n|e|s|w)/i);i.axis=n&&n[1]?n[1]:"se"}});t.autoHide&&(this._handles.hide(),n(this.element).addClass("om-resizable-autohide").hover(function(){t.disabled||(n(this).removeClass("om-resizable-autohide"),i._handles.show())},function(){t.disabled||i.resizing||(n(this).addClass("om-resizable-autohide"),i._handles.hide())}));this._mouseInit()},destroy:function(){var i,t;return this._mouseDestroy(),i=function(t){n(t).removeClass("om-resizable om-resizable-disabled om-resizable-resizing").removeData("resizable").unbind(".resizable").find(".om-resizable-handle").remove()},this.elementIsWrapper&&(i(this.element),t=this.element,t.after(this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")})).remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var r in this.handles)n(this.handles[r])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var u=this.options,s=this.element.position(),r=this.element,f,e,o;return this.resizing=!0,this.documentScroll={top:n(document).scrollTop(),left:n(document).scrollLeft()},(r.is(".ui-draggable")||/absolute/.test(r.css("position")))&&r.css({position:"absolute",top:s.top,left:s.left}),n.browser.opera&&/relative/.test(r.css("position"))&&r.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy(),f=i(this.helper.css("left")),e=i(this.helper.css("top")),u.containment&&(f+=n(u.containment).scrollLeft()||0,e+=n(u.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:e},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:f,top:e},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof u.aspectRatio=="number"?u.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=n(".om-resizable-"+this.axis).css("cursor"),n("body").css("cursor",o=="auto"?this.axis+"-resize":o),r.addClass("om-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var f=this.helper,h=this.options,c=this,r=this.originalMousePosition,e=this.axis,o=t.pageX-r.left||0,s=t.pageY-r.top||0,u=this._change[e];if(!u)return!1;var i=u.apply(this,[t,o,s]),l=n.browser.msie&&n.browser.version<7,a=this.sizeDiff;return this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._propagate("resize",t),f.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(i),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){var r,i;if(this.resizing=!1,r=this.options,i=this,this._helper){var u=this._proportionallyResizeElements,f=u.length&&/textarea/i.test(u[0].nodeName),e=f&&i._hasScroll(u[0],"left")?0:i.sizeDiff.height,o=f?0:i.sizeDiff.width,s={width:i.helper.width()-o,height:i.helper.height()-e},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;r.animate||this.element.css(n.extend(s,{top:c,left:h}));i.helper.height(i.size.height);i.helper.width(i.size.width);this._helper&&!r.animate&&this._proportionallyResize()}return n("body").css("cursor","auto"),this.element.removeClass("om-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(n){var r=this.options,u,f,e,o,i;i={minWidth:t(r.minWidth)?r.minWidth:0,maxWidth:t(r.maxWidth)?r.maxWidth:Infinity,minHeight:t(r.minHeight)?r.minHeight:0,maxHeight:t(r.maxHeight)?r.maxHeight:Infinity};(this._aspectRatio||n)&&(u=i.minHeight*this.aspectRatio,e=i.minWidth/this.aspectRatio,f=i.maxHeight*this.aspectRatio,o=i.maxWidth/this.aspectRatio,u>i.minWidth&&(i.minWidth=u),e>i.minHeight&&(i.minHeight=e),f<i.maxWidth&&(i.maxWidth=f),o<i.maxHeight&&(i.maxHeight=o));this._vBoundaries=i},_updateCache:function(n){var i=this.options;this.offset=this.helper.offset();t(n.left)&&(this.position.left=n.left);t(n.top)&&(this.position.top=n.top);t(n.height)&&(this.size.height=n.height);t(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var f=this.options,i=this.position,r=this.size,u=this.axis;return t(n.height)?n.width=n.height*this.aspectRatio:t(n.width)&&(n.height=n.width/this.aspectRatio),u=="sw"&&(n.left=i.left+(r.width-n.width),n.top=null),u=="nw"&&(n.top=i.top+(r.height-n.height),n.left=i.left+(r.width-n.width)),n},_respectSize:function(n,i){var y=this.helper,r=this._vBoundaries,p=this._aspectRatio||i.shiftKey,f=this.axis,e=t(n.width)&&r.maxWidth&&r.maxWidth<n.width,o=t(n.height)&&r.maxHeight&&r.maxHeight<n.height,s=t(n.width)&&r.minWidth&&r.minWidth>n.width,h=t(n.height)&&r.minHeight&&r.minHeight>n.height,u;s&&(n.width=r.minWidth);h&&(n.height=r.minHeight);e&&(n.width=r.maxWidth);o&&(n.height=r.maxHeight);var c=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,a=/sw|nw|w/.test(f),v=/nw|ne|n/.test(f);return s&&a&&(n.left=c-r.minWidth),e&&a&&(n.left=c-r.maxWidth),h&&v&&(n.top=l-r.minHeight),o&&v&&(n.top=l-r.maxHeight),u=!n.width&&!n.height,u&&!n.left&&n.top?n.top=null:u&&!n.top&&n.left&&(n.left=null),n},_proportionallyResize:function(){var e=this.options,i,r,t,u,f;if(this._proportionallyResizeElements.length)for(i=this.helper||this.element,r=0;r<this._proportionallyResizeElements.length;r++)(t=this._proportionallyResizeElements[r],this.borderDif||(u=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],f=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")],this.borderDif=n.map(u,function(n,t){var i=parseInt(n,10)||0,r=parseInt(f[t],10)||0;return i+r})),n.browser.msie&&(n(i).is(":hidden")||n(i).parents(":hidden").length))||t.css({height:i.height()-this.borderDif[0]-this.borderDif[2]||0,width:i.width()-this.borderDif[1]-this.borderDif[3]||0})},_renderProxy:function(){var u=this.element,f=this.options;if(this.elementOffset=u.offset(),this._helper){this.helper=this.helper||n('<div style="overflow:hidden;"><\/div>');var t=n.browser.msie&&n.browser.version<7,i=t?1:0,r=t?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+r,height:this.element.outerHeight()+r,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){var u=this.options,i=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:i.width-t}},n:function(n,t,i){var f=this.options,r=this.originalSize,u=this.originalPosition;return{top:u.top+i,height:r.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.om.plugin.call(this,t,[i,this.ui()]);t!="resize"&&this._trigger(t,i,this.ui())},_hasScroll:function(t,i){if(n(t).css("overflow")==="hidden")return!1;var r=i&&i==="left"?"scrollLeft":"scrollTop",u=!1;return t[r]>0?!0:(t[r]=1,u=t[r]>0,t[r]=0,u)},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});n.extend(n.om.resizable,{version:"1.1"});n.om.plugin.add("omResizable","alsoResize",{start:function(){var r=n(this).data("omResizable"),t=r.options,i=function(t){n(t).each(function(){var t=n(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10),position:t.css("position")})})};typeof t.alsoResize!="object"||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):n.each(t.alsoResize,function(n){i(n)})},resize:function(t,i){var r=n(this).data("omResizable"),u=r.options,f=r.originalSize,e=r.originalPosition,s={height:r.size.height-f.height||0,width:r.size.width-f.width||0,top:r.position.top-e.top||0,left:r.position.left-e.left||0},o=function(t,u){n(t).each(function(){var t=n(this),e=n(this).data("resizable-alsoresize"),f={},o=u&&u.length?u:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(o,function(n,t){var i=(e[t]||0)+(s[t]||0);i&&i>=0&&(f[t]=i||null)});n.browser.opera&&/relative/.test(t.css("position"))&&(r._revertToRelativePosition=!0,t.css({position:"absolute",top:"auto",left:"auto"}));t.css(f)})};typeof u.alsoResize!="object"||u.alsoResize.nodeType?o(u.alsoResize):n.each(u.alsoResize,function(n,t){o(n,t)})},stop:function(){var i=n(this).data("omResizable"),t=i.options,r=function(t){n(t).each(function(){var t=n(this);t.css({position:t.data("resizable-alsoresize").position})})};i._revertToRelativePosition&&(i._revertToRelativePosition=!1,typeof t.alsoResize!="object"||t.alsoResize.nodeType?r(t.alsoResize):n.each(t.alsoResize,function(n){r(n)}));n(this).removeData("resizable-alsoresize")}});n.om.plugin.add("omResizable","containment",{start:function(){var t=n(this).data("omResizable"),s=t.options,h=t.element,u=s.containment,r=u instanceof n?u.get(0):/parent/.test(u)?h.parent().get(0):u,f,e;if(r)if(t.containerElement=n(r),/document/.test(u)||u==document)t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight};else{f=n(r);e=[];n(["Top","Right","Left","Bottom"]).each(function(n,t){e[n]=i(f.css("padding"+t))});t.containerOffset=f.offset();t.containerPosition=f.position();t.containerSize={height:f.innerHeight()-e[3],width:f.innerWidth()-e[1]};var o=t.containerOffset,c=t.containerSize.height,l=t.containerSize.width,a=t._hasScroll(r,"left")?r.scrollWidth:l,v=t._hasScroll(r)?r.scrollHeight:c;t.parentData={element:r,left:o.left,top:o.top,width:a,height:v}}},resize:function(t){var i=n(this).data("omResizable"),e=i.options,v=i.containerSize,r=i.containerOffset,y=i.size,s=i.position,f=i._aspectRatio||t.shiftKey,u={top:0,left:0},h=i.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(u=r);s.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-u.left),f&&(i.size.height=i.size.width/e.aspectRatio),i.position.left=e.helper?r.left:0);s.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),f&&(i.size.width=i.size.height*e.aspectRatio),i.position.top=i._helper?r.top:0);i.offset.left=i.parentData.left+i.position.left;i.offset.top=i.parentData.top+i.position.top;var o=Math.abs((i._helper?i.offset.left-u.left:i.offset.left-u.left)+i.sizeDiff.width),c=Math.abs((i._helper?i.offset.top-u.top:i.offset.top-r.top)+i.sizeDiff.height),l=i.containerElement.get(0)==i.element.parent().get(0),a=/relative|absolute/.test(i.containerElement.css("position"));l&&a&&(o-=i.parentData.left);o+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-o,f&&(i.size.height=i.size.width/i.aspectRatio));c+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-c,f&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=n(this).data("omResizable"),r=t.options,c=t.position,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width,h=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h});t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h})}});var i=function(n){return parseInt(n,10)||0},t=function(n){return!isNaN(parseInt(n,10))}}(jQuery),function(n){n.omWidget("om.sortable",n.om.omMouse,{widgetEventPrefix:"sort",options:{helper:"original",items:"> *",placeholder:!1},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit()},_mouseCapture:function(t){if(this.reverting||this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,r=this,u=n(t.target).parents().each(function(){if(n.data(this,"sortable-item")==r)return i=n(this),!1});return(n.data(t.target,"sortable-item")==r&&(i=n(t.target)),!i)?!1:(this.currentItem=i,!0)},_mouseStart:function(t){return this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.helper.css("zIndex",1e3),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var o,i,r;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),o=this.options,i=!1,this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<20?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+20:t.pageY-this.overflowOffset.top<20&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-20),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<20?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+20:t.pageX-this.overflowOffset.left<20&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-20),this.positionAbs=this._convertPositionTo("absolute"),this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",r=this.items.length-1;r>=0;r--){var u=this.items[r],f=u.item[0],e=this._intersectsWithPointer(u);if(e&&f!=this.currentItem[0]&&this.placeholder[e==1?"next":"prev"]()[0]!=f&&!n.contains(this.placeholder[0],f)&&(this.options.type=="semi-dynamic"?!n.contains(this.element[0],f):!0)){if(this.direction=e==1?"down":"up",this._intersectsWithSides(u))this._rearrange(t,u);else break;break}}return this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(n,t){if(n)return this._clear(n,t),!1},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,r=n.left,f=r+n.width,u=n.top,e=u+n.height,o=this.offset.click.top,s=this.offset.click.left,l=i+o>u&&i+o<e&&t+s>r&&t+s<f;return r<t+this.helperProportions.width/2&&h-this.helperProportions.width/2<f&&u<i+this.helperProportions.height/2&&c-this.helperProportions.height/2<e},_isOverAxis:function(n,t,i){return n>t&&n<t+i},_intersectsWithPointer:function(n){var r=this._isOverAxis(this.positionAbs.top+this.offset.click.top,n.top,n.height),u=this._isOverAxis(this.positionAbs.left+this.offset.click.left,n.left,n.width),f=r&&u,t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return f?this.floating?i&&i=="right"||t=="down"?2:1:t&&(t=="down"?2:1):!1},_intersectsWithSides:function(n){var r=this._isOverAxis(this.positionAbs.top+this.offset.click.top,n.top+n.height/2,n.height),u=this._isOverAxis(this.positionAbs.left+this.offset.click.left,n.left+n.width/2,n.width),t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?i=="right"&&u||i=="left"&&!u:t&&(t=="down"&&r||t=="up"&&!r)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return n!=0&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return n!=0&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this.refreshPositions(),this},_refreshItems:function(){var t,e,i;this.items=[];this.containers=[this];var o=this.items,r=[n(this.options.items,this.element),this],u=r[1],f=r[0];for(t=0,e=f.length;t<e;t++)i=n(f[t]),i.data("sortable-item",u),o.push({item:i,instance:u,width:0,height:0,left:0,top:0})},refreshPositions:function(n){var i,t,r,u;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(t=this.items[i],t.instance!=this.currentContainer&&this.currentContainer&&t.item[0]!=this.currentItem[0])||(r=t.item,n||(t.width=r.outerWidth(),t.height=r.outerHeight()),u=r.offset(),t.left=u.left,t.top=u.top);return this},_createPlaceholder:function(t){var i=t||this,r=i.options,u;r.placeholder&&r.placeholder.constructor!=String||(u=r.placeholder,r.placeholder={element:function(){var t=n(document.createElement(i.currentItem[0].nodeName)).addClass(u||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return u||(t.style.visibility="hidden"),t}});i.placeholder=n(r.placeholder.element.call(i.element,i.currentItem));i.currentItem.after(i.placeholder)},_createHelper:function(){var t=this.currentItem;return t.parents("body").length||n(this.currentItem[0].parentNode)[0].appendChild(t[0]),this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")},t},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent,i=t.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],t[0])&&(i.left+=this.scrollParent.scrollLeft(),i.top+=this.scrollParent.scrollTop()),(t[0]==document.body||t[0].tagName&&t[0].tagName.toLowerCase()=="html"&&n.browser.msie)&&(i={top:0,left:0}),{top:i.top+(parseInt(t.css("borderTopWidth"),10)||0),left:i.left+(parseInt(t.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_convertPositionTo:function(t,i){i||(i=this.position);var r=t=="absolute"?1:-1,e=this.options,u=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(n.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r),left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(n.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r)}},_generatePosition:function(t){var e=this.options,i=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,r=/(html|body)/i.test(i[0].tagName),u,f;return this.cssPosition!="relative"||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),u=t.pageX,f=t.pageY,{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(n.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():r?0:i.scrollTop()),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(n.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var u=this,f=this.counter;window.setTimeout(function(){f==u.counter&&u.refreshPositions(!r)},0)},_clear:function(n,t){var r,u,i;if(this.reverting=!1,r=[],u=this,!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(i in this._storedCSS)(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.helper.css("zIndex",1e3),this.cancelHelperRemoval){if(!t){for(i=0;i<r.length;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return!1}if(this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<r.length;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){n.OMWidget.prototype._trigger.apply(this,arguments)},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}});n.extend(n.om.sortable,{version:"1.1"})}(jQuery),function(n){var i=["collapse","min","max","close"],r=["om-panel-tool-collapse","om-panel-tool-expand","om-panel-tool-min","om-panel-tool-max","om-panel-tool-close"],t={anim:!0,speed:"fast"};n.omWidget("om.omPanel",{options:{title:"",width:"auto",height:"auto",header:!0,collapsible:!1,closable:!1,closed:!1,collapsed:!1,tools:[],loadingMessage:"default",_closeMode:"hidden",_helpMsg:!1},_create:function(){this.element.addClass("om-panel-body om-widget-content").wrap("<div class='om-widget om-panel'><\/div>")},_init:function(){var n=this.options,t=this.element,i=t.parent(),r,u;this._renderHeader();r=t.prev();n.header===!1&&t.addClass("om-panel-noheader");this._bindEvent();this._resize(i);u=n.header!==!1?r.outerHeight():0;n.collapsed!==!1?("auto"!==n.height&&i.height(u),t.hide(),n.header!==!1&&r.find(">.om-panel-tool >.om-panel-tool-collapse").removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand")):(t.show(),"auto"!==n.height&&i.height(u+t.outerHeight()),n.header!==!1&&r.find(">.om-panel-tool >.om-panel-tool-expand").removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse"));n.closed!==!1?this._hide(i):this._show(i);this.reload()},_hide:function(n){"hidden"===this.options._closeMode?n.hide():"visibility"===this.options._closeMode&&n.addClass("om-helper-hidden-accessible")},_show:function(n){"hidden"===this.options._closeMode?n.show():"visibility"===this.options._closeMode&&n.removeClass("om-helper-hidden-accessible")},_bindEvent:function(){var t=this,u=this.element,i=this.options,r=u.prev();i.collapsible!==!1&&r.click(function(r){n(r.target).is(".om-panel-icon,.om-panel-title,.om-panel-header")&&(i.collapsed!==!1?t.expand():t.collapse())}).find(".om-panel-tool-collapse , .om-panel-tool-expand").click(function(){i.collapsed!==!1?t.expand():t.collapse()});i.closable!==!1&&r.find(".om-panel-tool-close").click(function(){t.close()})},_renderHeader:function(){var e,s,t,h;if(this.header&&this.header.remove(),this.options.header!==!1){var o=this,i=this.options,u=i.tools,f=this.header=n("<div class='om-panel-header'><\/div>").insertBefore(this.element);if(i._helpMsg&&f.parent().addClass("helpMsg"),i.iconCls&&n("<div class='om-icon om-panel-icon'><\/div>").addClass(i.iconCls).appendTo(f),n("<div class='om-panel-title'><\/div>").html(i.title).appendTo(f),$tool=n("<div class='om-panel-tool'><\/div>"),i.collapsible!==!1&&n("<div class='om-icon om-panel-tool-collapse'><\/div>").appendTo($tool),n.isArray(u))for(e=0,s=u.length;e<s;e++)t=u[e],(h=this._getInnerToolCls(t.id))?n("<div class='om-icon'><\/div>").addClass(h).click(function(n){t.handler.call(this,o,n)}).appendTo($tool):typeof t.iconCls=="string"?n("<div class='om-icon'><\/div>").addClass(t.iconCls).click(function(n){t.handler.call(this,o,n)}).appendTo($tool):n.isArray(t.iconCls)&&function(t){n("<div class='om-icon'><\/div>").addClass(t.iconCls[0]).click(function(n){t.handler.call(this,o,n)}).hover(function(){t.iconCls[1]&&n(this).toggleClass(t.iconCls[1])}).appendTo($tool)}(t);else try{n(u).appendTo($tool)}catch(c){throw"bad format of jquery selector.";}i.closable!==!1&&n("<div class='om-icon om-panel-tool-close'><\/div>").appendTo($tool);$tool.find(">div.om-icon").hover(function(){var t=this;n.each(r,function(){n(t).hasClass(this)&&n(t).toggleClass(this+"-hover")})});$tool.appendTo(f)}},_resize:function(n){var t=this.element,r=t.prev(),n=t.parent(),i=this.options,u;i.width=="fit"?(i.width="100%",n.width("100%"),r.css("width",""),t.css("width","")):i.width!=="auto"?(n.width(i.width),r.outerWidth(n.width()),t.outerWidth(n.width())):(u=t.attr("style"),u&&u.indexOf("width")!==-1?(n.width(t.outerWidth()),r.outerWidth(t.outerWidth())):(n.css("width",""),r.css("width",""),t.css("width","")));i.height=="fit"?(i.height="100%",n.height("100%"),t.outerHeight(n.height()-(this.options.header!==!1?r.outerHeight():0))):i.height!=="auto"?(n.height(i.height),t.outerHeight(n.height()-(this.options.header!==!1?r.outerHeight():0))):(u=t.attr("style"),u&&u.indexOf("height")!==-1?n.height(r.outerHeight()+t.outerHeight()):(n.css("height",""),t.css("height","")))},_getInnerToolCls:function(t){return n.inArray(t,i)!=-1?"om-panel-tool-"+t:null},_showLoadingMessage:function(){var r=this.options,t=this.element,u=t.next(".om-panel-loadingMessage"),i={width:t.innerWidth(),height:t.innerHeight(),left:t.position().left+parseInt(t.css("border-left-width")),top:t.position().top};u.length===0?"default"===r.loadingMessage?n("<div class='om-panel-loadingMessage'><div class='valignMiddle'><div class='loadingImg'>数据加载中<\/div><\/div><\/div>").css(i).appendTo(t.parent()):n("<div class='om-panel-loadingMessage'><\/div>").appendTo(t.parent()).html(r.loadingMessage).css(i):u.css(i).show()},_hideLoadingMessage:function(){this.element.parent().find(".om-panel-loadingMessage").hide()},setTitle:function(n){this.element.prev().find(">.om-panel-title").html(n)},setIconClass:function(t){var r=this.element.prev(),i=r.find(">.om-panel-icon");t==null&&i.length!==0?i.remove():(i.length==0&&(i=n("<div class='om-icon om-panel-icon'><\/div>").insertBefore(r.find(">.om-panel-title"))),this.options.iconCls&&i.removeClass(this.options.iconCls),i.addClass(t),this.options.iconCls=t)},open:function(){var t=this.element,n=this.options;if(n.closed){if(n.onBeforeOpen&&this._trigger("onBeforeOpen")===!1)return;this._show(t.parent());n.closed=!1;n.onOpen&&this._trigger("onOpen")}},close:function(){var t=this.element,n=this.options;if(!n.closed){if(n.onBeforeClose&&this._trigger("onBeforeClose")===!1)return;this._hide(t.parent());n.closed=!0;n.onClose&&this._trigger("onClose")}},reload:function(t){var r=this.options,i=this.element,u=this;if(!i.data("loading")){if(i.data("loading",!0),t=t||r.url,!t){i.data("loading",!1);return}r.url=t;this._showLoadingMessage();n.ajax(t,{cache:!1,success:function(n,t,f){i.html(r.preProcess?r.preProcess.call(i[0],n,t):n);i.data("loading",!1);u._hideLoadingMessage();r.onSuccess&&u._trigger("onSuccess",null,n,t,f)},error:function(n,t,f){i.data("loading",!1);u._hideLoadingMessage();r.onError&&u._trigger("onError",null,n,t,f)}})}},resize:function(t){var i=this.options,r,u;n.isPlainObject(t)?(r=t.width||null,u=t.height||null):(r=arguments[0],u=arguments[1]);i.width=r||i.width;i.height=u||i.height;this._resize(this.element.parent())},collapse:function(){var e=this,n=this.element,o=n.prev(),u=n.parent(),h=n.next(".om-panel-loadingMessage"),r=this.options,s=t.anim,f=t.speed,i;(arguments[0]!=undefined&&(s=arguments[0]),f=arguments[1]||f,r.onBeforeCollapse&&e._trigger("onBeforeCollapse")===!1)||(u.stop(!0,!0),o.length!==0&&(i=o.find("> .om-panel-tool > div.om-panel-tool-collapse"),i.length!==0&&(i.removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand"),i.hasClass("om-panel-tool-collapse-hover")&&i.toggleClass("om-panel-tool-collapse-hover om-panel-tool-expand-hover"))),u.animate({height:"-="+n.outerHeight()},s?f||"normal":0,function(){n.hide();h.hide();"auto"===r.height&&u.css("height","");r.onCollapse&&e._trigger("onCollapse")}),r.collapsed=!0)},expand:function(){var o=this,n=this.element,f=n.prev(),u=n.parent(),h=n.next(".om-panel-loadingMessage"),i=this.options,s=t.anim,e=t.speed,r;(arguments[0]!=undefined&&(s=arguments[0]),e=arguments[1]||e,i.onBeforeExpand&&o._trigger("onBeforeExpand")===!1)||(u.stop(!0,!0),f.length!==0&&(r=f.find("> .om-panel-tool > div.om-panel-tool-expand"),r.length!==0&&(r.removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse"),r.hasClass("om-panel-tool-expand-hover")&&r.toggleClass("om-panel-tool-expand-hover om-panel-tool-collapse-hover"))),"auto"===i.height&&u.height(f.outerHeight()),n.show(),n.data("loading")&&h.show(),u.animate({height:"+="+n.outerHeight()},s?e||"normal":0,function(){"auto"===i.height&&u.css("height","");i.onExpand&&o._trigger("onExpand")}),i.collapsed=!1)},destroy:function(){var n=this.element;n.parent().after(n).remove()}})}(jQuery),function(n){n.omWidget("om.omGrid",{options:{height:462,width:"100%",colModel:!1,autoFit:!1,showIndex:!0,dataSource:!1,extraData:{},method:"GET",preProcess:!1,limit:15,rowClasses:["oddRow","evenRow"],singleSelect:!0,title:"",onRowSelect:function(){},onRowDeselect:function(){},onRowClick:function(){},onRowDblClick:function(){},onPageChange:function(){},onSuccess:function(){},onError:function(){},onRefresh:function(){},_onRefreshCallbacks:[],_onResizableStopCallbacks:[],_onResizableCallbacks:[],_onResizeCallbacks:[]},_create:function(){var r=this.options,t=this.element.show().attr({cellPadding:0,cellSpacing:0,border:0}).empty().append("<tbody><\/tbody>"),i;(t.wrap('<div class="om-grid om-widget om-widget-content"><div class="bDiv" style="width:auto"><\/div><\/div>').closest(".om-grid"),n.isArray(this._getColModel()))&&(this.hDiv=n('<div class="hDiv om-state-default"><\/div>').append('<div class="hDivBox"><table cellPadding="0" cellSpacing="0"><\/table><\/div>'),t.parent().before(this.hDiv),this.pDiv=n('<div class="pDiv om-state-default"><\/div>'),t.parent().after(this.pDiv),i=t.closest(".om-grid"),this.loadMask=n('<div class="gBlock"><div align="center" class="gBlock-valignMiddle" ><div class="loadingImg" style="display:block"/><\/div><\/div>').mousedown(function(){return!1}).hide(),i.append(this.loadMask),this.titleDiv=n("<div class='titleDiv'><\/div>"),i.prepend(this.titleDiv),this.tbody=this.element.children().eq(0),this._guid=0,r._onRefreshCallbacks.push(function(){this._refreshHeaderCheckBox()}),this._bindScrollEnvent())},_init:function(){var t=this.element,i=this.options,r=t.closest(".om-grid");(this._measure(r,i),n.isArray(this._getColModel()))&&(this._extraData={},this.tbody.empty(),n("table",this.hDiv).empty(),this.pDiv.empty(),this.titleDiv.empty(),this._buildTableHead(),this._buildPagingToolBar(),this._buildLoadMask(),this._bindSelectAndClickEnvent(),this._makeColsResizable(),this._buildTitle(),this._resetHeight(),this.pageData={nowPage:1,totalPages:1},this._populate())},resize:function(t){var r=this,i=this.options,u=this.element.closest(".om-grid");t=t||{};i.width=t.width||arguments[0]||i.width;i.height=t.height||arguments[1]||i.height;this._measure(u,i);this._buildLoadMask();this._resetWidth();this._resetHeight();n.each(i._onResizeCallbacks,function(n,t){t.call(r)})},_measure:function(n,t){n.outerWidth(t.width==="fit"?n.parent().width():t.width);n.outerHeight(t.height==="fit"?n.parent().height():t.height)},_resetHeight:function(){var t=this.element,n=t.closest(".om-grid"),i=this.hDiv.outerHeight(!0),r=this.pDiv.is(":hidden")?0:this.pDiv.outerHeight(!0),u=this.titleDiv.is(":hidden")?0:this.titleDiv.outerHeight(!0);n.children(".bDiv").outerHeight(n.height()-i-r-u)},_resetWidth:function(){var u=this._getColModel(),i=-1,f=n("thead",this.hDiv),r=0,t;n.each(u,function(n,t){var u=t.width||60;t.width=="autoExpand"&&(u=0,i=n);f.find("th[axis='col"+n+"'] >div").width(u);r+=u});this._fixHeaderWidth(i,r);t={};n(this._getHeaderCols()).each(function(){t[n(this).attr("abbr")]=n("div",n(this)).width()});this.tbody.find("td[abbr]").each(function(i,r){var u=n(r).prop("abbr");t[u]!=null&&n(r).find(">div:first").width(t[u])})},_getColModel:function(){return this.options.colModel},_buildTitle:function(){var n=this.titleDiv;this.options.title?n.html("<div class='titleContent'>"+this.options.title+"<\/div>").show():n.empty().hide()},_fixHeaderWidth:function(t,i){var o=this.element.closest(".om-grid"),u=n("thead",this.hDiv),s=this._getColModel(),h=this.options,e,r,f;if(t!=-1)e=o.width()-32,r=u.find('th[axis="col'+t+'"] div'),r.parent().hide(),f=e-u.width(),r.parent().show(),f<=0?r.css("width",60):r.css("width",f);else if(h.autoFit){var e=o.width()-22,f=e-u.width(),c=1+f/i,l=u.find('th[axis^="col"] >div');n.each(s,function(n){var t=l.eq(n);t.width(parseInt(t.width()*c))})}},_buildTableHead:function(){var o=this.options,s=this.element,w=s.closest(".om-grid"),h=this._getColModel(),c=0,v=0,y=0,l=-1,r,i,a,e,f;for(thead=n("<thead><\/thead>"),tr=n("<tr><\/tr>").appendTo(thead),o.showIndex&&(r=n("<th><\/th>").attr({axis:"indexCol",align:"center"}).addClass("indexCol").append(n('<div class="indexheader" style="text-align:center;width:25px;"><\/div>')),tr.append(r),v=25),o.singleSelect||(r=n("<th><\/th>").attr({axis:"checkboxCol",align:"center"}).addClass("checkboxCol").append(n('<div class="checkboxheader" style="text-align:center;width:17px;"><span class="checkbox"/><\/div>')),tr.append(r),y=17),i=0,a=h.length;i<a;i++){var t=h[i],u=t.width||60,p=t.align||"center";u=="autoExpand"&&(u=0,l=i);e=n("<div><\/div>").html(t.header).css({"text-align":p,width:u});t.wrap&&e.addClass("wrap");f=n("<th><\/th>").attr("axis","col"+i).addClass("col"+i).append(e);t.name&&f.attr("abbr",t.name);t.align&&f.attr("align",t.align);c+=u;tr.append(f)}s.prepend(thead);n("table",this.hDiv).append(thead);this._fixHeaderWidth(l,c);this.thead=thead;thead=null},_buildPagingToolBar:function(){var r=this.options,u;if(r.limit<=0){this.pDiv.css("border-width",0).hide();this.pager=this.pDiv;return}var i=this,f=this.element,t=this.pDiv;t.show().html('<div class="pDiv2"><div class="pGroup"><div class="pFirst pButton om-icon"><span class="om-icon-seek-start"><\/span><\/div><div class="pPrev pButton om-icon"><span class="om-icon-seek-prev"><\/span><\/div><\/div><div class="btnseparator"><\/div><div class="pGroup"><span class="pControl"><\/span><\/div><div class="btnseparator"><\/div><div class="pGroup"><div class="pNext pButton om-icon"><span class="om-icon-seek-next"><\/span><\/div><div class="pLast pButton om-icon"><span class="om-icon-seek-end"><\/span><\/div><\/div><div class="btnseparator"><\/div><div class="pGroup"><div class="pReload pButton om-icon"><span class="om-icon-refresh"><\/span><\/div><\/div><div class="btnseparator"><\/div><div class="pGroup"><span class="pPageStat"><\/span><\/div><\/div>');u=n.om.lang._get(r,"omGrid","pageText").replace(/{totalPage}/,"<span>1<\/span>").replace(/{index}/,'<input type="text" size="4" value="1" />');n(".pControl",t).html(u);f.parent().after(t);n(".pReload",t).click(function(){i._populate()});n(".pFirst",t).click(function(){i._changePage("first")});n(".pPrev",t).click(function(){i._changePage("prev")});n(".pNext",t).click(function(){i._changePage("next")});n(".pLast",t).click(function(){i._changePage("last")});n(".pControl input",t).keydown(function(t){t.keyCode==n.om.keyCode.ENTER&&i._changePage("input")});n(".pButton",t).hover(function(){n(this).addClass("om-state-hover")},function(){n(this).removeClass("om-state-hover")});this.pager=t},_buildLoadMask:function(){var n=this.element.closest(".om-grid");this.loadMask.css({width:"100%",height:n.height()})},_changePage:function(t){var i;if(this.loading)return!0;var o=this.element,e=this.pageData,u=e.nowPage,f=e.totalPages,r=u;this._oldPage=u;switch(t){case"first":r=1;break;case"prev":u>1&&(r=u-1);break;case"next":u<f&&(r=u+1);break;case"last":r=f;break;case"input":i=parseInt(n(".pControl input",o.closest(".om-grid")).val());isNaN(i)&&(i=u);i<1?i=1:i>f&&(i=f);n(".pControl input",this.pDiv).val(i);r=i;break;default:/\d/.test(t)&&(i=parseInt(t),isNaN(i)&&(i=1),i<1?i=1:i>f&&(i=f),n(".pControl input",o.closest(".om-grid")).val(i),r=i)}if(r==u)return!1;this._trigger("onPageChange",null,t,r)!==!1&&(e.nowPage=r,this._populate())},_populate:function(){var i=this,h=this.element,r=h.closest(".om-grid"),t=this.options,e=n(".pPageStat",r),f,s;if(!t.dataSource)return n(".pPageStat",r).html(t.emptygMsg),!1;if(this.loading)return!0;var c=this.pageData,o=c.nowPage||1,u=n(".gBlock",r);this.loading=!0;e.html(n.om.lang._get(t,"omGrid","loadingMsg"));u.show();f=t.limit<=0?1e8:t.limit;s=n.extend(!0,{},this._extraData,t.extraData,{start:f*(o-1),limit:f,_time_stamp_:(new Date).getTime()});n.ajax({type:t.method,url:t.dataSource,data:s,dataType:"json",success:function(n,r,f){typeof t.onSuccess=="function"&&i._trigger("onSuccess",null,n,r,f);i._addData(n);for(var e=0,s=t._onRefreshCallbacks.length;e<s;e++)t._onRefreshCallbacks[e].call(i);i._trigger("onRefresh",null,o,n.rows);u.hide();i.loading=!1},error:function(r,f,o){e.html(n.om.lang._get(t,"omGrid","errorMsg")).css("color","red");try{var s=t.onError;typeof s=="function"&&s(r,f,o)}catch(h){}finally{return u.hide(),i.loading=!1,i.pageData.data={rows:[],total:0},!1}}})},_addData:function(n){var t=this.options,u=this.element,f=u.closest(".om-grid"),i=t.preProcess,r=this.pageData;i&&(n=i(n));r.data=n;r.totalPages=Math.ceil(n.total/t.limit);this._buildPager();this._renderDatas()},_buildPager:function(){var t=this.options;if(!(t.limit<=0)){var u=this.pager,f=n(".pControl",u),i=this.pageData,e=i.nowPage,h=i.totalPages,r=i.data,o=t.limit*(e-1)+1,c=o-1+r.rows.length,s="";s=r.total===0?n.om.lang._get(t,"omGrid","emptyMsg"):n.om.lang._get(t,"omGrid","pageStat").replace(/{from}/,o).replace(/{to}/,c).replace(/{total}/,r.total);n("input",f).val(e);n("span",f).html(h);n(".pPageStat",u).html(s)}},_renderDatas:function(){var r=this,c=this.element,u=this.options,f=this._getHeaderCols(),l=this.pageData.data.rows||[],e=this._getColModel(),t=u.rowClasses,a=n("tbody",c).empty(),v=typeof t=="function",y=this.pageData,p=(y.nowPage-1)*u.limit,w="<td align='$' abbr='$' class='$'><div align='$' class='innerCol $' style='width:$px'>$<\/div><\/td>",o=[],i=[],s,h;this.pageData.data.rows||(this.pageData.data.rows=[]);r.hDiv.scrollLeft(0);n(f).each(function(t){o[t]=n("div",n(this)).width()});n.each(l,function(u,c){var l=v?t(u,c):t[u%t.length],a=r._buildRowCellValues(e,c,u);i.push("<tr _grid_row_id="+r._guid+++" class='om-grid-row "+l+"'>");n(f).each(function(t){var r=n(this).attr("axis"),l=!1,f,c;r=="indexCol"?f=u+p+1:r=="checkboxCol"?f='<span class="checkbox"/>':r.substring(0,3)=="col"?(c=r.substring(3),f=a[c],e[c].wrap&&(l=!0)):f="";s=[this.align,this.abbr,r,this.align,l?"wrap":"",o[t],f];h=0;i.push(w.replace(/\$/g,function(){return s[h++]}))});i.push("<\/tr>")});a.html(i.join(" "))},_getHeaderCols:function(){return this.hDiv.find("th[axis]")},_buildRowCellValues:function(n,t,i){for(var u,r,e,c=n.length,s=[],f=0;f<c;f++){if(u=n[f],e=u.renderer,u.name.indexOf(".")>0)for(var o=u.name.split("."),h=1,l=o.length,r=t[o[0]];h<l&&r&&(r=r[o[h++]])!=undefined;);r==undefined&&(r=t[u.name]==undefined?"":t[u.name]);typeof e=="function"&&(r=e(r,t,i));s[f]=r;r=null}return s},_bindScrollEnvent:function(){var t=this;this.tbody.closest(".bDiv").scroll(function(){t.hDiv&&t.hDiv.scrollLeft(n(this).scrollLeft())})},_bindSelectAndClickEnvent:function(){var t=this;this.tbody.unbind();this.options.singleSelect?(this.tbody.delegate("tr.om-grid-row","click",function(i){var f=n(this),r=t._getRowIndex(f),u;f.hasClass("om-state-highlight")||(u=t._getRowIndex(t.tbody.find("tr.om-state-highlight:not(:hidden)")),u!=-1&&t._rowDeSelect(u),t._rowSelect(r));t._trigger("onRowClick",i,r,t._getRowData(r))}),this.tbody.delegate("tr.om-grid-row","dblclick",function(n){var i=t._getRowIndex(this);t._trigger("onRowDblClick",n,i,t._getRowData(i))})):(n("th.checkboxCol span.checkbox",this.thead).click(function(){var r=n(this),u=t._getTrs().size(),i;if(r.hasClass("selected"))for(r.removeClass("selected"),i=0;i<u;i++)t._rowDeSelect(i);else for(r.addClass("selected"),i=0;i<u;i++)t._rowSelect(i)}),this.tbody.delegate("tr.om-grid-row","click",function(i){var u=n(this),r=t._getRowIndex(u);u.hasClass("om-state-highlight")?t._rowDeSelect(r):t._rowSelect(r);t._refreshHeaderCheckBox();t._trigger("onRowClick",i,r,t._getRowData(r))}),this.tbody.delegate("tr.om-grid-row","dblclick",function(i){var u=n(this),r=t._getRowIndex(u);u.hasClass("om-state-highlight")||(t._rowSelect(r),t._refreshHeaderCheckBox());t._trigger("onRowDblClick",i,r,t._getRowData(r))}))},_getRowData:function(n){return this.pageData.data.rows[n]},_rowSelect:function(t){var i=this._getTrs().eq(t),r=n("td.checkboxCol span.checkbox",i);i.addClass("om-state-highlight");r.addClass("selected");this._trigger("onRowSelect",null,t,this._getRowData(t))},_rowDeSelect:function(t){var i=this._getTrs().eq(t),r=n("td.checkboxCol span.checkbox",i);i.removeClass("om-state-highlight");r.removeClass("selected");this._trigger("onRowDeselect",null,t,this._getRowData(t))},_refreshHeaderCheckBox:function(){var i=this.getSelections(),r=this._getTrs(),u=n("th.checkboxCol span.checkbox",this.thead),t=r.length;u.toggleClass("selected",t>0&&t==i.length)},_makeColsResizable:function(){var t=this,r=t.tbody.closest(".bDiv"),f=t.element.closest(".om-grid"),u=this.titleDiv,i=0;n('th[axis^="col"] div',t.thead).omResizable({handles:"e",containment:"document",minWidth:60,resize:function(i){for(var o=t.options._onResizableCallbacks,e=0,c=o.length;e<c;e++)o[e].call(t);var s=n(this),l=s.parent().attr("abbr"),a=n('td[abbr="'+l+'"] > div',t.tbody),h=t.thead.closest(".hDiv");s.width(i.size.width).height("");a.width(i.size.width).height("");r.height(f.height()-(u.is(":hidden")?0:u.outerHeight(!0))-h.outerHeight(!0)-(t.pDiv.is(":hidden")?0:t.pDiv.outerHeight(!0)));h.scrollLeft(r.scrollLeft())},start:function(){i=n(this).parent().width()},stop:function(){var f=t.options._onResizableStopCallbacks,e=n(this).parent(),s=t.thead.closest(".hDiv"),u,o;for(i=e.width()-i,u=0,o=f.length;u<o;u++)f[u].call(t,e,i);s.scrollLeft(r.scrollLeft())}})},_getRowIndex:function(n){return this._getTrs().index(n)},_getTrs:function(){return this.tbody.find("tr.om-grid-row:not([_delete]=true)")},setData:function(n){this.options.dataSource=n;this.pageData={nowPage:1,totalPages:1};this._populate()},getData:function(){return this.pageData.data},refresh:function(){var t,i,r;if(this.loading)return!0;for(this.loading=!0,t=this.options,n(".pPageStat",this.pager).html(n.om.lang._get(t,"omGrid","loadingMsg")),this.loadMask.show(),this._buildPager(),this._renderDatas(),this._trigger("onRefresh",null,this.pageData.nowPage||1,this.pageData.data.rows),i=0,r=t._onRefreshCallbacks.length;i<r;i++)t._onRefreshCallbacks[i].call(this);this.loadMask.hide();this.loading=!1},reload:function(n){if(this.loading)return!0;typeof n!="undefined"&&(n=parseInt(n)||1,n<0&&(n=1),n>this.pageData.totalPages&&(n=this.pageData.totalPages),this.pageData.nowPage=n);this._populate()},setSelections:function(t){var i=this,r;n.isArray(t)||(t=[t]);r=this.getSelections();n(r).each(function(){i._rowDeSelect(this)});n(t).each(function(){i._rowSelect(this)});i._refreshHeaderCheckBox()},getSelections:function(n){var r=this,i=r._getTrs(),u=i.filter(".om-state-highlight"),t=[],f;return n?(f=r.getData().rows,u.each(function(n,r){t[t.length]=f[i.index(r)]})):u.each(function(n,r){t[t.length]=i.index(r)}),t},destroy:function(){var n=this.element;n.closest(".om-grid").after(n).remove()}});n.om.lang.omGrid={loadingMsg:"正在加载数据，请稍候...",emptyMsg:"没有数据",errorMsg:"取数出错",pageText:"第{index}页，共{totalPage}页",pageStat:"共{total}条数据，显示{from}-{to}条"}}(jQuery),function(n){var t="om-accordion-panel-"+((1+Math.random())*65536|0).toString(16).substring(1)+"-",i=0;n.omWidget("om.omAccordion",{options:{active:0,autoPlay:!1,collapsible:!1,disabled:!1,height:"auto",header:"> ul:first li",iconCls:null,interval:1e3,switchEffect:!1,switchMode:"click",width:"auto",onActivate:function(){},onBeforeActivate:function(){},onBeforeCollapse:function(){},onCollapse:function(){}},activate:function(n){var t=this.options;clearInterval(t.autoInterId);this._activate(n);this._setAutoInterId(this)},disable:function(){var t=this.element,i=this.options,r;i.autoPlay&&clearInterval(i.autoInterId);i.disabled=!0;(r=t.find(">.om-accordion-disable")).length===0&&n("<div class='om-accordion-disable'><\/div>").css({position:"absolute",top:0,left:0}).width(t.outerWidth()).height(t.outerHeight()).appendTo(t);r.show()},enable:function(){this.options.disabled=!1;this.element.find(">.om-accordion-disable").hide()},getActivated:function(){for(var i=n.data(this.element,"panels"),t=0,r=i.length;t<r;t++)if(!i[t].omPanel("option","collapsed"))return i[t].prop("id");return null},getLength:function(){return n.data(this.element,"panels").length},reload:function(t){var i=n.data(this.element,"panels");if(this.options.disabled!==!1||i.length===0)return this;t=this._correctIndex(t);i[t].omPanel("reload")},resize:function(){var r=this.element,u=this.options,t=n.data(this.element,"panels"),i=0;this._initWidthOrHeight("width");this._initWidthOrHeight("height");n.each(t,function(n,t){i+=t.prev().outerHeight()});n.each(t,function(n,t){u.height==="auto"?t.css("height",""):t.outerHeight(r.height()-i)})},setTitle:function(t,i){var r=n.data(this.element,"panels");if(this.options.disabled!==!1||r.length===0)return this;t=this._correctIndex(t);r[t].omPanel("setTitle",i)},url:function(t,i){var r=n.data(this.element,"panels");i&&this.options.disabled===!1&&r.length!==0&&(t=this._correctIndex(t),r[t].omPanel("option","url",i))},_create:function(){var t=this.element,n=this.options;t.addClass("om-widget om-accordion").css("position","relative");this._renderPanels();n.active=this._correctIndex(n.active);this.resize();this._buildEvent();n.disabled!==!1&&this.disable()},_correctIndex:function(t){var u=this.element,e=n.data(this.element,"panels"),f=u.children().find(">div#"+t),r=e.length,o=t,i;return t=f.length?u.find(">.om-panel").index(f.parent()):t,t=t==-1?o:t,i=parseInt(t),i=(isNaN(i)&&"0"||i)-0,r==0||i===-1&&this.options.collapsible!==!1?-1:i<0?0:i>=r?r-1:i},_panelCreateCollapse:function(n,t){var f=this.element,u=this.options,e,r,i;return u.active===-1&&u.collapsible===!0?!0:(e=f.find(">div#"+u.active),r=f.children().index(e),r=r==-1?u.active:r,i=parseInt(r),i=(isNaN(i)&&"0"||i)-0,i=i<0?0:i>=n?n-1:i,i!==t)},_renderPanels:function(){var u=this.element,r=this,o=[],s=this.options,h=u.find(s.header),f=[],e;h.find("a").each(function(o){var a=this.getAttribute("href",2),v=a.split("#")[0],y,h,c,l;v&&(v===location.toString().split("#")[0]||(y=n("base")[0])&&v===y.href)&&(a=this.hash,this.href=a);h=n(this);f[o]={title:h.text(),iconCls:h.attr("iconCls"),onExpand:function(n){r._trigger("onActivate",n,o)},tools:[{id:"collapse",handler:function(n,t){clearInterval(s.autoInterId);r._activate(o,!0);r._setAutoInterId(r);t.stopPropagation()}}],onCollapse:function(n){r._trigger("onCollapse",n,o)},onSuccess:function(){r.resize()},onError:function(){r.resize()}};c=n(">"+a,u);l=c.prop("id");c[0]?(l||c.prop("id",l=t+i++),c.appendTo(u)):(f[o].url=h.attr("href"),n("<div><\/div>").prop("id",l=h.prop("id")||t+i++).appendTo(u));e=e||l});e&&u.find("#"+e).prevAll().remove();h.remove();n.each(f,function(n,t){t.collapsed=r._panelCreateCollapse(f.length,n)});n.each(u.children(),function(n,t){if(o.push(r._createPanel(t,f[n])),n===0){var i=o[0].prev();i.css("border-top-width",i.css("border-bottom-width"))}});n.data(u,"panels",o)},_initWidthOrHeight:function(n){var t=this.element,r=this.options,u=this.element.attr("style"),i=r[n];i=="fit"?t.css(n,"100%"):i!=="auto"?t.css(n,i):u&&u.indexOf(n)!=-1?r[n]=t.css(n):t.css(n,"")},_createPanel:function(t,i){return n(t).omPanel(i)},_buildEvent:function(){var i=this.options,t=this;this.element.children().find(">div.om-panel-header").each(function(r){var u=n(this);u.unbind();i.switchMode=="mouseover"?u.bind("mouseenter.omaccordions",function(){clearInterval(i.autoInterId);var u=n.data(t.element,"expandTimer");typeof u!="undefined"&&clearTimeout(u);u=setTimeout(function(){t._activate(r,!0);t._setAutoInterId(t)},200);n.data(t.element,"expandTimer",u)}):i.switchMode=="click"&&u.bind("click.omaccordions",function(){clearInterval(i.autoInterId);t._activate(r,!0);t._setAutoInterId(t)});u.hover(function(){n(this).toggleClass("om-panel-header-hover")})});i.autoPlay&&(clearInterval(i.autoInterId),t._setAutoInterId(t))},_setAutoInterId:function(n){var t=n.options;t.autoPlay&&(t.autoInterId=setInterval(function(){n._activate("next")},t.interval))},_setOption:function(t,i){n.OMWidget.prototype._setOption.apply(this,arguments);var r=this.options;switch(t){case"active":this.activate(i);break;case"disabled":i===!1?this.enable():this.disable();break;case"width":r.width=i;this._initWidthOrHeight("width");break;case"height":r.height=i;this._initWidthOrHeight("height")}},_activate:function(t,i){var e=n.data(this.element,"panels"),c=e.length,r=this.options,f=this,a=!1,u=-1,o=!1,s,h,l;if(r.disabled===!1||c!==0){for(t=t==="next"?(r.active+1)%c:f._correctIndex(t),r.switchEffect&&(o=!0,s="fast"),h=0;h<c;h++)n(e[h]).stop(!0,!0);l=f.getActivated();a=!!l;a?(u=f._correctIndex(l),u==t?i===!0&&r.collapsible!==!1&&f._trigger("onBeforeCollapse",null,u)!==!1?(n(e[u]).omPanel("collapse",o,s),r.active=-1):r.active=u:t===-1?f._trigger("onBeforeCollapse",null,u)!==!1?(n(e[u]).omPanel("collapse",o,s),r.active=-1):r.active=u:f._trigger("onBeforeCollapse",null,u)!==!1&&(canAct=f._trigger("onBeforeActivate",null,t)!==!1)?(n(e[u]).omPanel("collapse",o,s),n(e[t]).omPanel("expand",o,s),r.active=t):r.active=u):t==="-1"?r.active=-1:f._trigger("onBeforeActivate",null,t)!==!1&&(n(e[t]).omPanel("expand",o,s),r.active=t)}}})}(jQuery),function(n){function t(){var n="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(n):window.opera&&window.opera.postError&&window.opera.postError(n)}n.fn.omAjaxSubmit=function(i){function b(u){function it(n){return n.contentWindow?n.contentWindow.document:n.contentDocument?n.contentDocument:n.document}function rt(){function a(){try{var n=it(l).readyState;t("state = "+n);n.toLowerCase()=="uninitialized"&&setTimeout(a,50)}catch(i){t("Server abort: ",i," (",i.name,")");y(d);b&&clearTimeout(b);b=undefined}}var e=r.attr("target"),o=r.attr("action"),i,u;h.setAttribute("target",w);s||h.setAttribute("method","POST");o!=f.url&&h.setAttribute("action",f.url);f.skipEncodingOverride||s&&!/post/i.test(s)||r.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});f.timeout&&(b=setTimeout(function(){g=!0;y(nt)},f.timeout));i=[];try{if(f.extraData)for(u in f.extraData)i.push(n('<input type="hidden" name="'+u+'" />').attr("value",f.extraData[u]).appendTo(h)[0]);f.iframeTarget||(c.appendTo("body"),l.attachEvent?l.attachEvent("onload",y):l.addEventListener("load",y,!1));setTimeout(a,15);h.submit()}finally{h.setAttribute("action",o);e?h.setAttribute("target",e):r.removeAttr("target");n(i).remove()}}function y(i){var r,u,p,s,tt,w,h,v,k;if(!e.aborted&&!et){try{o=it(l)}catch(rt){t("cannot access response document: ",rt);i=d}if(i===nt&&e){e.abort("timeout");return}if(i==d&&e){e.abort("server abort");return}if(o&&o.location.href!=f.iframeSrc||g){l.detachEvent?l.detachEvent("onload",y):l.removeEventListener("load",y,!1);r="success";try{if(g)throw"timeout";if(p=f.dataType=="xml"||o.XMLDocument||n.isXMLDoc(o),t("isXml="+p),!p&&window.opera&&(o.body==null||o.body.innerHTML=="")&&--ft){t("requeing onLoad callback, DOM not available");setTimeout(y,250);return}s=o.body?o.body:o.documentElement;e.responseText=s?s.innerHTML:null;e.responseXML=o.XMLDocument?o.XMLDocument:o;p&&(f.dataType="xml");e.getResponseHeader=function(n){var t={"content-type":f.dataType};return t[n]};s&&(e.status=Number(s.getAttribute("status"))||e.status,e.statusText=s.getAttribute("statusText")||e.statusText);tt=f.dataType||"";w=/(json|script|text)/.test(tt.toLowerCase());w||f.textarea?(h=o.getElementsByTagName("textarea")[0],h?(e.responseText=h.value,e.status=Number(h.getAttribute("status"))||e.status,e.statusText=h.getAttribute("statusText")||e.statusText):w&&(v=o.getElementsByTagName("pre")[0],k=o.getElementsByTagName("body")[0],v?e.responseText=v.textContent?v.textContent:v.innerHTML:k&&(e.responseText=k.innerHTML))):f.dataType!="xml"||e.responseXML||e.responseText==null||(e.responseXML=st(e.responseText));try{ut=ct(e,f.dataType,f)}catch(i){r="parsererror";e.error=u=i||r}}catch(i){t("error caught: ",i);r="error";e.error=u=i||r}e.aborted&&(t("upload aborted"),r=null);e.status&&(r=e.status>=200&&e.status<300||e.status===304?"success":"error");r==="success"?(f.success&&f.success.call(f.context,ut,"success",e),a&&n.event.trigger("ajaxSuccess",[e,f])):r&&(u==undefined&&(u=e.statusText),f.error&&f.error.call(f.context,e,r,u),a&&n.event.trigger("ajaxError",[e,f,u]));a&&n.event.trigger("ajaxComplete",[e,f]);a&&!--n.active&&n.event.trigger("ajaxStop");f.complete&&f.complete.call(f.context,e,r);et=!0;f.timeout&&clearTimeout(b);setTimeout(function(){f.iframeTarget||c.remove();e.responseXML=null},100)}}}var h=r[0],tt,k,f,a,w,c,l,e,p,v,g,b,ot=!!n.fn.prop,nt,d,ut,o,ft,et;if(u)for(k=0;k<u.length;k++)tt=n(h[u[k].name]),tt[ot?"prop":"attr"]("disabled",!1);if(n(":input[name=submit],:input[id=submit]",h).length){alert('Error: Form elements must not have name or id of "submit".');return}if(f=n.extend(!0,{},n.ajaxSettings,i),f.context=f.context||f,w="jqFormIO"+(new Date).getTime(),f.iframeTarget?(c=n(f.iframeTarget),v=c.attr("name"),v==null?c.attr("name",w):w=v):(c=n('<iframe name="'+w+'" src="'+f.iframeSrc+'" />'),c.css({position:"absolute",top:"-1000px",left:"-1000px"})),l=c[0],e={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(i){var r=i==="timeout"?"timeout":"aborted";t("aborting upload... "+r);this.aborted=1;c.attr("src",f.iframeSrc);e.error=r;f.error&&f.error.call(f.context,e,r,i);a&&n.event.trigger("ajaxError",[e,f,r]);f.complete&&f.complete.call(f.context,e,r)}},a=f.global,a&&!n.active++&&n.event.trigger("ajaxStart"),a&&n.event.trigger("ajaxSend",[e,f]),f.beforeSend&&f.beforeSend.call(f.context,e,f)===!1){f.global&&n.active--;return}if(!e.aborted){p=h.clk;p&&(v=p.name,v&&!p.disabled&&(f.extraData=f.extraData||{},f.extraData[v]=p.value,p.type=="image"&&(f.extraData[v+".x"]=h.clk_x,f.extraData[v+".y"]=h.clk_y)));nt=1;d=2;f.forceSync?rt():setTimeout(rt,10);ft=50;var st=n.parseXML||function(n,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)):t=(new DOMParser).parseFromString(n,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},ht=n.parseJSON||function(s){return window.eval("("+s+")")},ct=function(t,i,r){var f=t.getResponseHeader("content-type")||"",e=i==="xml"||!i&&f.indexOf("xml")>=0,u=e?t.responseXML:t.responseText;return e&&u.documentElement.nodeName==="parsererror"&&n.error&&n.error("parsererror"),r&&r.dataFilter&&(u=r.dataFilter(u,i)),typeof u=="string"&&(i==="json"||!i&&f.indexOf("json")>=0?u=ht(u):(i==="script"||!i&&f.indexOf("javascript")>=0)&&n.globalEval(u)),u}}}var s,l,f,r,c,e,h,u,y,a,o,p,v;if(!this.length)return t("omAjaxSubmit: skipping submit process - no element selected"),this;if(r=this,typeof i=="function"&&(i={success:i}),s=this.attr("method"),l=this.attr("action"),f=typeof l=="string"?n.trim(l):"",f=f||window.location.href||"",f&&(f=(f.match(/^([^#]+)/)||[])[1]),i=n.extend(!0,{url:f,success:n.ajaxSettings.success,method:s||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i),c={},this.trigger("form-pre-serialize",[this,i,c]),c.veto)return t("omAjaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&i.beforeSerialize(this,i)===!1)return t("omAjaxSubmit: submit aborted via beforeSerialize callback"),this;if(u=this.formToArray(i.semantic),i.data){i.extraData=i.data;for(e in i.data)if(i.data[e]instanceof Array)for(y in i.data[e])u.push({name:e,value:i.data[e][y]});else h=i.data[e],h=n.isFunction(h)?h():h,u.push({name:e,value:h})}if(i.beforeSubmit&&i.beforeSubmit(u,this,i)===!1)return t("omAjaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[u,this,i,c]),c.veto)return t("omAjaxSubmit: submit vetoed via form-submit-validate trigger"),this;a=n.param(u);i.method.toUpperCase()=="GET"?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+a,i.data=null):i.data=a;o=[];i.resetForm&&o.push(function(){r.resetForm()});i.clearForm&&o.push(function(){r.clearForm()});!i.dataType&&i.target?(p=i.success||function(){},o.push(function(t){var r=i.replaceTarget?"replaceWith":"html";n(i.target)[r](t).each(p,arguments)})):i.success&&o.push(i.success);i.success=function(n,t,u){for(var e=i.context||i,f=0,s=o.length;f<s;f++)o[f].apply(e,[n,t,u||r,r])};var k=n("input:file",this).length>0,w="multipart/form-data",d=r.attr("enctype")==w||r.attr("encoding")==w;return i.iframe!==!1&&(k||i.iframe||d)?i.closeKeepAlive?n.get(i.closeKeepAlive,function(){b(u)}):b(u):(n.browser.msie&&s=="get"&&(v=r[0].getAttribute("method"),typeof v=="string"&&(i.method=v)),i.type=i.method,n.ajax(i)),this.trigger("form-submit-notify",[this,i]),this};n.fn.ajaxForm=function(i){if(this.length===0){var r={s:this.selector,c:this.context};return!n.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),n(function(){n(r.s,r.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(n.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),n(this).omAjaxSubmit(i))}).bind("click.form-plugin",function(t){var r=t.target,u=n(r),f,i,e;if(!u.is(":submit,input:image")){if(f=u.closest(":submit"),f.length==0)return;r=f[0]}i=this;i.clk=r;r.type=="image"&&(t.offsetX!=undefined?(i.clk_x=t.offsetX,i.clk_y=t.offsetY):typeof n.fn.offset=="function"?(e=u.offset(),i.clk_x=t.pageX-e.left,i.clk_y=t.pageY-e.top):(i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop));setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)})};n.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};n.fn.formToArray=function(t){var u=[],r,o,s,h,i,f,e,a,v,l,c;if(this.length===0||(r=this[0],o=t?r.getElementsByTagName("*"):r.elements,!o))return u;for(s=0,a=o.length;s<a;s++)if(e=o[s],i=e.name,i){if(t&&r.clk&&e.type=="image"){e.disabled||r.clk!=e||(u.push({name:i,value:n(e).val()}),u.push({name:i+".x",value:r.clk_x},{name:i+".y",value:r.clk_y}));continue}if(f=n.fieldValue(e,!0),f&&f.constructor==Array)for(h=0,v=f.length;h<v;h++)u.push({name:i,value:f[h]});else f!==null&&typeof f!="undefined"&&u.push({name:i,value:f})}return!t&&r.clk&&(l=n(r.clk),c=l[0],i=c.name,i&&!c.disabled&&c.type=="image"&&(u.push({name:i,value:l.val()}),u.push({name:i+".x",value:r.clk_x},{name:i+".y",value:r.clk_y}))),u};n.fn.formSerialize=function(t){return n.param(this.formToArray(t))};n.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var f=this.name,r,u,e;if(f)if(r=n.fieldValue(this,t),r&&r.constructor==Array)for(u=0,e=r.length;u<e;u++)i.push({name:f,value:r[u]});else r!==null&&typeof r!="undefined"&&i.push({name:this.name,value:r})}),n.param(i)};n.fn.fieldValue=function(t){for(var f,i,r=[],u=0,e=this.length;u<e;u++)(f=this[u],i=n.fieldValue(f,t),i!==null&&typeof i!="undefined"&&(i.constructor!=Array||i.length))&&(i.constructor==Array?n.merge(r,i):r.push(i));return r};n.fieldValue=function(t,i){var a=t.name,u=t.type,h=t.tagName.toLowerCase(),e,o,r,f;if(i===undefined&&(i=!0),i&&(!a||t.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!t.checked||(u=="submit"||u=="image")&&t.form&&t.form.clk!=t||h=="select"&&t.selectedIndex==-1))return null;if(h=="select"){if(e=t.selectedIndex,e<0)return null;var c=[],l=t.options,s=u=="select-one",v=s?e+1:l.length;for(o=s?e:0;o<v;o++)if(r=l[o],r.selected){if(f=r.value,f||(f=r.attributes&&r.attributes.value&&!r.attributes.value.specified?r.text:r.value),s)return f;c.push(f)}return c}return n(t).val()};n.fn.clearForm=function(){return this.each(function(){n("input,select,textarea",this).clearFields()})};n.fn.clearFields=n.fn.clearInputs=function(){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,i=this.tagName.toLowerCase();n.test(t)||i=="textarea"?this.value="":t=="checkbox"||t=="radio"?this.checked=!1:i=="select"&&(this.selectedIndex=-1)})};n.fn.resetForm=function(){return this.each(function(){typeof this.reset!="function"&&(typeof this.reset!="object"||this.reset.nodeType)||this.reset()})};n.fn.enable=function(n){return n===undefined&&(n=!0),this.each(function(){this.disabled=!n})};n.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var r=this.type,i;r=="checkbox"||r=="radio"?this.checked=t:this.tagName.toLowerCase()=="option"&&(i=n(this).parent("select"),t&&i[0]&&i[0].type=="select-one"&&i.find("option").selected(!1),this.selected=t)})}}(jQuery),function(n){n.omWidget("om.omBorderLayout",{options:{fit:!1,spacing:5,hideCollapsBtn:!1,onBeforeDrag:function(){},onAfterDrag:function(){}},_create:function(){this.options.panels&&(this._minWidth=50,this._minHeight=28,this._buildRegion(),this._resizeRegion(!0),n(window).resize(n.proxy(this,"_resizeRegion")))},_getRegionSize:function(n){var t=this._getRegion(n),i=this._getRegionProxy(n),r={};return r.width=this._regionVisible(t)?t.outerWidth(!0):this._regionVisible(i)?i.outerWidth(!0):0,r.height=this._regionVisible(t)?t.outerHeight(!0):this._regionVisible(i)?i.outerHeight(!0):0,r},_resizeRegion:function(n){var t=this._getRegion("center"),h=this._getRegion("north"),o=this._getRegion("south"),e=this._getRegion("west"),s=this._getRegion("east"),d=this._getRegionProxy("north"),g=this._getRegionProxy("south"),c=this._getRegionProxy("west"),l=this._getRegionProxy("east"),i=this._getRegionSize("north").height,a,v,y,p,w,b,k;if(southHeight=this._getRegionSize("south").height,westWidth=this._getRegionSize("west").width,eastWidth=this._getRegionSize("east").width,centerWidth=this._getRegionSize("center").width,layoutWidth=this.element.width(),layoutHeight=this.element.height(),westOpt=this._getPanelOpts("west"),eastOpt=this._getPanelOpts("east"),t.css({top:i,left:westWidth}),t.find(">.om-panel-body").omPanel("resize",{height:layoutHeight-i-southHeight}),n||t.find(">.om-panel-body").omPanel("resize",{width:layoutWidth-westWidth-eastWidth}),a=t.outerHeight(!0),h&&(v=layoutWidth-(westOpt.expandToTop?westWidth:0)-(eastOpt.expandToTop?eastWidth:0),h.find(">.om-panel-body").omPanel("resize",{width:v}),h.css({left:westOpt.expandToTop?westWidth:0}),d&&d.outerWidth(v).css({left:westOpt.expandToTop?westWidth:0})),o&&(y=layoutWidth-(westOpt.expandToBottom?westWidth:0)-(eastOpt.expandToBottom?eastWidth:0),o.find(">.om-panel-body").omPanel("resize",{width:y}),o.css({top:layoutHeight-o.outerHeight(!0),left:westOpt.expandToBottom?westWidth:0}),g&&g.outerWidth(y).css({left:westOpt.expandToBottom?westWidth:0})),e&&(p=westOpt.expandToTop?0:i,w=a+(westOpt.expandToBottom?southHeight:0)+(westOpt.expandToTop?i:0),e.css({top:p}),e.find(">.om-panel-body").omPanel("resize",{height:w}),c&&(c.css({top:p}),c.outerHeight(w))),s&&(b=eastOpt.expandToTop?0:i,k=a+(eastOpt.expandToBottom?southHeight:0)+(eastOpt.expandToTop?i:0),s.css({top:b}),s.find(">.om-panel-body").omPanel("resize",{height:k}),l&&(l.css({top:b}),l.outerHeight(k))),n){var r=this._getPanelOpts("east")&&!this._getPanelOpts("east").width,u=this._getPanelOpts("west")&&!this._getPanelOpts("west").width,f=!this._getPanelOpts("center").width;(r||u||f)&&(!f&&r&&u?eastWidth=westWidth=(layoutWidth-centerWidth)/2:f&&!r&&u?centerWidth=westWidth=(layoutWidth-eastWidth)/2:f&&r&&!u?centerWidth=eastWidth=(layoutWidth-westWidth)/2:f&&r&&u&&(eastWidth=westWidth=centerWidth=layoutWidth/3));f&&t.find(">.om-panel-body").omPanel("resize",{width:Math.floor(layoutWidth-westWidth-eastWidth)});r&&s.find(">.om-panel-body").omPanel("resize",{width:Math.ceil(layoutWidth-westWidth-centerWidth)-this.options.spacing});u&&(e.find(">.om-panel-body").omPanel("resize",{width:Math.ceil(layoutWidth-eastWidth-centerWidth)-this.options.spacing}),t.css({left:e.width()+this.options.spacing}))}},_regionVisible:function(n){return n&&n.css("display")!="none"},_createRegionProxy:function(t,i){var u=this,f="",r=null;i?(f='<div class="om-borderlayout-proxy om-borderlayout-trigger-proxy-'+t.region+'" proxy="'+t.region+'"><div class="om-borderlayout-expand-trigger"><\/div><\/div>',r=n(f),t.region=="west"||t.region=="east"?r.width(u.options.spacing):(t.region=="north"||t.region=="south")&&r.height(u.options.spacing),function(n){r.find(".om-borderlayout-expand-trigger").click(function(){u.expandRegion(n.region)})}(t)):(f='<div class="om-borderlayout-proxy om-borderlayout-proxy-'+t.region+'" proxy="'+t.region+'"><div class="om-panel-title"><\/div><div class="om-panel-tool"><div class="om-icon panel-tool-expand"><\/div><\/div><\/div>',r=n(f),function(t){r.find(".panel-tool-expand").hover(function(){n(this).toggleClass("panel-tool-expand-hover")}).click(function(){u.expandRegion(t.region)})}(t));r&&r.hover(function(){n(this).toggleClass("om-borderlayout-proxy-hover")}).appendTo(this.element)},_buildRegion:function(){var i=this,u=this.element,o,s,h,r,e,c;for(this.element.addClass("om-borderlayout"),this.options.hideCollapsBtn&&this.element.addClass("om-borderlayout-hide-collaps-btn"),this.options.fit&&u.css({width:"100%",height:"100%"}),o=0;o<this.options.panels.length;o++){var t=n.extend({},this.options.panels[o]),f=this.element.find("#"+t.id),l=t.collapsible&&i.options.hideCollapsBtn;t.collapsible&&t.region!="center"&&this._createRegionProxy(t,l);t.collapsible&&(n.extend(t,{collapsible:!1}),i.options.hideCollapsBtn||n.extend(t,{tools:[{iconCls:["panel-tool-collapse","panel-tool-collapse-hover"],handler:function(n){i.collapseRegion(n.element.parent().attr("region"))}}]}));t.closable&&(s=t.onClose,n.extend(t,{onClose:function(){s&&s.call(f[0]);i._resizeRegion()}}));f.omPanel(t);(t.region=="north"||t.region=="south")&&f.omPanel("resize",{width:u.width()});h="0";r=this.options.spacing+"px";t.resizable&&t.region!="center"&&(e="",handleClass={},t.region=="west"?(e="e",handleClass.width=r,handleClass.right="-"+r):t.region=="east"?(e="w",handleClass.width=r,handleClass.left="-"+r):t.region=="south"?(e="n",handleClass.height=r,handleClass.top="-"+r):t.region=="north"&&(e="s",handleClass.height=r,handleClass.bottom="-"+r),f.parent().omResizable({handles:e,helper:"om-borderlayout-resizable-helper-"+e,stop:function(n){u.find(">.om-borderlayout-mask").remove();n.element.find(">.om-panel-body").omPanel("resize",n.size);i._resizeRegion();i.options.onAfterDrag&&i._trigger("onAfterDrag",null,n.element)},start:function(t){var o=t.element.omResizable("option","helper");n("body").find("."+o).css("border-width",i.options.spacing);var r=t.element.attr("region"),f=u.width()-2*i._minWidth,e=u.height()-2*i._minHeight;r=="west"?(f=u.width()-(i._getRegionSize("east").width+i._minWidth),t.element.omResizable("option","maxWidth",f)):r=="east"?(f=u.width()-(i._getRegionSize("west").width+i._minWidth),t.element.omResizable("option","maxWidth",f)):r=="north"?(e=u.height()-(i._getRegionSize("south").height+i._minHeight+i.options.spacing),t.element.omResizable("option","maxHeight",e)):r=="south"&&(e=u.height()-(i._getRegionSize("north").height+i._minHeight+i.options.spacing),t.element.omResizable("option","maxHeight",e));n('<div class="om-borderlayout-mask"><\/div>').css({width:u.width(),height:u.height()}).appendTo(u);i.options.onBeforeDrag&&i._trigger("onBeforeDrag",null,t.element)},minWidth:i._minWidth,minHeight:i._minHeight}),f.parent().find(".om-resizable-handle").css(handleClass),h=(t.region=="south"?r:0)+" "+(t.region=="west"?r:0)+" "+(t.region=="north"?r:0)+" "+(t.region=="east"?r:0),l&&(c=n("<div class='om-borderlayout-collaps-trigger-"+t.region+"'><\/div>"),function(n){c.click(function(){i.collapseRegion(n.attr("region"))})}(f.parent()),f.parent().find(".om-resizable-handle").append(c)));f.parent().addClass("om-borderlayout-region").addClass("om-borderlayout-region-"+t.region).css("margin",h).attr("region",t.region);f.addClass("om-borderlayout-region-body");f.prev().addClass("om-borderlayout-region-header")}},_getRegion:function(n){var t=this.element.find('>[region="'+n+'"]');return t.size()>0?t:!1},_getRegionProxy:function(n){var t=this.element.find('>[proxy="'+n+'"]');return t.size()>0?t:!1},_getPanelOpts:function(n){for(var t=0;t<this.options.panels.length;t++)if(n==this.options.panels[t].region)return this.options.panels[t];return!1},collapseRegion:function(t){var i=this._getPanelOpts(t),r,u;if(i&&i.collapsible&&(r=this._getRegion(t),$body=r.find(">.om-panel-body"),r)){if(u=n.data($body[0],"omPanel"),u.options.closed)return;if(i.onBeforeCollapse&&u._trigger("onBeforeCollapse")===!1)return!1;r.hide();i.onCollapse&&u._trigger("onCollapse");this._getRegionProxy(t).show();this._resizeRegion()}},expandRegion:function(t){var i=this._getPanelOpts(t),r,u;if(i&&i.collapsible&&(r=this._getRegion(t),$body=r.find(">.om-panel-body"),r)){if(u=n.data($body[0],"omPanel"),u.options.closed)return;if(i.onBeforeExpand&&u._trigger("onBeforeExpand")===!1)return!1;r.show();i.onExpand&&u._trigger("onExpand");this._getRegionProxy(t).hide();this._resizeRegion()}},closeRegion:function(t){var r=this._getPanelOpts(t),i,u;if(r&&r.closable&&(i=this._getRegion(t),$body=i.find(">.om-panel-body"),i)){if(u=n.data($body[0],"omPanel"),u.options.closed)return;i.find(">.om-panel-body").omPanel("close");this._getRegionProxy(t).hide();this._resizeRegion()}},openRegion:function(t){var r=this._getPanelOpts(t),i,u;if(r&&r.closable&&(i=this._getRegion(t),$body=i.find(">.om-panel-body"),i)){if(u=n.data($body[0],"omPanel"),!u.options.closed)return;i.find(">.om-panel-body").omPanel("open");this._getRegionProxy(t).hide();this._resizeRegion()}}})}(jQuery),function(n){n.omWidget("om.omButton",{options:{disabled:null,label:null,icons:{left:null,right:null},width:null,onClick:null},_create:function(){this._initElemType();var t=n("<span>").addClass("om-btn om-state-default").css("border","none"),i=n("<span>").addClass("om-btn-bg om-btn-left"),r=n("<span>").addClass("om-btn-bg om-btn-center"),u=n("<span>").addClass("om-btn-bg om-btn-right");this.element.hasClass("apusic-btn-deepblue")&&t.addClass("apusic-btn-deepblue");this.element.addClass("om-btn-txt").css({"background-position":"left center","background-repeat":"no-repeat"}).wrap(t).before(i).after(u).wrap(r)},_init:function(){var t=this,i=this.options,r=this.element,u;typeof i.disabled!="boolean"&&(i.disabled=r.propAttr("disabled"));(r.attr("disabled")=="disabled"||i.disabled=="disabled")&&(i.disabled=!0);this._initButton();i.disabled&&(t._addClass("disabled"),r.css("cursor","default"));u=r.parent().parent();u.bind("mouseenter",function(){if(i.disabled)return!1;t._addClass("hover")}).bind("mouseleave",function(){if(i.disabled)return!1;t._removeClass("hover");t._removeClass("active")}).bind("click",function(n){if(i.disabled)return n.preventDefault(),n.stopImmediatePropagation(),!1;t.options.onClick&&t._trigger("onClick",n)}).bind("mousedown",function(){if(i.disabled)return!1;t._addClass("active");t._removeClass("focus")}).bind("mouseup",function(){if(i.disabled)return!1;t._removeClass("focus");t._removeClass("active")}).bind("keydown",function(r){if(i.disabled)return!1;if((r.keyCode==n.om.keyCode.SPACE||r.keyCode==n.om.keyCode.ENTER)&&t._addClass("active"),r.keyCode==n.om.keyCode.SPACE){var u=i.onClick;if(u&&t._trigger("onClick",r)===!1)return}}).bind("keyup",function(){t._removeClass("active")});r.bind("focus.button",function(){if(i.disabled)return!1;t._addClass("focus")}).bind("blur.button",function(){if(i.disabled)return!1;t._removeClass("focus")});r.next().bind("click",function(){r.is("input")&&r.attr("type")=="submit"&&r.submit()})},enable:function(){this._removeClass("disabled");this.options.disabled=!1;this.element.css("cursor","pointer").removeAttr("disabled")},disable:function(){this._addClass("disabled");this.options.disabled=!0;this.element.css("cursor","default");(this.type=="input"||this.type=="button")&&this.element.attr("disabled","disabled")},click:function(){!this.options.disabled&&this.options.onClick&&this._trigger("onClick")},changeLabel:function(n){this.type=="a"?this.element.text(n):this.type=="input"?this.element.val(n):this.type=="button"&&this.element.html(n)},changeIcons:function(n){this.options.disabled||n&&(n.left?this.element.css("backgroundImage","url( "+n.left+" )"):null,n.right?this.element.next().attr("src",n.right):null)},destroy:function(){$el=this.element;$el.closest(".om-btn").after($el).remove()},_addClass:function(n){this.element.parent().parent().addClass("om-state-"+n)},_removeClass:function(n){this.element.parent().parent().removeClass("om-state-"+n)},_initButton:function(){var t=this.options,r=this._getLabel(),i=this.element;i.removeClass("om-btn-icon om-btn-only-icon").next("img").remove();t.width>10&&i.css("width",parseInt(t.width)-10);this.type=="a"||this.type=="button"?i.html(r):i.val(r);t.icons.left&&(r?i.addClass("om-btn-icon").css("background-image","url("+t.icons.left+")"):i.addClass("om-btn-only-icon").css("background-image","url("+t.icons.left+")"));t.icons.right&&(r!=""?n("<img>").attr("src",t.icons.right).css({"vertical-align":"baseline","padding-left":"3px"}).insertAfter(i):n("<img>").attr("src",t.icons.right).css("vertical-align","baseline").insertAfter(i))},_getLabel:function(){return this.options.label||this.element.html()||this.element.text()||this.element.val()},_initElemType:function(){this.element.is("input")?this.type="input":this.element.is("a")?this.type="a":this.element.is("button")&&(this.type="button")}})}(jQuery),function(n){n.omWidget("om.omButtonbar",{options:{width:null},_create:function(){this.element.addClass("om-buttonbar");n("<span><\/span>").addClass("om-buttonbar-null").appendTo(this.element)},_init:function(){var u=this,r=this.options,i=this.element,t=i.attr("style")?i.attr("style"):"";t&&(t=t.substr(t.length-1,t.length)==";"?t:t+";");r.width&&i.attr("style",t+"width:"+(r.width-2)+"px;");n.each(r.btns,function(t,r){if(r.separtor)n('<span class="om-buttonbar-sep"><\/span>').appendTo(i);else{var u=r.id||i.attr("id")+"_"+t,f=n('<button type="button"><\/button>').attr("id",u).appendTo(i);n.fn.omButton&&f.omButton(r)}})}})}(jQuery),function(n){n.omWidget("om.omCalendar",{options:{date:new Date,startDay:0,pages:1,minDate:!1,maxDate:!1,popup:!0,showTime:!1,onSelect:function(){},disabledDays:[],disabledFn:function(){},disabled:!1,readOnly:!1,editable:!0,dateFormat:!1},disable:function(){this.options.popup&&(this.hide(),this.options.disabled=!0,this.element.attr("disabled",!0).unbind(".omCalendar").next().addClass("om-state-disabled").unbind())},enable:function(){this.options.popup&&(this.options.disabled=!1,this.element.attr("disabled",!1).next().removeClass("om-state-disabled"),this._buildStatusEvent())},getDate:function(){return this.options.date},setDate:function(n){this.options.date=n;this._render({date:n})},_create:function(){var t=this.element,i=this.options;this.cid=this._stamp(t);i.popup?(t.wrap("<span><\/span>").after('<span class="om-calendar-trigger"><\/span>').parent().addClass("om-calendar om-widget om-state-default"),this.con=n("<div><\/div>").appendTo(document.body).css({top:"0px",position:"absolute",background:"white",visibility:"hidden","z-index":"2000"}),this._buildBodyEvent(),this._buildStatusEvent()):this.con=this.element;this.con.addClass("om-calendar-list-wrapper om-widget om-clearfix om-widget-content")},_init:function(){var i=this.element,t=this.options;this.con.addClass("multi-"+t.pages);this._buildParam();t.popup&&i.val()&&(t.date=n.omCalendar.parseDate(i.val(),t.dateFormat||this._defaultFormat)||new Date);this._render();t.readOnly||!t.editable?i.attr("readonly","readOnly").unbind():i.removeAttr("readonly");t.disabled?this.disable():this.enable()},_render:function(t){var i=0,f,s,r,h=this.element,e=this.options,o,u;for(this.ca=[],this._parseParam(t),this.con.html(""),i=0,r=[this.year,this.month];i<e.pages;i++)i===0?f=!0:(f=!1,r=this._computeNextMonth(r)),s=i==e.pages-1,this.ca.push(new n.om.omCalendar.Page({year:r[0],month:r[1],prevArrow:f,nextArrow:s,showTime:self.showTime},this)),this.ca[i]._render();e.pages>1&&(o=h.find(".om-cal-box"),u=[],n.each(o,function(t,i){u.push(n(i).css("height"))}),u.sort(),o.css("height",u[u.length-1]))},_stamp:function(n){return(n.attr("id")===undefined||n.attr("id")==="")&&n.attr("id","K_"+(new Date).getTime()),n.attr("id")},_buildStatusEvent:function(){var t=this;this.element.unbind(".omCalendar").bind("click.omCalendar",function(){t.toggle()}).bind("focus.omCalendar",function(){n(this).parent().addClass("om-state-hover om-state-active")}).bind("blur.omCalendar",function(){n(this).parent().removeClass("om-state-hover om-state-active")}).next().unbind().click(function(){t.element.trigger("focus");t.show()}).mouseover(function(){n(this).parent().addClass("om-state-hover")}).mouseout(function(){t.isVisible()||n(this).parent().removeClass("om-state-hover")})},_buildBodyEvent:function(){var t=this;n(document).bind("mousedown.omCalendar",this.globalEvent=function(){t.hide()});t.con.mousedown(function(n){n.stopPropagation()})},toggle:function(){this.isVisible()?this.hide():this.show()},isVisible:function(){return this.con.css("visibility")=="hidden"?!1:!0},show:function(){var n=this.element.parent();this.con.css("visibility","");var t=n.offset().left,i=n.offsetHeight||n.outerHeight(),r=n.offset().top+i;this.con.css("left",t.toString()+"px");this.con.css("top",r.toString()+"px")},hide:function(){this.con.css("visibility","hidden")},destroy:function(){var t=this.element;n("body").unbind(".omCalendar",this.globalEvent);this.options.popup&&(t.parent().after(t).remove(),this.con.remove())},_buildParam:function(){var n=this.options;return n.startDay&&(n.startDay=(7-n.startDay)%7),n.dateFormat||(this._defaultFormat=n.showTime?"yy-mm-dd H:i:s":"yy-mm-dd"),this.EV=[],this},_parseParam:function(t){t&&n.extend(this.options,t);this._handleDate()},_templetShow:function(n,t){var u,r,i,e,o,f;if(t instanceof Array){for(u="",i=0;i<t.length;i++)u+=arguments.callee(n,t[i]);n=u}else if(r=n.match(/{\$(.*?)}/g),t!==undefined&&r!==null)for(i=0,e=r.length;i<e;i++)f=r[i].replace(/({\$)|}/g,""),o=t[f]!==undefined?t[f]:"",n=n.replace(r[i],o);return n},_handleDate:function(){var n=this.options.date;this.day=n.getDate();this.month=n.getMonth();this.year=n.getFullYear()},_getHeadStr:function(t,i){return t.toString()+n.om.lang.omCalendar.year+(Number(i)+1).toString()+n.om.lang.omCalendar.month},_monthAdd:function(){var n=this;return n.month==11?(n.year++,n.month=0):n.month++,n.options.date.setFullYear(n.year,n.month,1),this},_monthMinus:function(){var n=this;return n.month===0?(n.year--,n.month=11):n.month--,n.options.date.setFullYear(n.year,n.month,1),this},_computeNextMonth:function(n){var i=n[0],t=n[1];return t==11?(i++,t=0):t++,[i,t]},_handleOffset:function(){for(var f=this,t=n.om.lang.omCalendar,e=[t.Su,t.Mo,t.Tu,t.We,t.Th,t.Fr,t.Sa],o=this.options.startDay,r="",u=[],i=0;i<7;i++)u[i]={day:e[(i-o+7)%7]};return r=f._templetShow("<span>{$day}<\/span>",u),{day_html:r}}});n.extend(n.om.omCalendar,{Page:function(t,i){var r=n.om.lang.omCalendar;this.father=i;this.month=Number(t.month);this.year=Number(t.year);this.prevArrow=t.prevArrow;this.nextArrow=t.nextArrow;this.node=null;this.timmer=null;this.id="";this.EV=[];this.html=['<div class="om-cal-box" id="{$id}">','<div class="om-cal-hd om-widget-header">','<a href="javascript:void(0);" class="om-prev {$prev}"><span class="om-icon om-icon-seek-prev">Prev<\/span><\/a>','<a href="javascript:void(0);" class="om-title">{$title}<\/a>','<a href="javascript:void(0);" class="om-next {$next}"><span class="om-icon om-icon-seek-next">Next<\/span><\/a>',"<\/div>",'<div class="om-cal-bd">','<div class="om-whd">',i._handleOffset().day_html,"<\/div>",'<div class="om-dbd om-clearfix">',"{$ds}","<\/div>","<\/div>",'<div class="om-setime om-state-default hidden">',"<\/div>",'<div class="om-cal-ft {$showtime}">','<div class="om-cal-time om-state-default">',"时间：00:00 &hearts;","<\/div>","<\/div>",'<div class="om-selectime om-state-default hidden">',"<\/div>","<\/div><!--#om-cal-box-->"].join("");this.nav_html=["<p>",r.month,'<select value="{$the_month}">','<option class="m1" value="1">01<\/option>','<option class="m2" value="2">02<\/option>','<option class="m3" value="3">03<\/option>','<option class="m4" value="4">04<\/option>','<option class="m5" value="5">05<\/option>','<option class="m6" value="6">06<\/option>','<option class="m7" value="7">07<\/option>','<option class="m8" value="8">08<\/option>','<option class="m9" value="9">09<\/option>','<option class="m10" value="10">10<\/option>','<option class="m11" value="11">11<\/option>','<option class="m12" value="12">12<\/option>',"<\/select>","<\/p>","<p>",r.year,'<input type="text" value="{$the_year}" onfocus="this.select()"/>',"<\/p>","<p>",'<button class="ok">',r.ok,'<\/button><button class="cancel">',r.cancel,"<\/button>","<\/p>"].join("");this.Verify=function(){var n=function(n){return/^\d+$/i.test(n)?(n=Number(n),!(n<1||n>31)):!1},t=function(n){return/^\d+$/i.test(n)?(n=Number(n),!(n<100||n>1e4)):!1},i=function(n){return/^\d+$/i.test(n)?(n=Number(n),!(n<1||n>12)):!1};return{isDay:n,isYear:t,isMonth:i}};this._renderUI=function(){var t=this,i={},r,u=t.father.options;return t.HTML="",i.prev="",i.next="",i.title="",i.ds="",t.prevArrow||(i.prev="hidden"),t.nextArrow||(i.next="hidden"),t.father.showTime||(i.showtime="hidden"),i.id=t.id="om-cal-"+Math.random().toString().replace(/.\./i,""),i.title=t.father._getHeadStr(t.year,t.month),t.createDS(),i.ds=t.ds,t.father.con.append(t.father._templetShow(t.html,i)),t.node=n("#"+t.id),u.showTime&&(r=t.node.find(".om-cal-ft"),r.removeClass("hidden"),t.timmer=new n.om.omCalendar.TimeSelector(r,t.father)),this};this._buildEvent=function(){var t=this,i=n("#"+t.id),r=t.father.options;t.EV[0]=i.find("div.om-dbd").bind("mousedown",function(i){var f=n(i.target),e,u,o;f.filter(".om-null, .om-state-disabled").length>0||(e=Number(f.html()),u=new Date(r.date),u.setFullYear(t.year,t.month,e),t.father.dt_date=u,r.showTime||t.father._trigger("onSelect",i,u),r.popup&&!r.showTime&&(t.father.hide(),isNaN(t.father.dt_date)||(o=n.omCalendar.formatDate(t.father.dt_date,r.dateFormat||t.father._defaultFormat),n(t.father.element).val(o).focus().blur())),t.father._render({date:u}))}).find("a").bind("mouseover",function(){n(this).addClass("om-state-hover om-state-nobd")}).bind("mouseout",function(){n(this).removeClass("om-state-hover").not(".om-state-highlight, .om-state-active").removeClass("om-state-nobd")});t.EV[1]=i.find("a.om-prev").bind("click",function(){return t.father._monthMinus()._render(),!1});t.EV[2]=i.find("a.om-next").bind("click",function(){return t.father._monthAdd()._render(),!1});t.EV[3]=i.find("a.om-title").bind("click",function(){try{t.timmer.hidePopup()}catch(u){}var r=t.father._templetShow(t.nav_html,{the_month:t.month+1,the_year:t.year});return i.find(".om-setime").html(r).removeClass("hidden").find("option:[value="+(t.month+1)+"]").attr("selected","selected"),this.blur(),i.find("input").bind("keydown",function(r){var u=n(r.target),f,e;if(r.keyCode==n.om.keyCode.UP&&(u.val(Number(u.val())+1),u[0].select()),r.keyCode==n.om.keyCode.DOWN&&(u.val(Number(u.val())-1),u[0].select()),r.keyCode==n.om.keyCode.ENTER){if(f=i.find(".om-setime select").val(),e=i.find(".om-setime input").val(),i.find(".om-setime").addClass("hidden"),!t.Verify().isYear(e))return;if(!t.Verify().isMonth(f))return;t.father._render({date:t._computeDate(t,e,f)})}}),!1}).bind("mouseover",function(){n(this).addClass("om-state-hover")}).bind("mouseout",function(){n(this).removeClass("om-state-hover")});t.EV[4]=i.find(".om-setime").bind("click",function(i){var f,r,u,e;if(i.preventDefault(),f=n(i.target),r=n(this),f.hasClass("ok")){if(u=r.find("select").val(),e=r.find("input").val(),r.addClass("hidden"),!t.Verify().isYear(e))return;if(!t.Verify().isMonth(u))return;u=u-r.parent().prevAll(".om-cal-box").length-1;t.father._render({date:t._computeDate(t,e,u)})}else f.hasClass("cancel")&&r.addClass("hidden")})};this._computeDate=function(n,t,i){var r=new Date(n.father.options.date.getTime());return r.setFullYear(t,i),r};this._getNode=function(){var n=this;return n.node};this._getNumOfDays=function(n,t){return 32-new Date(n,t-1,32).getDate()};this.createDS=function(){for(var i=this,u=i.father.options,f="",r=(new Date(i.year+"/"+(i.month+1)+"/01").getDay()+u.startDay+7)%7,e=i._getNumOfDays(i.year,i.month+1)+r,o=[],s,t=0;t<u.disabledDays.length;t++)o[t]=u.disabledDays[t]%7;for(t=0;t<e;t++)s=new Date(i.year+"/"+Number(i.month+1)+"/"+(t+1-r).toString()),f+=t<r?'<a href="javascript:void(0);" class="om-null" >0<\/a>':n.inArray((t+u.startDay)%7,o)>=0?'<a href="javascript:void(0);" class="om-state-disabled">'+(t-r+1)+"<\/a>":u.disabledFn(s)===!1?'<a href="javascript:void(0);" class="om-state-disabled">'+(t-r+1)+"<\/a>":u.minDate instanceof Date&&new Date(i.year+"/"+(i.month+1)+"/"+(t+1-r)).getTime()<u.minDate.getTime()+1?'<a href="javascript:void(0);" class="om-state-disabled">'+(t-r+1)+"<\/a>":u.maxDate instanceof Date&&new Date(i.year+"/"+(i.month+1)+"/"+(t+1-r)).getTime()>u.maxDate.getTime()?'<a href="javascript:void(0);" class="om-state-disabled">'+(t-r+1)+"<\/a>":t==r+(new Date).getDate()-1&&(new Date).getFullYear()==i.year&&(new Date).getMonth()==i.month?'<a href="javascript:void(0);" class="om-state-highlight om-state-nobd">'+(t-r+1)+"<\/a>":t==r+u.date.getDate()-1&&i.month==u.date.getMonth()&&i.year==u.date.getFullYear()?'<a href="javascript:void(0);" class="om-state-active om-state-nobd">'+(t-r+1)+"<\/a>":'<a href="javascript:void(0);">'+(t-r+1)+"<\/a>";if(e%7!=0)for(t=0;t<7-e%7;t++)f+='<a href="javascript:void(0);" class="om-null">0<\/a>';i.ds=f};this._render=function(){var n=this;n._renderUI();n._buildEvent()}}});n.extend(n.om.omCalendar,{TimeSelector:function(t,i){var r=n.om.lang.omCalendar;this.father=i;this.fcon=t.parent(".om-cal-box");this.popupannel=this.fcon.find(".om-selectime");typeof i.options.date=="undefined"&&(i.options.date=new Date);this.time=i.options.date;this.status="s";this.ctime=n('<div class="om-cal-time om-state-default">'+r.time+'：<span class="h">h<\/span>:<span class="m">m<\/span>:<span class="s">s<\/span><!--{{arrow--><div class="cta"><button class="u om-icon om-icon-triangle-1-n"><\/button><button class="d om-icon om-icon-triangle-1-s"><\/button><\/div><!--arrow}}--><\/div>');this.button=n('<button class="ct-ok om-state-default">'+r.ok+"<\/button>");this.h_a=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"];this.m_a=["00","10","20","30","40","50"];this.s_a=["00","10","20","30","40","50"];this.parseSubHtml=function(n){for(var i="",t=0;t<n.length;t++)i+='<a href="javascript:void(0);" class="om-cal-item">'+n[t]+"<\/a>";return i+'<a href="javascript:void(0);" class="x">x<\/a>'};this.showPopup=function(n){var t=this,r,i;t.popupannel.html(n);t.popupannel.removeClass("hidden");r=t.status;i="om-state-active om-state-nobd";t.ctime.find("span").removeClass(i);switch(r){case"h":t.ctime.find(".h").addClass(i);break;case"m":t.ctime.find(".m").addClass(i);break;case"s":t.ctime.find(".s").addClass(i)}};this.hidePopup=function(){this.popupannel.addClass("hidden")};this._render=function(){var n=this,t=n.get("h"),i=n.get("m"),r=n.get("s");return n.father._time=n.time,n.ctime.find(".h").html(t),n.ctime.find(".m").html(i),n.ctime.find(".s").html(r),n};this.set=function(n,t){var i=this;t=Number(t);switch(n){case"h":i.time.setHours(t);break;case"m":i.time.setMinutes(t);break;case"s":i.time.setSeconds(t)}i._render()};this.get=function(n){var t=this.time;switch(n){case"h":return t.getHours();case"m":return t.getMinutes();case"s":return t.getSeconds()}};this.add=function(){var n=this,t=n.status,i=n.get(t);i++;n.set(t,i)};this.minus=function(){var n=this,t=n.status,i=n.get(t);i--;n.set(t,i)};this._timeInit=function(){var i=this;t.html("").append(i.ctime);t.append(i.button);i._render();i.popupannel.bind("click",function(t){var r=n(t.target),u;r.hasClass("x")?i.hidePopup():r.hasClass("om-cal-item")&&(u=Number(r.html()),i.set(i.status,u),i.hidePopup())});i.button.bind("click",function(t){var u=i.father.options,r=typeof i.father.dt_date=="undefined"?u.date:i.father.dt_date,f;r.setHours(i.get("h"));r.setMinutes(i.get("m"));r.setSeconds(i.get("s"));i.father._trigger("onSelect",t,r);u.popup&&(f=n.omCalendar.formatDate(r,u.dateFormat||i.father._defaultFormat),n(i.father.element).val(f),i.father.hide())});i.ctime.bind("keyup",function(t){(t.keyCode==n.om.keyCode.UP||t.keyCode==n.om.keyCode.LEFT)&&(t.preventDefault(),i.add());(t.keyCode==n.om.keyCode.DOWN||t.keyCode==n.om.keyCode.RIGHT)&&(t.preventDefault(),i.minus())});i.ctime.find(".u").bind("click",function(){i.hidePopup();i.add()});i.ctime.find(".d").bind("click",function(){i.hidePopup();i.minus()});i.ctime.find(".h").bind("click",function(){var n=i.parseSubHtml(i.h_a);i.status="h";i.showPopup(n)});i.ctime.find(".m").bind("click",function(){var n=i.parseSubHtml(i.m_a);i.status="m";i.showPopup(n)});i.ctime.find(".s").bind("click",function(){var n=i.parseSubHtml(i.s_a);i.status="s";i.showPopup(n)})};this._timeInit()}});n.omCalendar=n.omCalendar||{};n.extend(n.omCalendar,{leftPad:function(n,t,i){var r=new String(n);for(i||(i=" ");r.length<t;)r=i+r;return r.toString()}});n.extend(n.omCalendar,{getShortDayName:function(t){return n.omCalendar.dayMaps[t][0]},getDayName:function(t){return n.omCalendar.dayMaps[t][1]},getShortMonthName:function(t){return n.omCalendar.monthMaps[t][0]},getMonthName:function(t){return n.omCalendar.monthMaps[t][1]},dayMaps:[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],monthMaps:[["Jan","January"],["Feb","February"],["Mar","March"],["Apr","April"],["May","May"],["Jun","June"],["Jul","July"],["Aug","August"],["Sep","September"],["Oct","October"],["Nov","November"],["Dec","December"]],formatCodes:{d:{g:"this.getDate()",s:"this.setDate({param})",r:"(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])"},dd:{g:"$.omCalendar.leftPad(this.getDate(), 2, '0')",s:"this.setDate(parseInt('{param}', 10))",r:"(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])"},m:{g:"(this.getMonth() + 1)",s:"this.setMonth(parseInt('{param}', 10) - 1)",r:"(0[1-9]|1[0-2]|[1-9])"},mm:{g:"$.omCalendar.leftPad(this.getMonth() + 1, 2, '0')",s:"this.setMonth(parseInt('{param}', 10) - 1)",r:"(0[1-9]|1[0-2]|[1-9])"},y:{g:"('' + this.getFullYear()).substring(2, 4)",s:"this.setFullYear(parseInt('20{param}', 10))",r:"(\\d{2})"},yy:{g:"this.getFullYear()",s:"this.setFullYear(parseInt('{param}', 10))",r:"(\\d{4})"},h:{g:"$.omCalendar.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",s:"this.setHours(parseInt('{param}', 10))",r:"(0[0-9]|1[0-1])"},H:{g:"$.omCalendar.leftPad(this.getHours(), 2, '0')",s:"this.setHours(parseInt('{param}', 10))",r:"([0-1][0-9]|2[0-3])"},g:{g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",s:"this.setHours(parseInt('{param}', 10))",r:"([0-9]|1[0-1])"},G:{g:"this.getHours()",s:"this.setHours(parseInt('{param}', 10))",r:"([0-9]|1[0-9]|2[0-3])"},i:{g:"$.omCalendar.leftPad(this.getMinutes(), 2, '0')",s:"this.setMinutes(parseInt('{param}', 10))",r:"([0-5][0-9])"},s:{g:"$.omCalendar.leftPad(this.getSeconds(), 2, '0')",s:"this.setSeconds(parseInt('{param}', 10))",r:"([0-5][0-9])"},u:{g:"$.omCalendar.leftPad(this.getMilliseconds(), 3, '0')",s:"this.setMilliseconds(parseInt('{param}', 10))",r:"(\\d{1,3})"},D:{g:"$.omCalendar.getShortDayName(this.getDay())",s:"",r:""},DD:{g:"$.omCalendar.getDayName(this.getDay())",s:"",r:""},M:{g:"$.omCalendar.getShortMonthName(this.getMonth())",s:"",r:""},MM:{g:"$.omCalendar.getMonthName(this.getMonth())",s:"",r:""},a:{g:"(this.getHours() < 12 ? 'am' : 'pm')",s:"",r:""},A:{g:"(this.getHours() < 12 ? 'AM' : 'PM')",s:"",r:""}}});n.extend(n.omCalendar,{formatDate:function(t,i){if(!t||!i||!(Object.prototype.toString.call(t)==="[object Date]"))return null;for(var r,e="",f=!1,u=0;u<i.length;u++){if(r=i.charAt(u),fi_next=i.charAt(u+1),r=="'"){f=!f;continue}!f&&n.omCalendar.formatCodes[r+fi_next]?(r=new Function("return "+n.omCalendar.formatCodes[r+fi_next].g).call(t),u++):!f&&n.omCalendar.formatCodes[r]&&(r=new Function("return "+n.omCalendar.formatCodes[r].g).call(t));e+=r}return e},parseDate:function(t,i){var s,r,u,f,e,o,h;if(!t||!i||!(Object.prototype.toString.call(t)==="[object String]"))return null;for(s=[],f=null,r=0;r<i.length;r++){if(u=i.charAt(r),fi_next=i.charAt(r+1),n.omCalendar.formatCodes[u+fi_next])f=n.omCalendar.formatCodes[u+fi_next],r++;else if(n.omCalendar.formatCodes[u])f=n.omCalendar.formatCodes[u];else continue;if((e=t.match(new RegExp(f.r)),!e)||(s.push(f.s.replace("{param}",e[0])),t=t.substring(e.index+e[0].length),o=i.charAt(r+1),!(o==""&&t=="")&&o!==t.charAt(0)&&n.omCalendar.formatCodes[o]===undefined))return null}return h=new Date,new Function(s.join(";")).call(h),h}});n.om.lang.omCalendar={year:"年",month:"月",Su:"日",Mo:"一",Tu:"二",We:"三",Th:"四",Fr:"五",Sa:"六",cancel:"取消",ok:"确定",time:"时间"}}(jQuery),function(n){Array.prototype.indexOf||(Array.prototype.indexOf=function(n){for(var i=this.length,t=0;t<i;t++)if(this[t]===n)return t;return-1});n.omWidget("om.omCombo",{options:{optionField:"text",valueField:"value",width:"auto",disabled:!1,readOnly:!1,editable:!0,lazyLoad:!1,listMaxHeight:300,listAutoWidth:!1,autoFilter:!0,filterStrategy:"first",filterDelay:500,forceSelection:!1,multi:!1,multiSeparator:","},_init:function(){var n=this.options,t=this.textInput,i=n.dataSource,r,u;n.inputField||(n.inputField=n.optionField);typeof n.value!="undefined"&&(n.lazyLoad=!1);n.width!="auto"&&(r=t.parent().width(n.width),t.width(r.innerWidth()-t.next().outerWidth()-t.outerWidth()+t.width()));n.multi&&(n.editable=this.options.editable=!1);this._refeshEmptyText(n.emptyText);n.disabled?t.attr("disabled",!0):t.removeAttr("disabled");n.readOnly||!n.editable?t.attr("readonly","readOnly"):t.removeAttr("readonly");n.lazyLoad?this.dataHasLoaded=!1:(this._toggleLoading("add"),i&&typeof i=="string"?this._ajaxLoad(i):i&&typeof i=="object"?(this._loadData(i),this._toggleLoading("remove")):(this.dataHasLoaded=!0,this._toggleLoading("remove")));u=n.disabled||n.readOnly;u?this.expandTrigger.addClass("om-state-disabled"):this._bindEvent()},_create:function(){var t=this.element,i=n('<span class="om-combo om-widget om-state-default"><\/span>').insertAfter(t).wrapInner(t);this.textInput=t.clone().removeAttr("id").removeAttr("name").appendTo(i);this.expandTrigger=n('<span class="om-combo-trigger"><\/span>').appendTo(i);t.hide();this.dropList=n(n('<div class="om-widget"><div class="om-widget-content om-droplist"><\/div><\/div>').css({position:"absolute",zIndex:2e3}).appendTo(document.body).children()[0]).hide()},setData:function(n){var t=this,i=t.textInput,r=t.element;t.options.value="";r.val("");i.val("");t._toggleLoading("add");typeof n=="string"?t._ajaxLoad(n):(t._loadData(n),t._toggleLoading("remove"))},getData:function(){var n=this.options.dataSource;return typeof n=="object"?n:null},value:function(n){if(typeof n=="undefined"){var t=this.element.val();return t?t:""}return this._setValue(n+""),this},disable:function(){var n=this.element;n.attr("disabled",!0).unbind();this.options.disabled=!0;this.expandTrigger.addClass("om-state-disabled").unbind()},enable:function(){var n=this.element;n.removeAttr("disabled").unbind();this.options.disabled=!1;this.expandTrigger.removeClass("om-state-disabled").unbind();this._bindEvent()},destroy:function(){var t=this.element;n(document).unbind("mousedown.omCombo",this.globalEvent);t.parent().after(t).remove();this.dropList.parent().remove()},_bindEvent:function(){var t=this,i=t.options,r=t.textInput,f=t.element,o=t.dropList,e=t.expandTrigger,h=i.emptyText,s=!1,u=r.parent("span");u.mouseenter(function(){i.disabled||u.addClass("om-state-hover")}).mouseleave(function(){u.removeClass("om-state-hover")}).mousedown(function(n){n.stopPropagation()});r.focus(function(){s||(s=!0,n(".om-droplist").hide(),u.addClass("om-state-focus"),t._refeshEmptyText(h),t.dataHasLoaded||e.hasClass("om-loading")||(t._toggleLoading("add"),typeof i.dataSource=="object"?(t._loadData(i.dataSource),t._toggleLoading("remove")):typeof i.dataSource=="string"?t._ajaxLoad(i.dataSource):(t.dataHasLoaded=!0,t._toggleLoading("remove"))),i.disabled||i.readOnly||t._showDropList())}).blur(function(){var o,a;if(s=!1,u.removeClass("om-state-focus"),r.removeClass("om-combo-focus"),!i.disabled&&!i.readOnly&&!i.multi){if(t.hasManualInput)if(t.hasManualInput=!1,o=r.val(),o!==""){var c=n.data(f,"allInputText"),l=n.data(f,"allValues"),e=c.indexOf(o);e>-1?t._setValue(l[e]):i.forceSelection?(a=f.val(),e=l.indexOf(a),e>-1?r.val(c[e]):r.val("")):f.val(r.val())}else f.val("");t._refeshEmptyText(h)}}).keyup(function(u){var e=u.keyCode,f=n.om.keyCode;switch(e){case f.DOWN:t._selectNext();break;case f.UP:t._selectPrev();break;case f.ENTER:t._backfill(t.dropList.find(".om-state-hover"));break;case f.ESCAPE:o.hide();break;case f.TAB:break;default:t.hasManualInput=!0;!i.disabled&&!i.readOnly&&i.editable&&i.autoFilter&&(window._omcomboFilterTimer&&clearTimeout(window._omcomboFilterTimer),window._omcomboFilterTimer=setTimeout(function(){n(document).attr("activeElement").id==r.attr("id")&&o.show();t._doFilter(r)},i.filterDelay))}});o.mousedown(function(n){n.stopPropagation()});e.click(function(){e.hasClass("om-loading")||r.focus()}).mousedown(function(){e.hasClass("om-loading")||u.addClass("om-state-active")}).mouseup(function(){e.hasClass("om-loading")||u.removeClass("om-state-active")});n(document).bind("mousedown.omCombo",this.globalEvent=function(){o.hide()})},_showDropList:function(){var u=this,i=u.options,y=u.textInput,v=u.element,t=u.dropList.scrollTop(0).css("height","auto"),l=null,e=v.val(),p=t.find(".om-combo-list-row"),w=u._getAllOptionsBeforeFiltered().removeClass("om-helper-hidden om-state-hover"),o,s,h,r,f,c,a;if(!(w.size()<=0)){if(p.removeClass("om-combo-selected"),e!==undefined&&e!=="")if(o=n.data(v,"allValues"),i.multi){for(s=e.split(i.multiSeparator),h=0;h<s.length;h++)r=o.indexOf(s[h]),r>-1&&n(t.find(".om-combo-list-row").get(r)).addClass("om-combo-selected");valueItem=s[0]}else r=o?o.indexOf(e):-1,r>-1&&(l=n(t.find(".om-combo-list-row").get(r)).addClass("om-combo-selected"));f=t.parent();c=y.parent();i.listAutoWidth?n.browser.msie&&n.browser.version=="7.0"&&!n.support.style?f.width(t.show().outerWidth()):f.width(t.outerWidth()):f.width(c.outerWidth());i.listMaxHeight!="auto"&&t.show().height()>i.listMaxHeight&&t.height(i.listMaxHeight).css("overflow-y","auto");a=c.offset();f.css({left:a.left,top:a.top+c.outerHeight()});t.show();l&&t.scrollTop(n(l).offset().top-t.offset().top)}},_toggleLoading:function(n){this.options.disabled||(n=="add"?this.expandTrigger.removeClass("om-icon-carat-1-s").addClass("om-loading"):n=="remove"&&this.expandTrigger.removeClass("om-loading").addClass("om-icon-carat-1-s"))},_ajaxLoad:function(t){var i=this,r=this.options;n.ajax({url:t,method:"POST",dataType:"json",success:function(n,t){i.dataHasLoaded=!0;var u=r.onSuccess;if(u&&i._trigger("onSuccess",null,n,t)===!1){r.dataSource=n;return}i._loadData(n);i._toggleLoading("remove")},error:function(n,u,f){if(i.dataHasLoaded=!0,r.onError)i._toggleLoading("remove"),i._trigger("onError",null,n,u,f);else{i._toggleLoading("remove");throw new Error('An error occurred while load records from URL "'+t+'",the error message is:'+f.message);}}})},_loadData:function(t){var i=this.options,h=this.element,u,f,e,o,r,c;if(i.dataSource=t,this.dataHasLoaded=!0,u=i.inputField,f=[],typeof u=="string"?n(t).each(function(){f.push(this[u])}):n(t).each(function(n){f.push(u(this,n))}),n.data(h,"allInputText",f),e=i.valueField,o=[],typeof e=="string"?n(t).each(function(){o.push(""+this[e])}):n(t).each(function(n){o.push(""+e(this,n))}),n.data(h,"allValues",o),r=this.dropList.empty(),i.listProvider)c=i.listProvider(r,t),c&&c.each(function(){n(this).addClass("om-combo-list-row")});else{var a=i.optionField,s="",l=this;typeof a=="string"?n(t).each(function(){s+=l._wrapText(this[i.optionField])}):n(t).each(function(n){s+=l._wrapText(i.optionField(this,n))});s&&(n(s).appendTo(r),r.show().css("height","auto"),i.listMaxHeight!="auto"&&r.height()>i.listMaxHeight&&r.height(i.listMaxHeight).css("overflow-y","auto"),r.hide(),h.parent().hasClass("om-state-hover")&&l._showDropList())}i.value&&this._setValue(""+i.value);this._bindEventsToList()},_bindEventsToList:function(){var t=this,i=t._getAllOptionsBeforeFiltered();i.hover(function(){i.removeClass("om-state-hover");n(this).addClass("om-state-hover")},function(){n(this).removeClass("om-state-hover")}).mousedown(function(){t._backfill(this)})},_wrapText:function(n){return'<div class="om-combo-list-row">'+n+"<\/div>"},_setValue:function(t){var o=this.textInput,r=this.element,h=!0,c=r.val(),i=this.options,e,s;t==c&&(h=!1);var l=n.data(r,"allValues"),u=[],f=[];for(i.multi?f=t.split(i.multiSeparator):f.push(t),e=0;e<f.length;e++)s=l?l.indexOf(f[e]):-1,s>-1?u.push(n.data(r,"allInputText")[s]):i.forceSelection?(r.val(""),t=""):u.push(t);r.val(t);i.multi?o.val(u.join(i.multiSeparator)):o.val(u.join(""));i.value=t;i.onValueChange&&h&&this._trigger("onValueChange",null,o,t,c);this._refeshEmptyText(i.emptyText)},_findHighlightItem:function(){var t=this.dropList,i=t.find(".om-state-hover"),n;return i.length>0?i:(n=t.find(".om-combo-selected"),n.length>0?n[0]:n)},_selectPrev:function(){var u=this._findHighlightItem(),i=this._getAllOptionsAfterFiltered(),t=i.index(u),f=n(i[t]),r;t===0?t=i.length:t==-1&&(t=i.length);r=n(i[t-1]);this._highLisghtAndScrollTo(f,r)},_selectNext:function(){var u=this.dropList,r;if(u.css("display")=="none"){this._showDropList();return}var t=this._getAllOptionsAfterFiltered(),i=t.index(this._findHighlightItem()),f=n(t[i]);i==t.length-1&&(i=-1);r=n(t[i+1]);this._highLisghtAndScrollTo(f,r)},_highLisghtAndScrollTo:function(n,t){var i=this.dropList;n.removeClass("om-state-hover");t.addClass("om-state-hover");t.position().top<=0?i.scrollTop(i.scrollTop()+t.position().top):t.position().top+t.outerHeight()>i.height()&&i.scrollTop(i.scrollTop()+t.position().top+t.outerHeight()-i.height())},_backfill:function(t){var e,o,i,s;if(t.length!==0){var r=this,c=r.element,u=r.dropList,h=r.options,f=h.multi;if(f?n(t).toggleClass("om-combo-selected").removeClass("om-state-hover"):(this._getAllOptionsBeforeFiltered().removeClass("om-combo-selected"),n(t).addClass("om-combo-selected")),u.css("display")!="none"){for(e=[],o=u.find(".om-combo-selected"),i=0;i<o.length;i++)s=n(o[i]).index(),s>-1&&e.push(n.data(c,"allValues")[s]);this._setValue(e.join(f?h.multiSeparator:""));f||u.hide()}}},_getAllOptionsBeforeFiltered:function(){return this.dropList.find(".om-combo-list-row")},_getAllOptionsAfterFiltered:function(){var n=this.dropList;return n.find(".om-combo-list-row").not(n.find(".om-helper-hidden"))},_doFilter:function(){var t=this,u=t.textInput,f=t.element,i=t.options,r;records=i.dataSource;filterStrategy=i.filterStrategy;text=u.val();needShow=!1;items=t._getAllOptionsBeforeFiltered();allInputText=n.data(f,"allInputText");n(records).each(function(i){t._filetrPass(filterStrategy,text,records[i],allInputText[i])?(n(items.get(i)).removeClass("om-helper-hidden"),needShow=!0):n(items.get(i)).addClass("om-helper-hidden")});r=this.dropList.css("height","auto");i.listMaxHeight!="auto"&&r.height()>i.listMaxHeight&&r.height(i.listMaxHeight).css("overflow-y","auto");needShow||r.hide()},_filetrPass:function(n,t,i,r){if(t==="")return!0;if(typeof n=="function")return n(t,i);if(n==="first")return r.indexOf(t)===0;if(n==="anywhere")return r.indexOf(t)>-1;if(n==="last"){var u=r.lastIndexOf(t);return u>-1&&u+t.length==r.length}return!1},_refeshEmptyText:function(n){var t=this.textInput;n&&(t.val()===""?t.val(n).addClass("om-empty-text"):(t.val()===n&&t.val(""),t.removeClass("om-empty-text")))}})}(jQuery),function(n,t){var i="om-dialog om-widget om-widget-content om-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},u={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},f=n.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};n.omWidget("om.omDialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var i=n(this).css(t).offset().top;i<0&&n(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){var t;this.originalTitle=this.element.attr("title");typeof this.originalTitle!="string"&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;t=this;t.element.parent().bind("om-remove.omDialog",t.__removeBind=function(){t.element.remove()});var r=t.options,s=r.title||"&#160;",o=n.om.omDialog.getTitleId(t.element),e=(t.uiDialog=n("<div><\/div>")).appendTo(document.body).hide().addClass(i+r.dialogClass).css({zIndex:r.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){r.closeOnEscape&&i.keyCode&&i.keyCode===n.om.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}).attr({role:"dialog","aria-labelledby":o}).mousedown(function(n){t.moveToTop(!1,n)}),h=t.element.show().removeAttr("title").addClass("om-dialog-content om-widget-content").appendTo(e),f=(t.uiDialogTitlebar=n("<div><\/div>")).addClass("om-dialog-titlebar om-widget-header om-corner-all om-helper-clearfix").prependTo(e),u=n('<a href="#"><\/a>').addClass("om-dialog-titlebar-close om-corner-tr").attr("role","button").hover(function(){u.addClass("om-state-hover")},function(){u.removeClass("om-state-hover")}).focus(function(){u.addClass("om-state-focus")}).blur(function(){u.removeClass("om-state-focus")}).click(function(n){return t.close(n),!1}).appendTo(f),c=(t.uiDialogTitlebarCloseText=n("<span><\/span>")).addClass("om-icon-closethick").text(r.closeText).appendTo(u),l=n("<span><\/span>").addClass("om-dialog-title").attr("id",o).html(s).prependTo(f);f.find("*").add(f).disableSelection();r.draggable&&n.om.omDraggable&&t._makeDraggable();r.resizable&&n.fn.omResizable&&t._makeResizable();t._createButtons(r.buttons);t._isOpen=!1;n.fn.bgiframe&&e.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var n=this;return n.overlay&&n.overlay.destroy(),n.uiDialog.hide(),n.element.unbind(".dialog").removeData("dialog").removeClass("om-dialog-content om-widget-content").hide().appendTo("body"),n.uiDialog.remove(),n.originalTitle&&n.element.attr("title",n.originalTitle),n},widget:function(){return this.uiDialog},close:function(t){var i=this,r,u,f=this.options,o=f.onBeforeClose,e=f.onClose;if(!o||!1!==i._trigger("onBeforeClose",t))return i.overlay&&i.overlay.destroy(),i.uiDialog.unbind("keypress.om-dialog"),i._isOpen=!1,i.options.hide?i.uiDialog.hide(i.options.hide,function(){e&&i._trigger("onClose",t)}):(i.uiDialog.hide(),e&&i._trigger("onClose",t)),n.om.omDialog.overlay.resize(),i.options.modal&&(r=0,n(".om-dialog").each(function(){this!==i.uiDialog[0]&&(u=n(this).css("z-index"),isNaN(u)||(r=Math.max(r,u)))}),n.om.omDialog.maxZ=r),i},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var r=this,u=r.options,f;return u.modal&&!t||!u.stack&&!u.modal?r._trigger("onFocus",i):(u.zIndex>n.om.omDialog.maxZ&&(n.om.omDialog.maxZ=u.zIndex),r.overlay&&(n.om.omDialog.maxZ+=1,r.overlay.$el.css("z-index",n.om.omDialog.overlay.maxZ=n.om.omDialog.maxZ)),f={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},n.om.omDialog.maxZ+=1,r.uiDialog.css("z-index",n.om.omDialog.maxZ),r.element.attr(f),r._trigger("onFocus",i),r)},open:function(){var u;if(!this._isOpen){var t=this,i=t.options,r=t.uiDialog;return t.overlay=i.modal?new n.om.omDialog.overlay(t):null,t._size(),t._position(i.position),r.show(i.show),t.moveToTop(!0),i.modal&&r.bind("keypress.om-dialog",function(t){if(t.keyCode===n.om.keyCode.TAB){var i=n(":tabbable",this),r=i.filter(":first"),u=i.filter(":last");if(t.target!==u[0]||t.shiftKey){if(t.target===r[0]&&t.shiftKey)return u.focus(1),!1}else return r.focus(1),!1}}),n(t.element.find(":tabbable").get().concat(r.find(".om-dialog-buttonpane :tabbable").get().concat(r.get()))).eq(0).focus(),t._isOpen=!0,u=i.onOpen,u&&t._trigger("onOpen"),t}},_createButtons:function(t){var i=this,r=!1,u=n("<div><\/div>").addClass("om-dialog-buttonpane om-helper-clearfix"),e=n("<div><\/div>").addClass("om-dialog-buttonset").appendTo(u);i.uiDialog.find(".om-dialog-buttonpane").remove();typeof t=="object"&&t!==null&&n.each(t,function(){return!(r=!0)});r&&(n.each(t,function(t,r){r=n.isFunction(r)?{click:r,text:t}:r;var u=n('<button type="button"><\/button>').click(function(){r.click.apply(i.element[0],arguments)}).appendTo(e);n.each(r,function(n,t){n!=="click"&&(n in f?u[n](t):u.attr(n,t))});n.fn.omButton&&u.omButton()}),u.appendTo(i.uiDialog))},_makeDraggable:function(){function i(n){return{position:n.position,offset:n.offset}}var t=this,r=t.options,u=n(document),f=0;t.uiDialog.omDraggable({cancel:".om-dialog-content, .om-dialog-titlebar-close",handle:".om-dialog-titlebar",containment:"document",cursor:"move",onStart:function(u,e){f=r.height==="auto"?"auto":n(this).height();n(this).height(n(this).height()).addClass("om-dialog-dragging");t._trigger("onDragStart",i(u),e)},onDrag:function(n,r){t._trigger("onDrag",i(n),r)},onStop:function(e,o){r.position=[e.position.left-u.scrollLeft(),e.position.top-u.scrollTop()];n(this).removeClass("om-dialog-dragging").height(f);t._trigger("onDragStop",i(e),o);n.om.omDialog.overlay.resize()}})},_makeResizable:function(i){function f(n){return{originalPosition:n.originalPosition,originalSize:n.originalSize,position:n.position,size:n.size}}i=i===t?this.options.resizable:i;var r=this,u=r.options,e=r.uiDialog.css("position"),o=typeof i=="string"?i:"n,e,s,w,se,sw,ne,nw";r.uiDialog.omResizable({cancel:".om-dialog-content",containment:"document",alsoResize:r.element,maxWidth:u.maxWidth,maxHeight:u.maxHeight,minWidth:u.minWidth,minHeight:r._minHeight(),handles:o,start:function(t,i){n(this).addClass("om-dialog-resizing");r._trigger("onResizeStart",t,f(i))},resize:function(n,t){r._trigger("onResize",n,f(t))},stop:function(t,i){n(this).removeClass("om-dialog-resizing");u.height=n(this).height();u.width=n(this).width();r._trigger("onResizeStop",t,f(i));n.om.omDialog.overlay.resize()}}).css("position",e).find(".om-resizable-se").addClass("om-icon om-icon-grip-diagonal-se")},_minHeight:function(){var n=this.options;return n.height==="auto"?n.minHeight:Math.min(n.minHeight,n.height)},_position:function(t){var i=[],u=[0,0],r;t?((typeof t=="string"||typeof t=="object"&&"0"in t)&&(i=t.split?t.split(" "):[t[0],t[1]],i.length===1&&(i[1]=i[0]),n.each(["left","top"],function(n,t){+i[n]===i[n]&&(u[n]=i[n],i[n]=t)}),t={my:i.join(" "),at:i.join(" "),offset:u.join(" ")}),t=n.extend({},n.om.omDialog.prototype.options.position,t)):t=n.om.omDialog.prototype.options.position;r=this.uiDialog.is(":visible");r||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(n.extend({of:window},t));r||this.uiDialog.hide()},_setOptions:function(t){var e=this,i={},f=!1;n.each(t,function(n,t){e._setOption(n,t);n in r&&(f=!0);n in u&&(i[n]=t)});f&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.omResizable("option",i)},_setOption:function(t,r){var u=this,f=u.uiDialog,o,e;switch(t){case"buttons":u._createButtons(r);break;case"closeText":u.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":f.removeClass(u.options.dialogClass).addClass(i+r);break;case"disabled":r?f.addClass("om-dialog-disabled"):f.removeClass("om-dialog-disabled");break;case"draggable":o=f.is(":data(draggable)");o&&!r&&f.omDraggable("destroy");!o&&r&&u._makeDraggable();break;case"position":u._position(r);break;case"resizable":e=f.is(":data(resizable)");e&&!r&&f.omResizable("destroy");e&&typeof r=="string"&&f.omResizable("option","handles",r);e||r===!1||u._makeResizable(r);break;case"title":n(".om-dialog-title",u.uiDialogTitlebar).html(""+(r||"&#160;"))}n.OMWidget.prototype._setOption.apply(u,arguments)},_size:function(){var t=this.options,i,r,f=this.uiDialog.is(":visible"),u;this.element.show().css({width:"auto",minHeight:0,height:0});t.minWidth>t.width&&(t.width=t.minWidth);i=this.uiDialog.css({height:"auto",width:t.width}).height();r=Math.max(0,t.minHeight-i);t.height==="auto"?n.support.minHeight?this.element.css({minHeight:r,height:"auto"}):(this.uiDialog.show(),u=this.element.css("height","auto").height(),f||this.uiDialog.hide(),this.element.height(Math.max(u,r))):this.element.height(Math.max(t.height-i,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.omResizable("option","minHeight",this._minHeight())}});n.extend(n.om.omDialog,{version:"2.1",uuid:0,maxZ:0,getTitleId:function(n){var t=n.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=n.om.omDialog.overlay.create(t)}});n.extend(n.om.omDialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:n.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(n){return n+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){n.om.omDialog.overlay.instances.length&&n(document).bind(n.om.omDialog.overlay.events,function(t){if(n(t.target).zIndex()<n.om.omDialog.overlay.maxZ)return!1})},1),n(document).bind("keydown.dialog-overlay",function(i){t.options.closeOnEscape&&i.keyCode&&i.keyCode===n.om.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}),n(window).bind("resize.dialog-overlay",n.om.omDialog.overlay.resize));var i=(this.oldInstances.pop()||n("<div><\/div>").addClass("om-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return n.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var r,i;t.parent().unbind(this.__removeBind);r=n.inArray(t,this.instances);r!=-1&&this.oldInstances.push(this.instances.splice(r,1)[0]);this.instances.length===0&&n([document,window]).unbind(".dialog-overlay");t.remove();i=0;n.each(this.instances,function(){i=Math.max(i,this.css("z-index"))});this.maxZ=i},height:function(){var t,i;return n.browser.msie&&n.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<i?n(window).height()+"px":t+"px"):n(document).height()+"px"},width:function(){var t,i;return n.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<i?n(window).width()+"px":t+"px"):n(document).width()+"px"},resize:function(){var t=n([]);n.each(n.om.omDialog.overlay.instances,function(){t=t.add(this)});t.css({width:0,height:0}).css({width:n.om.omDialog.overlay.width(),height:n.om.omDialog.overlay.height()})}});n.extend(n.om.omDialog.overlay.prototype,{destroy:function(){n.om.omDialog.overlay.destroy(this.$el)}})}(jQuery);var swfobject=function(){function v(){var i,r,n;if(!c){try{i=t.getElementsByTagName("body")[0].appendChild(h("span"));i.parentNode.removeChild(i)}catch(u){return}for(c=!0,r=w.length,n=0;n<r;n++)w[n]()}}function yt(n){c?n():w[w.length]=n}function pt(n){if(typeof r.addEventListener!=i)r.addEventListener("load",n,!1);else if(typeof t.addEventListener!=i)t.addEventListener("load",n,!1);else if(typeof r.attachEvent!=i)ui(r,"onload",n);else if(typeof r.onload=="function"){var u=r.onload;r.onload=function(){u();n()}}else r.onload=n}function gt(){lt?ni():it()}function ni(){var o=t.getElementsByTagName("body")[0],u=h(f),r,e;u.setAttribute("type",p);r=o.appendChild(u);r?(e=0,function(){if(typeof r.GetVariable!=i){var t=r.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),n.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(e<10){e++;setTimeout(arguments.callee,10);return}o.removeChild(u);r=null;it()}()):it()}function it(){var y=s.length,r,t,h,c,v;if(y>0)for(r=0;r<y;r++){var f=s[r].id,e=s[r].callbackFn,o={success:!1,id:f};if(n.pv[0]>0){if(t=u(f),t)if(!g(s[r].swfVersion)||n.wk&&n.wk<312)if(s[r].expressInstall&&ut()){h={};h.data=s[r].expressInstall;h.width=t.getAttribute("width")||"0";h.height=t.getAttribute("height")||"0";t.getAttribute("class")&&(h.styleclass=t.getAttribute("class"));t.getAttribute("align")&&(h.align=t.getAttribute("align"));var p={},a=t.getElementsByTagName("param"),w=a.length;for(c=0;c<w;c++)a[c].getAttribute("name").toLowerCase()!="movie"&&(p[a[c].getAttribute("name")]=a[c].getAttribute("value"));ft(h,p,f,e)}else ti(t),e&&e(o);else l(f,!0),e&&(o.success=!0,o.ref=rt(f),e(o))}else l(f,!0),e&&(v=rt(f),v&&typeof v.SetVariable!=i&&(o.success=!0,o.ref=v),e(o))}}function rt(n){var r=null,t=u(n),e;return t&&t.nodeName=="OBJECT"&&(typeof t.SetVariable!=i?r=t:(e=t.getElementsByTagName(f)[0],e&&(r=e))),r}function ut(){return!d&&g("6.0.65")&&(n.win||n.mac)&&!(n.wk&&n.wk<312)}function ft(f,e,o,s){var c,v,l,a;d=!0;nt=s||null;at={success:!1,id:o};c=u(o);c&&(c.nodeName=="OBJECT"?(y=et(c),k=null):(y=c,k=o),f.id=ht,(typeof f.width==i||!/%$/.test(f.width)&&parseInt(f.width,10)<310)&&(f.width="310"),(typeof f.height==i||!/%$/.test(f.height)&&parseInt(f.height,10)<137)&&(f.height="137"),t.title=t.title.slice(0,47)+" - Flash Player Installation",v=n.ie&&n.win?"ActiveX":"PlugIn",l="MMredirectURL="+r.location.toString().replace(/&/g,"%26")+"&MMplayerType="+v+"&MMdoctitle="+t.title,typeof e.flashvars!=i?e.flashvars+="&"+l:e.flashvars=l,n.ie&&n.win&&c.readyState!=4&&(a=h("div"),o+="SWFObjectNew",a.setAttribute("id",o),c.parentNode.insertBefore(a,c),c.style.display="none",function(){c.readyState==4?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)}()),ot(f,e,o))}function ti(t){if(n.ie&&n.win&&t.readyState!=4){var i=h("div");t.parentNode.insertBefore(i,t);i.parentNode.replaceChild(et(t),i);t.style.display="none",function(){t.readyState==4?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(et(t),t)}function et(t){var u=h("div"),e,i,o,r;if(n.win&&n.ie)u.innerHTML=t.innerHTML;else if(e=t.getElementsByTagName(f)[0],e&&(i=e.childNodes,i))for(o=i.length,r=0;r<o;r++)i[r].nodeType==1&&i[r].nodeName=="PARAM"||i[r].nodeType==8||u.appendChild(i[r].cloneNode(!0));return u}function ot(t,r,e){var v,y=u(e),w,o,k,a,c,s,l;if(n.wk&&n.wk<312)return v;if(y)if(typeof t.id==i&&(t.id=e),n.ie&&n.win){w="";for(o in t)t[o]!=Object.prototype[o]&&(o.toLowerCase()=="data"?r.movie=t[o]:o.toLowerCase()=="styleclass"?w+=' class="'+t[o]+'"':o.toLowerCase()!="classid"&&(w+=" "+o+'="'+t[o]+'"'));k="";for(a in r)r[a]!=Object.prototype[a]&&(k+='<param name="'+a+'" value="'+r[a]+'" />');y.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+w+">"+k+"<\/object>";b[b.length]=t.id;v=u(t.id)}else{c=h(f);c.setAttribute("type",p);for(s in t)t[s]!=Object.prototype[s]&&(s.toLowerCase()=="styleclass"?c.setAttribute("class",t[s]):s.toLowerCase()!="classid"&&c.setAttribute(s,t[s]));for(l in r)r[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"&&ii(c,l,r[l]);y.parentNode.replaceChild(c,y);v=c}return v}function ii(n,t,i){var r=h("param");r.setAttribute("name",t);r.setAttribute("value",i);n.appendChild(r)}function wt(t){var i=u(t);i&&i.nodeName=="OBJECT"&&(n.ie&&n.win?(i.style.display="none",function(){i.readyState==4?ri(t):setTimeout(arguments.callee,10)}()):i.parentNode.removeChild(i))}function ri(n){var t=u(n),i;if(t){for(i in t)typeof t[i]=="function"&&(t[i]=null);t.parentNode.removeChild(t)}}function u(n){var i=null;try{i=t.getElementById(n)}catch(r){}return i}function h(n){return t.createElement(n)}function ui(n,t,i){n.attachEvent(t,i);a[a.length]=[n,t,i]}function g(t){var r=n.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,r[0]>i[0]||r[0]==i[0]&&r[1]>i[1]||r[0]==i[0]&&r[1]==i[1]&&r[2]>=i[2]?!0:!1}function bt(r,u,o,s){var a,c,l;n.ie&&n.mac||(a=t.getElementsByTagName("head")[0],a)&&(c=o&&typeof o=="string"?o:"screen",s&&(e=null,tt=null),e&&tt==c||(l=h("style"),l.setAttribute("type","text/css"),l.setAttribute("media",c),e=a.appendChild(l),n.ie&&n.win&&typeof t.styleSheets!=i&&t.styleSheets.length>0&&(e=t.styleSheets[t.styleSheets.length-1]),tt=c),n.ie&&n.win?e&&typeof e.addRule==f&&e.addRule(r,u):e&&typeof t.createTextNode!=i&&e.appendChild(t.createTextNode(r+" {"+u+"}")))}function l(n,t){if(vt){var i=t?"visible":"hidden";c&&u(n)?u(n).style.visibility=i:bt("#"+n,"visibility:"+i)}}function kt(n){var t=/[\\\"<>\.;]/.exec(n)!=null;return t&&typeof encodeURIComponent!=i?encodeURIComponent(n):n}var i="undefined",f="object",st="Shockwave Flash",dt="ShockwaveFlash.ShockwaveFlash",p="application/x-shockwave-flash",ht="SWFObjectExprInst",ct="onreadystatechange",r=window,t=document,o=navigator,lt=!1,w=[gt],s=[],b=[],a=[],y,k,nt,at,c=!1,d=!1,e,tt,vt=!0,n=function(){var l=typeof t.getElementById!=i&&typeof t.getElementsByTagName!=i&&typeof t.createElement!=i,e=o.userAgent.toLowerCase(),s=o.platform.toLowerCase(),a=s?/win/.test(s):/win/.test(e),v=s?/mac/.test(s):/mac/.test(e),y=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,h=!+"\v1",u=[0,0,0],n=null,c;if(typeof o.plugins!=i&&typeof o.plugins[st]==f)n=o.plugins[st].description,!n||typeof o.mimeTypes!=i&&o.mimeTypes[p]&&!o.mimeTypes[p].enabledPlugin||(lt=!0,h=!1,n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof r.ActiveXObject!=i)try{c=new ActiveXObject(dt);c&&(n=c.GetVariable("$version"),n&&(h=!0,n=n.split(" ")[1].split(","),u=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(w){}return{w3:l,pv:u,wk:y,ie:h,win:a,mac:v}}(),fi=function(){n.w3&&((typeof t.readyState!=i&&t.readyState=="complete"||typeof t.readyState==i&&(t.getElementsByTagName("body")[0]||t.body))&&v(),c||(typeof t.addEventListener!=i&&t.addEventListener("DOMContentLoaded",v,!1),n.ie&&n.win&&(t.attachEvent(ct,function(){t.readyState=="complete"&&(t.detachEvent(ct,arguments.callee),v())}),r==top&&function(){if(!c){try{t.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}v()}}()),n.wk&&function(){if(!c){if(!/loaded|complete/.test(t.readyState)){setTimeout(arguments.callee,0);return}v()}}(),pt(v)))}(),ei=function(){n.ie&&n.win&&window.attachEvent("onunload",function(){for(var r,i,u,f,e=a.length,t=0;t<e;t++)a[t][0].detachEvent(a[t][1],a[t][2]);for(r=b.length,i=0;i<r;i++)wt(b[i]);for(u in n)n[u]=null;n=null;for(f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(t,i,r,u){if(n.w3&&t&&i){var f={};f.id=t;f.swfVersion=i;f.expressInstall=r;f.callbackFn=u;s[s.length]=f;l(t,!1)}else u&&u({success:!1,id:t})},getObjectById:function(t){if(n.w3)return rt(t)},embedSWF:function(t,r,u,e,o,s,h,c,a,v){var y={success:!1,id:r};n.w3&&!(n.wk&&n.wk<312)&&t&&r&&u&&e&&o?(l(r,!1),yt(function(){var n,b,p,k,w,d;if(u+="",e+="",n={},a&&typeof a===f)for(b in a)n[b]=a[b];if(n.data=t,n.width=u,n.height=e,p={},c&&typeof c===f)for(k in c)p[k]=c[k];if(h&&typeof h===f)for(w in h)typeof p.flashvars!=i?p.flashvars+="&"+w+"="+h[w]:p.flashvars=w+"="+h[w];if(g(o))d=ot(n,p,r),n.id==r&&l(r,!0),y.success=!0,y.ref=d;else{if(s&&ut()){n.data=s;ft(n,p,r,v);return}l(r,!0)}v&&v(y)})):v&&v(y)},switchOffAutoHideShow:function(){vt=!1},ua:n,getFlashPlayerVersion:function(){return{major:n.pv[0],minor:n.pv[1],release:n.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(t,i,r){return n.w3?ot(t,i,r):undefined},showExpressInstall:function(t,i,r,u){n.w3&&ut()&&ft(t,i,r,u)},removeSWF:function(t){n.w3&&wt(t)},createCSS:function(t,i,r,u){n.w3&&bt(t,i,r,u)},addDomLoadEvent:yt,addLoadEvent:pt,getQueryParamValue:function(n){var r=t.location.search||t.location.hash,u,i;if(r){if(/\?/.test(r)&&(r=r.split("?")[1]),n==null)return kt(r);for(u=r.split("&"),i=0;i<u.length;i++)if(u[i].substring(0,u[i].indexOf("="))==n)return kt(u[i].substring(u[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(d){var t=u(ht);t&&y&&(t.parentNode.replaceChild(y,t),k&&(l(k,!0),n.ie&&n.win&&(y.style.display="block")),nt&&nt(at));d=!1}}}}();(function(n){function t(t,i){var r=t+"Queue",f=n("#"+r+" .om-fileupload-queueitem").length,u;return i==null||isNaN(i)||i<0||i>=f?!1:(u=n("#"+r+" .om-fileupload-queueitem:eq("+i+")"),u.attr("id").replace(t,""))}n.omWidget("om.omFileUpload",{options:{swf:"/operamasks-ui/ui/om-fileupload.swf",action:"",actionData:{},height:30,width:120,buttonImg:null,multi:!1,autoUpload:!1,fileDataName:"Filedata",method:"POST",queueSizeLimit:999,removeCompleted:!0,fileExt:"*.*",fileDesc:null,sizeLimit:null,onSelect:function(){},onQueueFull:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},upload:function(n){var i=this.element,u=i.attr("id"),r=null,e=i.attr("id")+"Queue",f=i.attr("id")+"Uploader";(typeof n=="undefined"||(r=t(u,n))!==!1)&&document.getElementById(f).startFileUpload(r,!1)},cancel:function(n){var i=this.element,f=i.attr("id"),r=null,e=i.attr("id")+"Queue",u=i.attr("id")+"Uploader";if(typeof n!="undefined"){if(isNaN(n))r=n;else if((r=t(i.attr("id"),n))===!1)return;document.getElementById(u).cancelFileUpload(r,!0,!0,!1)}else document.getElementById(u).clearFileUploadQueue(!1)},_setOption:function(t,i){var o=document.getElementById(this.element.attr("id")+"Uploader"),u,e,f,r,s;if(t=="actionData"){u="";for(e in i)u+="&"+e+"="+i[e];for(f=document.cookie.split(";"),r=0;r<f.length;r++)f[r]!==""&&(u+="&"+f[r]);i=encodeURI(u.substr(1));o.updateSettings(t,i);return}s=["buttonImg","buttonText","fileDesc","fileExt","height","action","sizeLimit","width"];n.inArray(t,s)!=-1&&o.updateSettings(t,i)},_create:function(){var u=this,r=this.element,t=n.extend({},this.options),f,i,e,s,o,h,c;for(t.wmode="opaque",t.expressInstall=null,t.displayData="percentage",t.folder="",t.simUploadLimit=1,t.scriptAccess="sameDomain",t.queueID=!1,t.onInit=function(){},t.onSelectOnce=function(){},t.onClearQueue=function(){},t.id=this.element.attr("id"),n(r).data("settings",t),f=location.pathname,f=f.split("/"),f.pop(),f=f.join("/")+"/",i={},i.omFileUploadID=t.id,i.pagepath=f,t.buttonImg&&(i.buttonImg=escape(t.buttonImg)),i.buttonText=encodeURI(n.om.lang._get(t,"omFileUpload","buttonText")),t.rollover&&(i.rollover=!0),i.action=t.action,i.folder=escape(t.folder),e="",s=document.cookie.split(";"),o=0;o<s.length;o++)e+="&"+s[o];if(t.actionData)for(h in t.actionData)e+="&"+h+"="+t.actionData[h];i.actionData=escape(encodeURI(e.substr(1)));i.width=t.width;i.height=t.height;i.wmode=t.wmode;i.method=t.method;i.queueSizeLimit=t.queueSizeLimit;i.simUploadLimit=t.simUploadLimit;t.hideButton&&(i.hideButton=!0);t.fileDesc&&(i.fileDesc=t.fileDesc);t.fileExt&&(i.fileExt=t.fileExt);t.multi&&(i.multi=!0);t.autoUpload&&(i.autoUpload=!0);t.sizeLimit&&(i.sizeLimit=t.sizeLimit);t.checkScript&&(i.checkScript=t.checkScript);t.fileDataName&&(i.fileDataName=t.fileDataName);t.queueID&&(i.queueID=t.queueID);t.onInit()!==!1&&(r.css("display","none"),r.after('<div id="'+r.attr("id")+'Uploader"><\/div>'),swfobject.embedSWF(t.swf,t.id+"Uploader",t.width,t.height,"9.0.24",t.expressInstall,i,{quality:"high",wmode:t.wmode,allowScriptAccess:t.scriptAccess},{},function(n){typeof t.onSWFReady=="function"&&n.success&&t.onSWFReady()}),t.queueID==!1?n("#"+r.attr("id")+"Uploader").after('<div id="'+r.attr("id")+'Queue" class="om-fileupload-queue"><\/div>'):n("#"+t.queueID).addClass("om-fileupload-queue"));typeof t.onOpen=="function"&&r.bind("omFileUploadOpen",t.onOpen);r.bind("omFileUploadSelect",{action:t.onSelect,queueID:t.queueID},function(t,i,r){var f,o,e;u._trigger("onSelect",t,i,r)!==!1&&(f=Math.round(r.size/1024*100)*.01,o="KB",f>1e3&&(f=Math.round(f*.001*100)*.01,o="MB"),e=f.toString().split("."),f=e.length>1?e[0]+"."+e[1].substr(0,2):e[0],fileName=r.name.length>20?r.name.substr(0,20)+"...":r.name,queue="#"+n(this).attr("id")+"Queue",t.data.queueID&&(queue="#"+t.data.queueID),n(queue).append('<div id="'+n(this).attr("id")+i+'" class="om-fileupload-queueitem">                            <div class="cancel" onclick="$(\'#'+n(this).attr("id")+"').omFileUpload('cancel','"+i+'\')">                            <\/div>                            <span class="fileName">'+fileName+" ("+f+o+')<\/span><span class="percentage"><\/span>                            <div class="om-fileupload-progress">                                <div id="'+n(this).attr("id")+i+'ProgressBar" class="om-fileupload-progressbar"><!--Progress Bar--><\/div>                            <\/div>                        <\/div>'))});r.bind("omFileUploadSelectOnce",{action:t.onSelectOnce},function(i,r){u._trigger("onSelectOnce",i,r);t.autoUpload&&n(this).omFileUpload("upload")});r.bind("omFileUploadQueueFull",{action:t.onQueueFull},function(t,i){u._trigger("onQueueFull",t,i)!==!1&&alert(n.om.lang.omFileUpload.queueSizeLimitMsg+i+".")});r.bind("omFileUploadCancel",{action:t.onCancel},function(t,i,r,f,e,o){if(u._trigger("onCancel",t,i,r,f)!==!1&&e){var s=o==!0?0:250;n("#"+n(this).attr("id")+i).fadeOut(s,function(){n(this).remove()})}});r.bind("omFileUploadClearQueue",{action:t.onClearQueue},function(i,r){var f=t.queueID?t.queueID:n(this).attr("id")+"Queue";r&&n("#"+f).find(".om-fileupload-queueitem").remove();u._trigger("onClearQueue",i,r)!==!1&&n("#"+f).find(".om-fileupload-queueitem").each(function(){var t=n(".om-fileupload-queueitem").index(this);n(this).delay(t*100).fadeOut(250,function(){n(this).remove()})})});c=[];r.bind("omFileUploadError",{action:t.onError},function(t,i,r,f){if(u._trigger("onError",t,i,r,f)!==!1){var e=[i,r,f];c.push(e);n("#"+n(this).attr("id")+i).find(".percentage").text(" - "+f.type+" Error");n("#"+n(this).attr("id")+i).find(".om-fileupload-progress").hide();n("#"+n(this).attr("id")+i).addClass("om-fileupload-error")}});typeof t.onUpload=="function"&&r.bind("omFileUploadUpload",t.onUpload);r.bind("omFileUploadProgress",{action:t.onProgress,toDisplay:t.displayData},function(t,i,r,f){u._trigger("onProgress",t,i,r,f)!==!1&&(n("#"+n(this).attr("id")+i+"ProgressBar").animate({width:f.percentage+"%"},250,function(){f.percentage==100&&n(this).closest(".om-fileupload-progress").fadeOut(250,function(){n(this).remove()})}),t.data.toDisplay=="percentage"&&(displayData=" - "+f.percentage+"%"),t.data.toDisplay=="speed"&&(displayData=" - "+f.speed+"KB/s"),t.data.toDisplay==null&&(displayData=" "),n("#"+n(this).attr("id")+i).find(".percentage").text(displayData))});r.bind("omFileUploadComplete",{action:t.onComplete},function(i,r,f,e,o){u._trigger("onComplete",i,r,f,unescape(e),o)!==!1&&(n("#"+n(this).attr("id")+r).find(".percentage").text(" - Completed"),t.removeCompleted&&n("#"+n(i.target).attr("id")+r).fadeOut(250,function(){n(this).remove()}),n("#"+n(i.target).attr("id")+r).addClass("completed"))});typeof t.onAllComplete=="function"&&r.bind("omFileUploadAllComplete",{action:t.onAllComplete},function(n,t){u._trigger("onAllComplete",n,t)!==!1&&(c=[])})}});n.om.lang.omFileUpload={queueSizeLimitMsg:"文件上传队列已满，数量不能超过",buttonText:"选择文件"}})(jQuery),function(n){function t(n,t){for(var r=n._getColModel(),i=0,u=r.length;i<u;i++)if(r[i].name==t.name)return i}function i(n,t,i){var r=0;n.push(i.replace(/\$/g,function(){return t[r++]}))}function r(n){var t,v,f,y;n._colModel=[];var o=n._getColModel(),s=[],r=[],h=1,c=1,e,i,l,a=o.length;for(t=0;t<a;t++)s[t]=[];for(t=0,v=a;t<v;t++)for(e=o[t],f=0,y=e.length;f<y;f++)i=e[f],h=i.rowspan||1,c=i.colspan||1,l=u(s,t,h,c),i.name&&r.push({header:i,colIndex:l});for(r.sort(function(n,t){return n.colIndex-t.colIndex}),t=0;r[t]&&n._colModel.push(r[t++].header););}function u(n,t,i,r){for(var u=0,f,e;n[t][u]&&++u;);for(f=t;f<t+i;f++)for(e=u;e<u+r;e++)n[f][e]=!0;return u}n.omWidget.addBeforeInitListener("om.omGrid",function(){var u=this._getColModel();!n.isArray(u)||u.length<=0||!n.isArray(u[0])||(r(this),this.hDiv.addClass("hDiv-group-header"),n.extend(this,{_getColModel:function(){return this._colModel},_getHeaderCols:function(){var t=[],r=this.options,i=this.hDiv,u=i.find("th[axis^='col']");return n(u).each(function(){t.push(this)}),t.sort(function(n,t){return n.axis.slice(3)-t.axis.slice(3)}),r.singleSelect||t.unshift(i.find("th[axis='checkboxCol']")[0]),r.showIndex&&t.unshift(i.find("th[axis='indexCol']")[0]),r.rowDetailsProvider&&t.unshift(i.find("th[axis='expenderCol']")[0]),n(t)},_buildTableHead:function(){for(var o,k,v,c=this.options,y=c.colModel,p=0,w=-1,u=["<thead>"],b,r,l,a,e=0,f=y.length;e<f;e++){for(u.push("<tr>"),e==0&&(c.showIndex&&u.push("<th class='indexCol data-header-"+f+"' align='center' axis='indexCol' rowspan="+f+"><div class='indexheader' style='text-align:center;width:25px;' /><\/th>"),c.singleSelect||u.push("<th class='checkboxCol data-header-"+f+"' align='center' axis='checkboxCol' rowspan="+f+"><div class='checkboxheader' style='text-align:center;width:17px;'><span class='checkbox'/><\/div><\/th>")),l=y[e],o=0,k=l.length;o<k;o++){r=l[o];var s=r.width||60,d=r.align||"center",h=r.name;r.name&&s=="autoExpand"&&(s=0,w=t(this,r));v=r.wrap?"wrap":"";v+=(r.name?" data-header-":" group-header-")+(r.rowspan?r.rowspan:1);b=[v,r.align?"align="+r.align:"",h?"axis=col"+t(this,r):"",h?"abbr="+h:"",r.rowspan?"rowspan="+r.rowspan:"",r.colspan?"colspan="+r.colspan:"",r.wrap?"wrap":"",d,h?"width:"+s+"px":"",r.header];i(u,b,"<th class='$' $ $ $ $ $><div class='$' style='text-align:$; $'>$<\/div><\/th>");r.name&&(p+=s)}u.push("<\/tr>")}u.push("<\/thead>");n("table",this.hDiv).html(u.join(""));a=n("thead",this.hDiv);this._fixHeaderWidth(w,p);this.thead=a;a=null}}))})}(jQuery),function(n){function f(r){var e=n(this),c=r.element,o,l,a,y=r._getColModel(),f,u,v=r.options,h,s;t(r)&&(r._allEditMode||e.attr("_insert"))&&(r._triggered&&r._editView.editing&&i(e)==r._editView.rowId||r._rowAdding||(h=r._getTrs().index(e),s=r._getRowData(h),v.onBeforeEdit&&v.onBeforeEdit.call(r,h,s)===!1)||(w(r,e),o=r._editView.editRow,l=o.find(">.grid-edit-form"),a=c.parent().scrollLeft(),r._getHeaderCols().each(function(t){var tt=n(this).attr("axis"),p,b=e.find("td:eq("+t+")"),w,it,h,k,i,d,v,g,rt;if(tt.substring(0,3)=="col")it=tt.substring(3),p=y[it];else{n.isEmptyObject(r._editComps)&&o.css("padding-left",parseInt(o.css("padding-left"))+b.outerWidth());return}h=p.editor;r._triggered?w=p.editor.name||p.name:(!h||h&&(h.editable===!1||n.isFunction(h.editable)&&h.editable()===!1)?(k=h&&h.renderer,p.editor=h={},h.type="text",k&&(h.renderer=k,h.type="custom"),h.editable=!1):(h.type=h.type||"text",h.editable=!0,h.rules&&(r._validate=!0)),w=p.editor.name||p.name,h.options=h.options||{},r._editComps[w]={});f=r._editComps[w];u=(u=nt(r,e,p))==undefined?"":u;!r._triggered&&h.editable&&h.rules&&(r._errorHolders[w]=n("<div class='errorContainer' style='display:none'><\/div>").appendTo(c.parent()));i=f.instance;v=h.type;i||(d=n("<div style='position:absolute'><\/div>").css({left:b.position().left+a,top:3}).appendTo(l).addClass("grid-edit-wrapper"),i=f.instance=n("<input><\/input>").attr({name:w,id:w}).appendTo(d),"text"!=v&&"custom"!=v&&i[v](h.options),"omCalendar"==v||"omCombo"==v?(g=i.parent(),"omCalendar"==v?(i.val(u).width(b.outerWidth()-24),i.width(b.outerWidth(!0)-(g.outerWidth(!0)-i.width()))):(i.next("input").attr({id:i.prop("id"),name:i.prop("name")}),i.attr({id:"",name:""}),i.next("input").width(b.outerWidth(!0)-(g.outerWidth(!0)-i.next("input").width())))):("text"==v&&(i.addClass("grid-edit-text"),h.editable||i.attr("readonly","readonly").addClass("readonly-text")),"custom"==v&&(i=f.instance=d.html(h.renderer.call(r,u,s))),i.width(b.outerWidth(!0)-(i.outerWidth(!0)-i.width()))),f.model=p,f.type=v,f.id=p.name,"custom"!=v&&(rt="omCombo"==v?i.next():i,rt.blur(function(){var n=r._errorHolders[w];n&&n.hide()})));switch(v){case"omCalendar":i=i.val(u).omCalendar();break;case"omNumberField":i.val(u).trigger("blur");break;case"omCombo":i.omCombo("value",u);break;case"text":i.val(u);break;case"custom":i.html(h.renderer.call(r,u,s))}}),!r._triggered&&r._validate&&tt(r),r._validator&&r._validator.form(),r._triggered=!0))}function o(n){n._changeData={update:{},insert:{},"delete":{}}}function s(n){return!t(n)||!l(n)}function h(n){var t=n.element,i=t.parent(),u=n._editView,f=u.editBtn,e=u.editRow,r={};return r.top=e.height(),r.left=t.width()<i.width()?t.width()/2-f.width()/2:i.scrollLeft()+i.width()/2-f.width()/2,r}function y(){t(this)&&(o(this),p(this),this._triggered&&(e(this),this._editView.view.hide(),this._editView.editing=!1,this.hDiv.scrollLeft(0),this.element.parent().scrollLeft(0)))}function t(n){return!n._allEditMode||n._globalEditable}function p(n){var t=n.getData().rows;n._rowIdDataMap={};n._getTrs().each(function(r,u){n._rowIdDataMap[i(u)]=t[r]})}function e(t){t._validator&&(t._validator.resetForm(),n.each(t._errorHolders,function(n,t){t.empty().hide()}))}function l(t){var i=t._changeData;return!(n.isEmptyObject(i.update)&&n.isEmptyObject(i.insert)&&n.isEmptyObject(i["delete"]))}function w(t,r){var e=t.element,u=e.next(".grid-edit-view"),l=n(r).position(),a=e.parent().scrollTop(),v=t.options,f,y,o,s,p;u.length==0&&(u=n("<div class='grid-edit-view'><div class='body-wrapper'><div class='grid-edit-row'><form class='grid-edit-form'><\/form><\/div><div class='gird-edit-btn'><input type='button' class='ok' value='确定'/><input type='button' class='cancel' value='取消'/><\/div><\/div><\/div>").width(e.outerWidth()).insertAfter(e),f=u.find(".gird-edit-btn"),y=f.prev(".grid-edit-row"),t._editView={view:u,editRow:y,editBtn:f},o=h(t),f.css({left:o.left,top:o.top}),s=f.find("input.ok").omButton(),p=f.find("input.cancel").omButton(),s.click(function(){var n,i;(!t._validator||t._validator.form())&&(n=e.find("tr[_grid_row_id='"+t._editView.rowId+"']"),d(t,n),u.hide(),t._editView.editing=!1,s.blur(),t._rowAdding&&(t._refreshHeaderCheckBox(),t._rowAdding=!1),i=t._getTrs().index(n),v.onAfterEdit&&v.onAfterEdit.call(t,i,t._getRowData(i)))}),p.click(function(){t.cancelEdit(this)}));t._editView.rowId=i(r);t._editView.editing?u.animate({top:l.top+a},"fast"):(u.css({top:l.top+a}),t._editView.editing=!0,u.show(),t._colWidthResize&&(c(t),t._colWidthResize=!1))}function b(){if(t(this)&&this._triggered)if(this._editView.editing){this.element.parent().scrollLeft(0);var n=this;setTimeout(function(){c(n)},0)}else this._colWidthResize=!0}function c(t,i,r){var f=t.element,e=t._editView,c=e.view,l=f.parent().scrollLeft(),o=e.editBtn,s=!1,u;c.width(f.outerWidth());t._getHeaderCols().each(function(u,f){var h=n(f).attr("abbr"),e=n(f),o=i&&i.prop("abbr")===e.prop("abbr");(o&&(s=!0),!i||s)&&n.each(t._editComps,function(n,t){var u=t.instance,f=t.type,s;if(h==t.id){if(!o&&i)return u.closest("div.grid-edit-wrapper").css("left","+="+r),!1;o||u.closest("div.grid-edit-wrapper").width(e.outerWidth()).css("left",e.position().left+l);"omCalendar"==f||"omCombo"==f?(s=u.parent(),"omCalendar"==f?(u.width(e.outerWidth()-24),u.width(e.outerWidth(!0)-(s.outerWidth(!0)-u.width()))):u.next("input").width(e.outerWidth(!0)-(s.outerWidth(!0)-u.next("input").width()))):u.width(e.outerWidth(!0)-(u.outerWidth(!0)-u.width()))}})});u=h(t);i?o.animate({left:u.left,top:u.top},"fast"):o.css({left:u.left,top:u.top})}function k(n,i){if(!t(this)||!this._triggered||!this._editView.editing){this._colWidthResize=!0;return}c(this,n,i)}function d(t,u){var f=n(u),s=t._editComps,e=i(f),o=t._getTrs().index(f),h=t._getRowData(o);n.each(s,function(i,s){var v=s.model.name,l=g(t,f,s),y,p,c;f.attr("_insert")?t._changeData.insert[e][v]=l:(y=r(t,u)[v],c=t._changeData.update[e],String(l)===String(y)?(a(f,s.model,!1),c&&delete c[v],n.isEmptyObject(c)&&delete t._changeData.update[e]):(a(f,s.model,!0),c=t._changeData.update[e]=c||{},c[v]=l));p=s.model.renderer?s.model.renderer(l,h,o):l==undefined?"":l;f.find("td[abbr='"+v+"'] >div")[0].innerHTML=p})}function a(n,t,i){n.find("td[abbr='"+t.name+"']").toggleClass("grid-cell-dirty",i)}function i(t){return n(t).attr("_grid_row_id")}function g(n,t,i){var u,e=r(n,t),f=i.instance;switch(i.type){case"omCalendar":u=f.val();case"omNumberField":u=f.val();break;case"omCombo":u=f.omCombo("value");break;case"text":u=f.val();break;case"custom":if(i.model.editor.getValue)return i.model.editor.getValue.call(f,e,i.model.name)}return u}function nt(n,t,u){var o,f=u.name,e;return t.attr("_insert")?o=r(n,t)[f]:(e=n._changeData.update[i(t)],o=e&&e[f]!=null?e[f]:r(n,t)[f]),o}function r(t,r){var u=i(r);return n(r).attr("_insert")?t._changeData.insert[u]:t._rowIdDataMap[u]}function tt(t){var r=t._editView.editRow.find(">.grid-edit-form"),i={},u=i.rules={},f=i.messages={},e=t._getColModel();n.each(e,function(t,i){var r=i.editor.rules,h,c,o,e,l,s;if(r)for(h=u[i.editor.name||i.name]={},c=f[i.editor.name||i.name]={},r.length>0&&!n.isArray(r[0])&&(o=[],o.push(r),r=o),e=0,l=r.length;e<l;e++)s=r[e][0],h[s]=r[e][1]==undefined?!0:r[e][1],r[e][2]&&(c[s]=r[e][2])});n.extend(i,{onkeyup:function(n){this.element(n)},errorPlacement:function(){},showErrors:function(i,r){r&&r.length>0?n.each(r,function(i,r){var f=n(r.element),e=f.attr("name"),u=t._errorHolders[e];u&&(f.is(":focus")&&u.show(),u.html(r.message),v(t,f,u))}):n.each(this.currentElements,function(i,r){var u=t._errorHolders[n(r).attr("name")];u&&u.empty().hide()});var u=t._editView.editBtn.find("input.ok"),f=!0;n.each(t._errorHolders,function(n,t){if(!t.is(":empty"))return f=!1});f?u.omButton("enable"):u.omButton("disable");this.defaultShowErrors()}});t._validator=r.validate(i);n.each(t._editComps,function(i,r){var f=r.model.editor;if(f.editable&&f.rules){var e=f.name||r.model.name,u=t._errorHolders[e],o=r.type=="omCombo"?r.instance.next("input"):r.instance;o.mouseover(function(){if(u&&!u.is(":empty")){var i=n(this);u.show();v(t,i,u)}}).mouseout(function(){u&&u.hide()})}})}function v(n,t,i){var r=t.offset(),u=n.element.offset(),e=n.element.parent(),f=t.closest(".grid-edit-wrapper"),o=r.top-u.top+f.outerHeight();r.left-u.left-e.scrollLeft()+f.outerWidth()+i.outerWidth()>e.width()?i.css({left:r.left-u.left-i.outerWidth(),top:o}):i.css({left:r.left-u.left+f.outerWidth(),top:o})}var u=Object.prototype.hasOwnProperty;n.omWidget.addInitListener("om.omGrid",function(){var c=this,g=c.element,a=c.options,w=this._getColModel(),p,d,v;for(c._triggered=!1,c._globalEditable=!1,a.editMode=a.editMode||"all",c._allEditMode=a.editMode=="all",p=0,d=w.length;p<d;p++)if(c._globalEditable=w[p].editor?!0:!1,c._globalEditable)break;t(c)&&(c._editComps={},c._errorHolders={},c._colWidthResize,a._onRefreshCallbacks.push(y),a._onResizableStopCallbacks.push(k),a._onResizeCallbacks.push(b),this.tbody.delegate("tr.om-grid-row","dblclick",function(){f.call(this,c)}),this.tbody.delegate("tr.om-grid-row","click",function(){c._triggered&&c._editView.editing&&(c._validator?c._validator.valid()&&f.call(this,c):f.call(this,c))}),v=null,g.parent().scroll(function(){c._triggered&&(v&&clearTimeout(v),v=setTimeout(function(){var n=h(c);c._editView.editBtn.animate({left:n.left,top:n.top},c._editView.editing?"fast":0);v=null},300))}),n.extend(this,{cancelEdit:function(i){var r=this._editView,u=this.options;t(this)&&this._triggered&&(!this._triggered||r.editing)&&(r.view.hide(),r.editing=!1,this._rowAdding&&(this.deleteRow(this._getTrs().index(this.tbody.find("tr[_grid_row_id='"+c._editView.rowId+"']"))),this._rowAdding=!1),e(this),i&&n(i).blur(),u.onCancelEdit&&u.onCancelEdit.call(this))},cancelChanges:function(){(this.cancelEdit(),s(this))||(o(this),e(this),this.refresh())},editRow:function(n){t(this)&&f.call(this._getTrs().eq(n)[0],this)},deleteRow:function(r){if(t(this)&&(!this._triggered||!this._editView.editing)){var f=this._getTrs(),u=this;n.isArray(r)||(r=[r]);r.sort(function(n,t){return t-n});n(r).each(function(n,t){var r=f.eq(t),e=r.next(),o=i(r);r.attr("_insert")?(delete u._changeData.insert[o],r.remove(),e.hasClass("rowExpand-rowDetails")&&e.remove()):(u._changeData["delete"][o]=u._rowIdDataMap[o],r.attr("_delete","true").hide(),e.hasClass("rowExpand-rowDetails")&&e.hide())});this._refreshHeaderCheckBox()}},getChanges:function(t){var f={update:[],insert:[],"delete":[]},i=t?t:"update",h=this._changeData,e,o,s,r;if(i==="update"){e=h[i];for(r in e)u.call(e,r)&&f[i].push(n.extend(!0,{},this._rowIdDataMap[r],e[r]));i=t?t:"insert"}if(i==="insert"){o=h[i];for(r in o)u.call(o,r)&&f[i].push(o[r]);i=t?t:"delete"}if(i==="delete"){s=h[i];for(r in s)u.call(s,r)&&f[i].push(s[r])}return t?f[t]:f},insertRow:function(i,r,u){var p=this.options,o=this._getColModel(),w=this.element,l,f,s,y,a,e,v;if(t(this)&&!this._rowAdding){for(n.isPlainObject(i)&&(r=i,i=0),i===!0&&(r={},i=0,u=!0),l=this._getTrs(),f={},i="begin"==i||i==undefined?0:"end"==i?l.length:i,s=0,y=o.length;s<y;s++)f[o[s].name]="";this._changeData.insert[this._guid]=n.extend(!0,f,r);var b=this._buildRowCellValues(o,f,i),h=[],c=p.rowClasses;isRowClassesFn=typeof c=="function";rowCls=isRowClassesFn?c(i,f):c[i%c.length];tdTmp="<td align='$' abbr='$' class='grid-cell-dirty $'><div align='$' class='$' style='width:$px'>$<\/div><\/td>";h.push("<tr class='om-grid-row "+rowCls+"' _grid_row_id="+this._guid+++" _insert='true'>");this._getHeaderCols().each(function(){var t=n(this).attr("axis"),u=!1,i,f,e,r;t=="indexCol"?i="<a class='om-icon'>新行<\/a>":t=="checkboxCol"?i='<span class="checkbox"/>':t.substring(0,3)=="col"?(r=t.substring(3),i=b[r],o[r].wrap&&(u=!0)):i="";f=[this.align,this.abbr,t,this.align,u?"wrap":"",n("div",n(this)).width(),i];e=0;h.push(tdTmp.replace(/\$/g,function(){return f[e++]}))});h.push("<\/tr>");a=n(h.join(" "));i==0?a.prependTo(w.find(">tbody")):(e=l.eq(i-1),v=e.next(),e=v.hasClass("rowExpand-rowDetails")?v:e,e.after(a));u||(this.editRow(i),this._rowAdding=!0)}},saveChanges:function(){var t,h;if(this.cancelEdit(),!s(this)){var i=this._changeData.update,c=this.element.find("tr.om-grid-row"),f=[];for(t in i)u.call(i,t)&&n.extend(!0,this._rowIdDataMap[t],i[t]);h=this;c.each(function(t,i){var u=n(i);u.attr("_delete")?u.remove():f.push(r(h,i))});this.pageData.data.rows=f;o(this);e(this);this.refresh()}},onBeforeEdit:function(){},onAfterEdit:function(){},onCancelEdit:function(){},getData:function(){var n=this.pageData.data,i=this._getTrs(),r=this;return t(this)&&l(this)&&(n={total:n.total},n.rows=[],i.each(function(t){n.rows.push(r._getRowData(t))})),n},_getRowData:function(t){var o=this._getTrs().eq(t),r=i(o),u,f,e;return s(this)?this.pageData.data.rows[t]:(o.attr("_insert")?u=this._changeData.insert[r]:(f=this._rowIdDataMap[r],e=this._changeData.update,u=f,e[r]&&(u=n.extend(!0,{},f,e[r]))),u)}}))})}(jQuery),function(n){function t(){var u=this.element,t=u.find("tr.rowExpand-rowDetails"),i,r;t.length!=0&&(i=this.hDiv.find("table"),r=i.width()-i.find("th.expenderCol").outerWidth()-parseInt(t.find("> td").css("border-right-width")),t.each(function(){n(this).find(".rowExpand-rowDetails-content").outerWidth(r)}))}n.omWidget.addInitListener("om.omGrid",function(){var e=this,r=this.options,o=r.rowDetailsProvider,i=r.colModel,u=this.thead,f,s,h,c,l;o&&i.length>0&&(r._onResizableCallbacks.push(t),r._onResizableStopCallbacks.push(t),u.find("th:first").before('<th align="center" axis="expenderCol" class="expenderCol" rowspan='+(n.isArray(i[0])?i.length:1)+'><div style="text-align: center; width: 14px;"><\/div><\/th>'),f=-1,s=0,i=this._getColModel(),n(i).each(function(n){i[n].width=="autoExpand"?f=n:s+=i[n].width}),h=u.find('th[axis="expenderCol"]').width(),f!=-1?u.find('th[axis="col'+f+'"] >div').css("width","-="+h):r.autoFit&&(c=h/s,u.find('th[axis^="col"] >div').each(function(t){n(this).css("width","-="+parseInt(i[t].width*c))})),l=this._getHeaderCols().size(),this.tbody.delegate("td.expenderCol >div","click",function(){var i=n(this),r=i.closest("tr"),f=r.next("tr"),u;return f.hasClass("rowExpand-rowDetails")?f.toggle():(u=e._getTrs().index(r),rowData=e._getRowData(u),rowDetails=o?o(rowData,u):"&#160;",r.after('<tr class="rowExpand-rowDetails"><td colspan="'+(l-1)+'"><div class="rowExpand-rowDetails-content">'+rowDetails+"<\/div><\/td><\/tr>")),i.toggleClass("rowExpand-expanded").parent().attr("rowspan",i.hasClass("rowExpand-expanded")?2:1),t.call(e),!1}))})}(jQuery),function(n){function i(t,i){var r=t._oldPage,u=t.pageData.nowPage;return"input"===i?r!=n(".pControl input",t.element.closest(".om-grid")).val():"reload"===i?!0:r!=u}var t=[{cls:"pFirst",type:"first"},{cls:"pPrev",type:"prev"},{cls:"pNext",type:"next"},{cls:"pLast",type:"last"},{cls:"pReload",type:"reload"}];n.omWidget.addInitListener("om.omGrid",function(){var r=this,u=this._getColModel(),f=this._getHeaderCols().filter("[axis^='col']"),o=this.pDiv,e,s;for(n(f).each(function(t){var e=u[t].sort,i;e&&(i=n(this).click(function(){var s=u[t].name,h=i.hasClass("asc")?"asc":i.hasClass("desc")?"desc":null,c=h=="asc"?"desc":"asc",n,o;f.removeClass("asc desc");i.addClass(c);n=r._extraData;delete n.sortBy;delete n.sortDir;switch(e){case"serverSide":n.sortBy=s;n.sortDir=c;r.reload();return;case"clientSide":e=function(n,t){var i=n[s],r=t[s];return i==r?0:i>r?1:-1}}o=r.pageData.data;o.rows=h==null?o.rows.sort(e):o.rows.reverse();r.refresh()}),i.children().first().append('<img class="om-grid-sortIcon" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="><\/img>'))}),e=0,s=t.length;e<s;e++)(function(e){o.find("."+t[e].cls).click(function(){var o=i(r,t[e].type);f.each(function(t){var i=n(this);o&&(i.hasClass("asc")||i.hasClass("desc"))&&"serverSide"!==u[t].sort&&i.removeClass("asc desc")})})})(e);n(".pControl input",o).keydown(function(t){var e=i(r,"input");t.keyCode==n.om.keyCode.ENTER&&f.each(function(t){var i=n(this);e&&(i.hasClass("asc")||i.hasClass("desc"))&&"serverSide"!==u[t].sort&&i.removeClass("asc desc")})});this.clearSort=function(){var n=this._extraData;n.sortBy=undefined;n.sortDir=undefined;this._getHeaderCols().removeClass("asc desc")}})}(jQuery),function(n){n.omWidget("om.omItemSelector",{options:{width:"300px",height:"300px",dataSource:[],value:[],clientFormatter:!1,autoSort:!1,preProcess:function(n){return n},onError:jQuery.noop,onSuccess:jQuery.noop,onBeforeItemSelect:jQuery.noop,onBeforeItemDeselect:jQuery.noop,onItemSelect:jQuery.noop,onItemDeselect:jQuery.noop},_create:function(){this.element.addClass("om-itemselector om-widget").html('<table style="height:100%;width:100%" cellpadding="0" cellspacing="0"><tr><td class="om-itemselector-leftpanel"><\/td><td class="om-itemselector-toolbar"><\/td><td class="om-itemselector-rightpanel"><\/td><\/tr><\/table>');var t=n("td",this.element),i=n("<thead><\/thead>"),r=n("<th><\/th>").attr({axis:"checkboxCol",align:"center"}).append(n('<div class="header"><span class="checkbox"/><span class="om-itemselector-title"/><\/div>'));n("<tr><\/tr>").append(r).appendTo(i);this.leftPanel=n('<table cellspacing="0" cellpadding="0"><\/table>').append(i).append('<tr><td><div class="om-itemselector-up"><span class="upbtn"/><\/div><div class="om-itemselector-items"><dl><\/dl><\/div><div class="om-itemselector-down"><span class="downbtn"/><\/div><\/tr><\/td>').appendTo(t.eq(0));this.toolbar=n("<div><\/div>").appendTo(t.eq(1));this.rightPanel=this.leftPanel.clone().appendTo(t.eq(2))},_init:function(){var t=this.options,r=t.dataSource,i;this.leftPanel.find(".om-itemselector-title").html(n.om.lang._get(t,"omItemSelector","availableTitle"));this.rightPanel.find(".om-itemselector-title").html(n.om.lang._get(t,"omItemSelector","selectedTitle"));this.element.css({width:t.width,height:t.height});this._buildToolbar();this._resizePanel();this._bindEvents();typeof r=="string"?(i=this,n.ajax({url:r,method:"GET",dataType:"json",success:function(n,r){i._trigger("onSuccess",null,n,r)!==!1&&(n=t.preProcess(n),t.dataSource=n,i._buildList())},error:function(n,t,r){i._trigger("onError",null,n,t,r)}})):this._buildList();this._refreshPageButton(this.leftPanel);this._refreshPageButton(this.rightPanel)},_buildToolbar:function(){for(var i,r="",u=["add","space","remove"],t=0,f=u.length;t<f;t++)i=u[t],r+='<div class="om-icon om-itemselector-tbar-'+i+'" title="'+(n.om.lang._get({},"omItemSelector",i+"IconTip")||"")+'"><\/div>';this.toolbar.html(r)},_resizePanel:function(){var t=this,i=t.leftPanel,e=t.rightPanel,r=n(".om-itemselector-items",i),o=n(".om-itemselector-items",e),u=i.parent().innerHeight()-r.offset().top+i.offset().top,s=(n("tr",t.element).innerWidth()-t.toolbar.outerWidth())/2,f=i.outerWidth(s).innerWidth();r.outerHeight(u).width(f);o.outerHeight(u).width(f);t.element.data("dltop",n(".om-itemselector-items >dl",i).offset().top)},_buildList:function(){var t=this.options;dataSource=t.dataSource;value=t.value;fmt=t.clientFormatter;leftHtml="";rightHtml="";inArray=function(n,t){for(var i=0,r=t.length;i<r;i++)if(n.value===t[i])return!0;return!1};buildHtml=fmt?function(n,t){return'<dt _index="'+n+'"><span class="checkbox"/>'+fmt(t,n)+"<\/dt>"}:function(n,t){return'<dt _index="'+n+'"><span class="checkbox"/>'+t.text+"<\/dt>"};n.isArray(dataSource)&&jQuery.isArray(value)&&n.each(dataSource,function(n,t){inArray(t,value)?rightHtml+=buildHtml(n,t):leftHtml+=buildHtml(n,t)});n(".om-itemselector-items>dl",this.leftPanel).html(leftHtml);n(".om-itemselector-items>dl",this.rightPanel).html(rightHtml);var i=n(".om-itemselector-items"),r=n(">dl>dt",i).outerHeight(),u=i.outerHeight(),f=r-u%r;i.outerHeight(u+f)},_bindEvents:function(){var t=this,i=t.toolbar;t.leftPanel.delegate(".om-itemselector-items>dl>dt","click.omItemSelector",function(){n(this).toggleClass("om-state-highlight");t._refreshHeaderCheckbox(t.leftPanel)});t.rightPanel.delegate(".om-itemselector-items>dl>dt","click",function(){n(this).toggleClass("om-state-highlight");t._refreshHeaderCheckbox(t.rightPanel)});this.leftPanel.delegate(".om-itemselector-items>dl>dt","dblclick",function(){n(".om-itemselector-items>dl>dt",t.element).removeClass("om-state-highlight");n(this).addClass("om-state-highlight");t._moveItemsToTarget(".om-state-highlight",!0)});this.rightPanel.delegate(".om-itemselector-items>dl>dt","dblclick",function(){n(".om-itemselector-items>dl>dt",t.element).removeClass("om-state-highlight");n(this).addClass("om-state-highlight");t._moveItemsToTarget(".om-state-highlight",!1)});n(".om-itemselector-tbar-add",i).click(function(){t._moveItemsToTarget(".om-state-highlight",!0)});n(".om-itemselector-tbar-remove",i).click(function(){t._moveItemsToTarget(".om-state-highlight",!1)});n(".header span.checkbox",t.leftPanel).click(function(){var r=t.leftPanel,i=n(".om-itemselector-items>dl>dt",r);n(this).toggleClass("selected");n("div.om-itemselector-up:visible",r).length>0&&(i=n(t._getPageItems(r,i)));n(this).hasClass("selected")?i.addClass("om-state-highlight"):i.removeClass("om-state-highlight")});n(".header span.checkbox",t.rightPanel).click(function(){var r=t.rightPanel,i=n(".om-itemselector-items>dl>dt",r);n(this).toggleClass("selected");n("div.om-itemselector-up:visible",r).length>0&&(i=n(t._getPageItems(r,i)));n(this).hasClass("selected")?i.addClass("om-state-highlight"):i.removeClass("om-state-highlight")});t.element.delegate("div.om-itemselector-up:not([disabled])","click",function(){t._page(n(this),!0);t._refreshHeaderCheckbox(n(this).parentsUntil("table").last().parent())});t.element.delegate("div.om-itemselector-down:not([disabled])","click",function(){t._page(n(this),!1);t._refreshHeaderCheckbox(n(this).parentsUntil("table").last().parent())})},_page:function(n,t){var f=t?n.next():n.prev(),r=f.children("dl"),u=f.outerHeight()-2,s=r.outerHeight(),i=r.offset().top,e,o=this.element.data("dltop")+20;t?(r.offset({top:i+u}),e=f.next(),((i=r.offset().top)>0||r.outerHeight()-i-o>u)&&e.removeAttr("disabled").removeClass("om-itemselector-down-disabled"),i>0&&i<u&&n.attr("disabled","disabled").addClass("om-itemselector-up-disabled")):(r.offset({top:i-u}),e=f.prev(),e.removeAttr("disabled").removeClass("om-itemselector-up-disabled"),(i=r.offset().top)<0&&s+i-o<=u&&n.attr("disabled","disabled").addClass("om-itemselector-down-disabled"))},_refreshHeaderCheckbox:function(t){var i=n(".om-itemselector-items>dl>dt",t),r;i=n(this._getPageItems(t,i));r=i.filter(".om-state-highlight").length;n(".header span.checkbox",t).toggleClass("selected",r>0&&i.length===r)},_refreshPageButton:function(t){var s=n(".om-itemselector-items",t),f=n(".om-itemselector-items >dl",t),i=n(".om-itemselector-up",t),e=n(".om-itemselector-down",t),u=s.outerHeight(),o=f.outerHeight(),r=f.offset().top,h=this.element.data("dltop")+20;o>20&&h-r>=o&&(f.offset({top:r+u}),r=f.offset().top);o>u?(i.is(":hidden")&&(s.outerHeight(u-i.outerHeight()*2),i.show(),e.show()),r>0&&r<u?i.attr("disabled","disabled").addClass("om-itemselector-up-disabled"):i.removeAttr("disabled").removeClass("om-itemselector-up-disabled"),r>0||o+r-h>u?e.removeAttr("disabled").removeClass("om-itemselector-down-disabled"):e.attr("disabled","disabled").addClass("om-itemselector-down-disabled")):i.is(":visible")&&(s.outerHeight(u+i.outerHeight()*2),i.hide(),e.hide())},_getPageItems:function(t,i){var u=n(".om-itemselector-items",t),f=u.outerHeight(),s=n(">dl",u),h=u.next(":visible").length>0,c=i.outerHeight(),e=f/c,r=s.offset().top,o=this.element.data("dltop");return r=h?o-r+20:o-r,n.grep(i,function(n,t){return t<e*(r/f+1)-1&&t>=e*(r/f)})},select:function(t){n.isArray(indexes)||(indexes=[indexes]);for(var i=0,r=t.length;i<r;i++)n('.om-itemselector-items>dl>dt[_index="'+t[i]+'"]').addClass("om-state-highlight")},_moveItemsToTarget:function(t,i){var r=this,e=i?this.leftPanel:this.rightPanel,f=n(".om-itemselector-items>dl>dt"+t,e);if(f.size()!=0){var o=i?this.rightPanel:this.leftPanel,s=this.options,u=[];if(f.each(function(){u.push(s.dataSource[n(this).attr("_index")])}),i){if(r._trigger("onBeforeItemSelect",null,u)===!1)return;f.appendTo(n(".om-itemselector-items>dl",o)).removeClass("om-state-highlight");r._trigger("onItemSelect",null,u)}else{if(r._trigger("onBeforeItemDeselect",null,u)===!1)return;f.appendTo(n(".om-itemselector-items>dl",o)).removeClass("om-state-highlight");r._trigger("onItemDeselect",null,u)}r._refreshHeaderCheckbox(e);r._refreshPageButton(e);r._refreshPageButton(o)}},value:function(t){if(arguments.length==0){var r=this.options,u=n(".om-itemselector-items>dl>dt",this.rightPanel),i=[];return u.each(function(){i.push(r.dataSource[n(this).attr("_index")].value)}),i}n.isArray(t)&&(this.options.value=t,this._buildList())}});n.om.lang.omItemSelector={availableTitle:"可选项",selectedTitle:"已选项",addIconTip:"右移",removeIconTip:"左移"}}(jQuery),function(n){n.omWidget("om.omMenu",{options:{contextMenu:!1,maxWidth:200,minWidth:100,dataSource:"local"},show:function(t){var s=this,c=s.options,f,i,r=s.element,h=n(t).offset(),o,u,e;for(c.contextMenu?(f=t.pageY,i=t.pageX,t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0):(o=parseInt(n(t).css("borderBottomWidth").replace("px","")),f=h.top+n(t).height()+(o!="NaN"?o:0)+1,i=h.left+1),u=r.parent();u.css("position")=="static"&&u[0].nodeName!="BODY";)u=u.parent();f-=u.offset().top;i-=u.offset().left;i+r.outerWidth()>document.documentElement.clientWidth&&(i=i-r.outerWidth()-20);n(r).css({top:f,left:i}).show();n(r).children("ul.om-menu").show();e=n(r).width()*.7;n(r).children("ul.om-menu").children().each(function(t,i){n(i).find("span:first").hasClass("om-menu-item-sep")?n(i).find("span:first").width("98%"):n(i).find("span:first").width()>e&&n(i).find("span:first").width(n(i).attr("aria-haspopup")?e-15:e)})},hide:function(){this._hide()},disableItem:function(n){this.element.find("#"+n).addClass("om-state-disabled").unbind(".menuItem")},enableItem:function(n){var t=this,r=t.element,i=r.find("#"+n);i.removeClass("om-state-disabled");t._bindLiEvent(i)},destroy:function(){for(var i=n(document),t;t=this.globalEvent.pop();)i.unbind(".omMenu",t)},_create:function(){var n=this,u=n.options,i=n.element,t=u.dataSource,r;i.addClass("om-menu-container om-menu-content om-corner-all");i.css("position","absolute");t&&(t!="local"?typeof t=="string"?n._ajaxLoad(i,t):typeof t=="object"&&(i.append(n._appendNodes.apply(n,[t])),n._bindEvent()):(r=i.children("ul").addClass("om-menu"),n._parseDomMenu(r),n._bindEvent()))},_init:function(){var t=this.options,i=this.element;i.css({minWidth:t.minWidth-10,maxWidth:t.maxWidth-10});n.browser.msie&&n.browser.version=="6.0"&&i.css("width",t.minWidth+30);n.browser.msie&&n.browser.version=="7.0"&&i.css("width",t.maxWidth-10)},_ajaxLoad:function(t,i){var r=this;n.ajax({url:i,method:"POST",dataType:"json",success:function(n){t.append(r._appendNodes.apply(r,[n]));r._bindEvent()}})},_appendNodes:function(t,i){var f=this,u=[],o=i==undefined?"om-menu":"om-menu-content",s=i==undefined?"block":"none",e=i==undefined?"om-menu-icon":"om-menu-icon om-menu-icon-child",r;return u.push('<ul class="'+o+' om-corner-all" style="display:'+s+';">'),r=[],n(t).each(function(t,i){i.children!=null?(i.disabled===!0||i.disabled=="true"?r.push('<li id="'+i.id+'" aria-haspopup="true"  class="om-state-disabled">'):r.push('<li id="'+i.id+'"  aria-haspopup="true">'),r.push('<a href="javascript:void(0)" class="om-corner-all om-menu-indicator">'),i.icon?r.push('<img class="'+e+'" src="'+i.icon+'">'):null,i.icon?r.push("<span>"+i.label+"<\/span>"):r.push('<span style="margin-left:2em;">'+i.label+"<\/span>"),r.push('<span class="ui-icon-span" role="popup"><\/span>'),r.push("<\/a>"),r.push(f._appendNodes(i.children,t++)),r.push("<\/li>")):(i.disabled===!0||i.disabled=="true"?r.push('<li id="'+i.id+'"  class="om-state-disabled">'):r.push('<li id="'+i.id+'" >'),r.push('<a href="javascript:void(0)" class="om-corner-all om-menu-indicator">'),i.icon?r.push('<img class="'+e+'" src="'+i.icon+'">'):null,i.icon?r.push("<span>"+i.label+"<\/span>"):r.push('<span style="margin-left:2em;">'+i.label+"<\/span>"),r.push("<\/a>"),r.push("<\/li>"));(i.seperator=="true"||i.seperator==!0)&&r.push('<li class="om-menu-sep-li"  ><span class="om-menu-item-sep">&nbsp;<\/span><\/li>');var u=n(f.element).attr("id")+"_"+i.id;n(f.element).data(u,i)}),u.push(r.join("")),u.push("<\/ul>"),u.join("")},_parseDomMenu:function(t){var u,r,i,f;for(t.parent().attr("aria-haspopup")=="true"&&t.addClass("om-menu-content om-corner-all"),t.css("display","none"),u=t.children(),r=0;r<u.length;r++)i=n(u[r]),f=i.children("ul"),f.length>0&&(i.attr("aria-haspopup","true"),i.find("span[role='popup']").addClass("ui-icon-span"),this._parseDomMenu(f)),i.find("a").addClass("om-corner-all om-menu-indicator"),i.find("img").addClass("om-menu-icon")},_showChildren:function(t){var u=this,i,r;t&&t.length>0&&(i=t.children("ul").eq(0),i.css({minWidth:this.options.minWidth,top:t.position().top}),r=t.width(),2*r+t.offset().left>document.documentElement.clientWidth&&(r=-r),i.css("left",r),i.show(),i.children().each(function(t,r){n(r).find("span:first").hasClass("om-menu-item-sep")?n(r).find("span:first").width("98%"):(i.width()>u.options.maxWidth?(i.width(u.options.maxWidth),width=u.options.maxWidth*.6):(i.attr("hasShow")==undefined&&(i.width(i.find("li:eq(0)>a:eq(0)").width()+15),i.attr("hasShow",!0)),width=i.width()*.6),n(r).find("span:first").width(width))}))},_hideChildren:function(n){n.children("ul").eq(0).hide()},_bindLiEvent:function(t){var i=this,r=i.element,u=i.options;n(t).bind("mouseenter.menuItem",function(){var t=n(this),r=t.parent().width();t.addClass("om-menu-item-hover");n.browser.msie&&n.browser.version=="9.0"&&t.parent().width(r);t.attr("aria-haspopup")&&setTimeout(function(){i._showChildren(t)},200)}).bind("mouseleave.menuItem",function(){var t=n(this);t.removeClass("om-menu-item-hover");setTimeout(function(){t.children("ul").hide()},200)}).bind("mousedown.menuItem",function(t){var f=n(r).data(n(r).attr("id")+"_"+this.id);u.onSelect&&i._trigger("onSelect",t,f)})},_bindEvent:function(){for(var f,t=this,r=t.element,s=r.find("ul"),e=r.find("li"),o=n(document),i,u=0;u<e.length;u++)n(e[u]).hasClass("om-state-disabled")||t._bindLiEvent(e[u]);for(f=0;f<s.length;f++)n(s[f]).bind("mouseleave.menuContainer",function(){var t=n(this);t.parent().attr("aria-haspopup")=="true"&&t.hide()});this.globalEvent=[];o.bind("mousedown.omMenu",i=function(){t._hide()});this.globalEvent.push(i);o.bind("keyup.omMenu",i=function(i){var f=i.keyCode,u=n.om.keyCode;switch(f){case u.DOWN:t._selectNext();break;case u.UP:t._selectPrev();break;case u.LEFT:t._hideRight();break;case u.RIGHT:t._showRight();break;case u.ENTER:r.css("display")=="block"&&t._backfill(r);t._hide();break;case u.ESCAPE:t._hide();break;default:null}});this.globalEvent.push(i);o.bind("keydown.omMenu",i=function(n){n.keyCode>=37&&n.keyCode<=40&&n.preventDefault()});this.globalEvent.push(i)},_hide:function(){var i=this,t=i.element;t.find("ul").css("display","none");t.find("li.om-menu-item-hover").each(function(t,i){n(i).removeClass("om-menu-item-hover")});t.hide()},_findNext:function(n){for(var i,r=n,t;(i=n.next("li")).length!==0;){if(!i.hasClass("om-menu-sep-li")&&!i.hasClass("om-state-disabled"))return i;n=i}for(t=r.parent().find("li:first");t.length!==0&&t!=r;){if(!t.hasClass("om-menu-sep-li")&&!t.hasClass("om-state-disabled"))return t;t=t.next("li")}},_findPrev:function(n){for(var i,u=n,r,t;(i=n.prev("li")).length!==0;){if(!i.hasClass("om-menu-sep-li")&&!i.hasClass("om-state-disabled"))return i;n=i}for(r=u.parent().children(),t=r.eq(r.length-1);t.length!==0&&t!=u;){if(!t.hasClass("om-menu-sep-li")&&!t.hasClass("om-state-disabled"))return t;t=t.prev("li")}},_selectNext:function(){var r=this,u=r.element,n,t=u.find("li.om-menu-item-hover"),i=t.eq(t.length-1);if(t.length==0){for(n=u.find("li").eq(0);n.hasClass("om-state-disabled");)n=n.next("li");n.addClass("om-menu-item-hover")}else{if(n=r._findNext(i),n.length<=0)return;n.addClass("om-menu-item-hover");i.removeClass("om-menu-item-hover")}this._hideChildren(i);this._showChildren(n)},_selectPrev:function(){var u=this,f=u.element,n,i=f.find("li.om-menu-item-hover"),r=i.eq(i.length-1),t,e;if(n=f.find("ul.om-menu > li"),i.length==0){for(t=n.eq(n.length-1),e=1;t.hasClass("om-state-disabled");)t=n.eq(n.length-e++);(n=t).addClass("om-menu-item-hover")}else{if(n=u._findPrev(r),n.length<=0)return;n.addClass("om-menu-item-hover");r.removeClass("om-menu-item-hover")}this._hideChildren(r);this._showChildren(n)},_hideRight:function(){var n=this,r=n.element,t=r.find("li.om-menu-item-hover"),i=t.eq(t.length-1);i.removeClass("om-menu-item-hover");n._hideChildren(i)},_showRight:function(){var t=this,u=t.element,n=null,i=u.find("li.om-menu-item-hover"),r=i.eq(i.length-1);r.attr("aria-haspopup")=="true"&&(n=r.children("ul").find("li").eq(0),n.addClass("om-menu-item-hover"));t._showChildren(n)},_backfill:function(n){var t=n.find("li.om-menu-item-hover");t.eq(t.length-1).mousedown()}})}(jQuery),function(n){var r='<div class="om-messageBox om-widget om-widget-content om-corner-all" tabindex="-1"><div class="om-messageBox-titlebar om-widget-header om-corner-top om-helper-clearfix"><span class="om-messageBox-title"><\/span><a href="#" class="om-messageBox-titlebar-close om-corner-tr"><span class="om-icon om-icon-closethick"><\/span><\/a><\/div><div class="om-messageBox-content om-widget-content"><table><tr vailgn="top"><td class="om-messageBox-imageTd"><div class="om-messageBox-image"/>&nbsp;<\/td><td class="om-message-content-html"><\/td><\/tr><\/table><\/div><div class="om-messageBox-buttonpane om-widget-content om-corner-bottom om-helper-clearfix"><div class="om-messageBox-buttonset"><\/div><\/div><\/div>',u=function(){if(n.browser.msie&&n.browser.version<7){var t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return t<i?n(window).height():t}return n(document).height()},f=function(){if(n.browser.msie){var t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return t<i?n(window).width():t}return n(document).width()},t=function(n,t,i,r){n.hasClass("om-messageBox-waiting")||(i?i(r):jQuery.noop(),n.remove(),t.remove())},i=function(i){var h=i.onClose,e=n(r).appendTo(document.body).css("z-index",1500).position({of:window,collision:"fit"}).omDraggable({containment:"document",cursor:"move",handle:".om-messageBox-titlebar"}).hide().keydown(function(i){i.keyCode&&i.keyCode===n.om.keyCode.ESCAPE&&(t(e,s,null,!1),i.preventDefault())}),s=n('<div class="om-widget-overlay"/>').appendTo(document.body).show().css({height:u(),width:f()}),v=e.find("span.om-messageBox-title").html(i.title).next().hover(function(){n(this).addClass("om-state-hover")},function(){n(this).removeClass("om-state-hover")}).focus(function(){n(this).addClass("om-state-focus")}).blur(function(){n(this).removeClass("om-state-focus")}).click(function(){return t(e,s,null,!1),!1}).bind("mousedown mouseup",function(){n(this).toggleClass("om-state-mousedown")}),c,o,l,a;e.find("div.om-messageBox-image").addClass("om-messageBox-image-"+i.type);c=i.content;i.type=="prompt"&&(c=(c||"")+'<br/><input id="om-messageBox-prompt-input" type="text"/>');e.find("td.om-message-content-html").html(c);o=e.find("div.om-messageBox-buttonset");switch(i.type){case"confirm":o.html('<button id="confirm">确定<\/button><button id="cancel">取消<\/button>');n.fn.omButton&&(o.find("button#confirm").omButton({width:60,onClick:function(){t(e,s,h,!0)}}),o.find("button#cancel").omButton({width:60,onClick:function(){t(e,s,h,!1)}}));break;case"prompt":o.html('<button id="confirm">确定<\/button><button id="cancel">取消<\/button>');n.fn.omButton&&(o.find("button#confirm").omButton({width:60,onClick:function(){var t=h?h(n("#om-messageBox-prompt-input").val()):jQuery.noop();t!==!1&&(e.remove(),s.remove())}}),o.find("button#cancel").omButton({width:60,onClick:function(){t(e,s,h,!1)}}));break;case"waiting":e.addClass("om-messageBox-waiting");s.addClass("om-messageBox-waiting");v.hide();o.parent().hide();e.find(">.om-messageBox-content").addClass("no-button om-corner-bottom");break;default:o.html('<button id="confirm">确定<\/button>');n.fn.omButton&&o.find("button#confirm").omButton({width:60,onClick:function(){t(e,s,h,!0)}})}l=n("button",o);l.width("100%");e.show();a=l.first()[0];a?a.focus():e.focus()};n.omMessageBox={alert:function(n){n=n||{};n.title=n.title||"提示";n.type=n.type||"alert";i(n)},confirm:function(n){n=n||{};n.title=n.title||"确认";n.type="confirm";i(n)},prompt:function(n){n=n||{};n.title=n.title||"请输入";n.type="prompt";i(n)},waiting:function(t){if(t==="close"){n(".om-messageBox-waiting").remove();return}t=t||{};t.title=t.title||"请等待";t.type="waiting";i(t)}}}(jQuery),function(n){n.omMessageTip={show:function(t){function f(t){r=setTimeout(function(){n.omMessageTip._close(u)},t)}var r;t=n.extend({title:"提醒",content:"&#160;",type:"alert"},t);var e='<div class="om-messageTip om-widget om-corner-all" tabindex="-1"><div class="om-widget-header om-corner-top om-helper-clearfix"><span class="om-messageTip-title">'+t.title+'<\/span><a href="#" class="om-messageTip-titlebar-close om-corner-tr"><span class="om-icon-closethick"><\/span><\/a><\/div><div class="om-messageTip-content om-widget-content om-corner-bottom"><div class="om-messageTip-image om-messageTip-image-'+t.type+'"><\/div><div class="om-messageTip-content-body">'+t.content+"<\/div><\/div><\/div>",i=n(e).appendTo(document.body).css("z-index",3e3).hide(),u={d:i,l:t.onClose};return i.find("a.om-messageTip-titlebar-close").bind("mouseenter mouseleave",function(){n(this).toggleClass("om-state-hover")}).bind("focus blur",function(){n(this).toggleClass("om-state-focus")}).bind("mousedown mouseup",function(){n(this).toggleClass("om-state-mousedown")}).click(function(){return n.omMessageTip._close(u),!1}),i.slideDown("slow"),r=null,t.timeout&&f(t.timeout),i.bind("mouseover",function(){clearTimeout(r)}).bind("mouseout",function(){r&&f(t.timeout)}),i},_close:function(n){n.d.slideUp("slow");n.l&&n.l();setTimeout(function(){n.d.remove()},1e3)}}}(jQuery),function(n){var t=function(n,t,i){var r=n.indexOf("."),u;if(isNaN(n)&&n!=".")for(;isNaN(n);)n=n.substring(0,n.length-1);return(i.allowNegative||n.indexOf("-")==-1||(u=n.split("-"),n=u.join("")),!i.allowDecimals&&r!=-1||n.charAt(n.length-1)===".")?n.substring(0,r):(r!=-1&&(n=n.substring(0,r+i.decimalPrecision+1)),n.length>0?parseFloat(n):"")};n.omWidget("om.omNumberField",{options:{allowDecimals:!0,allowNegative:!0,decimalPrecision:2,disabled:!1,onBlur:function(){},readOnly:!1},_create:function(){var r=this.options,i=this;this.element.addClass("om-numberfield om-widget om-state-default om-state-nobg").css("ime-mode","disabled");this.element.keypress(function(t){var i,r,u;(t.which==null&&(t.charCode!=null||t.keyCode!=null)&&(t.which=t.charCode!=null?t.charCode:t.keyCode),i=t.which,i!==8&&(i!=46||t.button!=-1)&&i!==0)&&(r=String.fromCharCode(i),n.data(this,"character",r),u=n.data(this,"allowed"),(u.indexOf(r)===-1||n(this).val().indexOf("-")!==-1&&r=="-"||n(this).val().indexOf(".")!==-1&&r==".")&&t.preventDefault())}).focus(function(){n(this).addClass("om-state-focus")}).blur(function(u){n(this).removeClass("om-state-focus");var f=n.data(this,"character");this.value=t(this.value,f,r);i._trigger("onBlur",u,this.value)}).keydown(function(n){i._checkLast(this);229===n.which&&n.preventDefault()}).keyup(function(){i._checkLast(this)}).bind("cut paste",function(){return!1})},_init:function(){var i=this.element,t=this.options,r;typeof t.disabled!="boolean"&&(t.disabled=i.attr("disabled"));t.readOnly&&i.attr("readonly","readonly");r=n.data(i[0],"character");this._buildAllowChars();t.disabled?this.disable():this.enable()},_checkLast:function(t){var i=t.value,r=i.length;(i&&n.data(t,"allowed").indexOf(i.charAt(r-1))===-1||i.indexOf(".")!=i.lastIndexOf(".")||i.indexOf("-")!=i.lastIndexOf("-"))&&(t.value=i=i.substring(0,r---1))},_buildAllowChars:function(){var t="0123456789";this.options.allowDecimals&&(t=t+".");this.options.allowNegative&&(t=t+"-");this.options.readOnly&&(t="");n.data(this.element[0],"allowed",t)},disable:function(){this.element.attr("disabled",!0).addClass("om-numberfield-disabled")},enable:function(){this.element.attr("disabled",!1).removeClass("om-numberfield-disabled")}})}(jQuery),function(n){n.omWidget("om.omProgressbar",{options:{value:0,text:"{value}%",width:"auto",max:100},min:0,_create:function(){var t=this.element;t.addClass("om-progressbar om-widget om-widget-content om-corner-all");this.textDiv=n("<div class='om-progressbar-text'><\/div>").appendTo(t);this.valueDiv=n("<div class='om-progressbar-value om-widget-header om-corner-left'><\/div>").appendTo(t)},_init:function(){var n=this.element.width();typeof this.options.width=="number"&&(n=this.options.width,this.element.width(n));this.textDiv.width(Math.floor(n));this.oldValue=this._value();this._refreshValue()},value:function(n){if(n===undefined)return this._value();this.options.value=n;this._refreshValue()},_value:function(){var n=this.options.value;return typeof n!="number"&&(n=0),Math.min(this.options.max,Math.max(this.min,n))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var n=this,t=n.value(),u=n.options.onChange,f=n._percentage(),i=n.options.text,r="";n.valueDiv.toggle(t>n.min).toggleClass("om-corner-right",t===n.options.max).width(f.toFixed(0)+"%");typeof i=="function"?r=i.call(t,t):typeof i=="string"&&(r=i.replace("{value}",t));n.textDiv.html(r);n.oldValue!==t&&(u&&n._trigger("onChange",null,t,n.oldValue),n.oldValue=t)}})}(jQuery),function(n){n.omWidget("om.omScrollbar",{options:{thick:8},_create:function(){var t=this.options;this._vScrollbar=n("<div class='om-widget om-scrollbar om-corner-all'><\/div>").width(t.thick).appendTo("body").hide();this._vScrollbar.type="v";this._hScrollbar=n("<div class='om-widget om-scrollbar om-corner-all'><\/div>").height(t.thick).appendTo("body").hide();this._hScrollbar.type="h"},_init:function(){this.element.css("overflow","hidden");this._buildEvent()},destroy:function(){this._vScrollbar.remove();this._hScrollbar.remove()},_buildEvent:function(){var t=this,i=this.element,r=[this._vScrollbar,this._hScrollbar],u;n(r).each(function(u,f){f._hover=!1;f._enable=!0;var e=f.type,o=0;f.omDraggable({axis:e==="v"?"y":"x",containment:i,onStart:function(){o=e==="v"?i.scrollTop():i.scrollLeft()},onDrag:function(n){var r=n.position,u=n.originalPosition;e=="v"?i.scrollTop(o+t._getInt((r.top-u.top)*i.innerHeight()/f.outerHeight())):i.scrollLeft(o+t._getInt((r.left-u.left)*i.innerWidth()/f.outerWidth()))}}).hover(function(){n(r).each(function(n,t){t._hover=!0;clearTimeout(t._timer)});n(this).addClass("scrollbar-state-hover")},function(){n(r).each(function(n,i){i._hover=!1;t._setTimer(i.type)});n(this).removeClass("scrollbar-state-hover")})});u=n.browser.mozilla?"DOMMouseScroll":"mousewheel";i.bind(u,function(n){t._mousewheelListener.call(t,n)});n(r).each(function(n,i){i.bind(u,function(n){t._mousewheelListener.call(t,n)})});i.hover(function(){n(r).each(function(n,i){i._hover=!0;clearTimeout(i._timer);t._resize(i);i._enable&&i.fadeIn("fast")})},function(){n(r).each(function(n,i){i._hover=!1;t._setTimer(i.type)})})},_mousewheelListener:function(n){var i=this,f;if(i._vScrollbar._enable){f=0;f=n.wheelDelta?-n.wheelDelta:n.detail*40;var u=f/12,r=i._vScrollbar,t=i.element,e=t.offset().top+i._getInt(t.css("border-top-width"))+i._getInt(t.css("padding-top"))+i._getInt(t.css("padding-top-width")),o=r.position().top-e,h=t.height(),s=h-r.outerHeight();u+o<0?(r.css("top",e),t.scrollTop(0)):u+o>s?(r.css("top",e+s),t.scrollTop(t[0].scrollHeight-t.height())):(r.css("top","+="+u),t.scrollTop(t.scrollTop()+parseInt(u*t.innerHeight()/r.outerHeight())));n.preventDefault()}},_getScrollbar:function(n){return"h"===n?this._hScrollbar:this._vScrollbar},_setTimer:function(n){var t=this;clearTimeout(this._getScrollbar(n)._timer),function(n){setTimeout(function(){var i=t._getScrollbar(n);i._hover||i.fadeOut("fast")},200)}(n)},refresh:function(){var t=[this._vScrollbar,this._hScrollbar],i=this;n(t).each(function(n,t){i._resize(t)})},_resize:function(n){var t=this.element,e=n.type,i=0,r=t.offset(),u=t.width(),f=t.height(),s=t.outerWidth(),h=t.outerHeight(),c=this._getInt(t.css("border-left-width")),l=this._getInt(t.css("border-right-width")),a=this._getInt(t.css("border-top-width")),v=this._getInt(t.css("border-bottom-width")),o=this._getInt(t.css("padding-left")),y=this._getInt(t.css("padding-top"));"v"===e?(i=t[0].scrollHeight,i>f?(n._enable=!0,n.outerHeight(this._getInt(f*t.innerHeight()/i)),n.css({left:r.left+s-n.outerWidth()-l,top:r.top+a+y+this._getInt(t.scrollTop()*f/i)})):n._enable=!1):"h"===e&&(i=t[0].scrollWidth,i>t.innerWidth()?(n._enable=!0,n.outerWidth(this._getInt((o+u)*u/i)),n.css({left:r.left+c+o+this._getInt(t.scrollLeft()*u/i),top:r.top+h-n.outerHeight()-v})):n._enable=!1);n._enable?n.fadeIn("fast"):n.fadeOut("fast")},_getInt:function(n){return parseInt(n)||0}})}(jQuery),function(n){n.omWidget("om.omSlider",{options:{autoPlay:!0,interval:5e3,directionNav:!1,pauseOnHover:!0,controlNav:!0,activeNavCls:"nav-selected",effect:"fade",animSpeed:400,startSlide:0,delay:200,onBeforeSlide:function(){},onAfterSlide:function(){}},slideTo:function(n){opts=this.element.data("omSlider:opts");this._slideTo(this.element,n)},next:function(){opts=this.element.data("omSlider:opts");this._next(this.element)},prev:function(){opts=this.element.data("omSlider:opts");this._prev(this.element)},destroy:function(){var r=this.element,i=this.options,t=this._getSliderVars(r);clearTimeout(t.slideTimer);clearInterval(t.autoPlayTimer);t.customNav&&n(i.controlNav).children().unbind(".omSlider").removeData("sid").removeClass(i.activeNavCls)},_getSliderVars:function(n){return n.data("omSlider:vars")},_runSlideEffect:function(t,i,r){var v=this,s=this._getSliderVars(t),u=t.find("ul.om-slider-content:first"),c=u.children(),f=this.options,l=0,a=0,e=r?r:f.effect,o,h;if(f.effect=="random"&&u.addClass("om-slider-effect-"+e),u.stop(),e=="slide-v"||e=="slide-h")o=e=="slide-v",f.effect=="random"&&(h=0,c.each(function(t){if(t!==s.currentSlide)h-=o?n(this).height():n(this).width();else return!1}),u.css(o?"top":"left",h)),c.each(function(t){if(t==i)return!1;o?l-=n(this).height():a-=n(this).width()});else return!1;s.running=!0;u.animate({top:l,left:a},f.animSpeed,function(){s.running=!1;v._trigger("onAfterSlide",null,i)})},_runFadeEffect:function(t,i){var f=this,r=this._getSliderVars(t),e=t.find("ul.om-slider-content:first").children(),u=this.options;e.each(function(t){var e=n(this);t==i?(r.running=!0,e.fadeIn(u.animSpeed,function(){r.running=!1;f._trigger("onAfterSlide",null,i)})):t==r.currentSlide&&e.fadeOut(u.animSpeed)})},_runNoEffect:function(t,i){var r=this,u=this._getSliderVars(t),f=t.find("ul.om-slider-content:first").children();f.each(function(t){var f=n(this);t==i?(f.show(),r._trigger("onAfterSlide",null,i)):t==u.currentSlide&&f.hide()})},_toggleControlNav:function(t,i){var r=this._getSliderVars(t),e=this.options,u=t,f;r.customNav&&(u=n("body"));f=u.find(r.controlNav).children();f.each(function(t){n(this).toggleClass(e.activeNavCls,t==i)})},_slideTo:function(n,t){var f=this._getSliderVars(n),e=n.find("ul.om-slider-content:first"),r=this.options,i=this,o,u;if(!isNaN(t)&&!(t<0)&&!(t>=f.totalSlides))return this._trigger("onBeforeSlide",null,t)===!1?!1:(r.effect=="random"?(o=["fade","slide-h","slide-v"],u=o[Math.floor(Math.random()*3)],e.removeClass().addClass("om-slider-content"),e.removeAttr("style"),e.find("li").removeAttr("style"),u=="slide-h"||u=="slide-v"?i._runSlideEffect(n,t,u):i._runFadeEffect(n,t)):r.effect=="slide-h"||r.effect=="slide-v"?i._runSlideEffect(n,t):r.effect=="fade"||r.effect===!0?i._runFadeEffect(n,t):i._runNoEffect(n,t),f.controlNav&&i._toggleControlNav(n,t),f.currentSlide=t,n)},_next:function(n){var t=this._getSliderVars(n),i=0;return t.currentSlide+2<=t.totalSlides&&(i=t.currentSlide+1),this._slideTo(n,i)},_prev:function(n){var t=this._getSliderVars(n),i=t.totalSlides-1;return t.currentSlide!=0&&(i=t.currentSlide-1),this._slideTo(n,i)},_processDirectionNav:function(t){var r=this._getSliderVars(t),i=n('<div class="om-slider-directionNav">').appendTo(t),u=this;n('<a class="om-slider-prevNav"><\/a>').appendTo(i).click(function(){if(r.running)return!1;u._prev(t)});n('<a class="om-slider-nextNav"><\/a>').appendTo(i).click(function(){if(r.running)return!1;u._next(t)});t.hover(function(){i.show()},function(){i.hide()})},_processControlNav:function(t){var i=this._getSliderVars(t),r=this.options,o=this,u,f,s,e;if(r.controlNav===!0||r.controlNav==="classical"){for(e=n('<ul class="om-slider-nav-classical"><\/ul>'),i.controlNav=".om-slider-nav-classical",u=0;u<i.totalSlides;u++)f=n("<li>"+(u+1)+"<\/li>"),f.data("sid",u),s=0,f.click(function(){o._slideTo(t,n(this).data("sid"))}),f.hover(function(){if(i.running||i.stop)return!1;var u=n(this);if(u.hasClass(r.activeNavCls))return!1;i.slideTimer=s=setTimeout(function(){o._slideTo(t,u.data("sid"))},r.delay)},function(){clearTimeout(s)}),e.append(f);t.append(e)}else if(r.controlNav==="dot"){for(e=n('<div class="om-slider-nav-dot"><\/div>'),i.controlNav=".om-slider-nav-dot",u=0;u<i.totalSlides;u++)f=n('<a href="javascript:void(0)">'+(u+1)+"<\/a>"),f.data("sid",u),s=0,f.click(function(){o._slideTo(t,n(this).data("sid"))}),f.hover(function(){if(i.running||i.stop)return!1;var u=n(this);if(u.hasClass(r.activeNavCls))return!1;i.slideTimer=s=setTimeout(function(){o._slideTo(t,u.data("sid"))},r.delay)},function(){clearTimeout(s)}),e.append(f);e.appendTo(t).css({marginLeft:e.width()/-2})}else n(r.controlNav).length>0&&(i.controlNav=r.controlNav,i.customNav=!0,e=n(r.controlNav),e.children().each(function(u){var f=n(this),e;f.data("sid",u);e=0;f.bind("click.omSlider",function(){o._slideTo(t,n(this).data("sid"))});f.bind("mouseover.omSlider",function(){if(i.running||i.stop)return!1;var u=n(this);if(u.hasClass(r.activeNavCls))return!1;i.slideTimer=e=setTimeout(function(){o._slideTo(t,u.data("sid"))},r.delay)}).bind("mouseout.omSlider",function(){clearTimeout(e)})}))},_create:function(){function o(r,e){if(!isNaN(e)&&!(e<0)&&!(e>=i.totalSlides)){var o=r.find("ul.om-slider-content:first"),c=o.children(),s=0,h=0;t.effect=="slide-h"?(c.each(function(t){if(t==e)return!1;h-=n(this).width()}),setTimeout(function(){o.css({left:h,top:s})},0)):t.effect=="slide-v"?(c.each(function(t){if(t==e)return!1;s-=n(this).height()}),setTimeout(function(){o.css({left:h,top:s})},0)):o.children().eq(e).show();i.controlNav&&u._toggleControlNav(r,e);t.autoPlay&&(i.autoPlayTimer=f=setInterval(function(){u._next(r)},t.interval));t.pauseOnHover&&r.hover(function(){i.paused=!0;clearInterval(f)},function(){i.paused=!1;t.autoPlay&&(i.autoPlayTimer=f=setInterval(function(){u._next(r)},t.interval))});t.directionNav&&u._processDirectionNav(r)}}var f=0,r=this.element,u=this,t=this.options,i={currentSlide:0,totalSlides:0,running:!1,paused:!1,stop:!1,controlNav:".om-slider-nav-classical"},e;r.data("omSlider",r).data("omSlider:vars",i).data("omSlider:opts",t).addClass("om-slider");t.startSlide>0&&(i.currentSlide=t.startSlide);e=r.children();e.wrapAll('<ul class="om-slider-content"><\/ul>').wrap('<li class="om-slider-item"><\/li>');(t.effect=="slide-v"||t.effect=="slide-h")&&r.find(".om-slider-content").addClass("om-slider-effect-"+t.effect);i.totalSlides=e.length;this._processControlNav(r);t.startSlide>0&&(t.effect=="slide-h"||t.effect=="slide-v")?n(window).load(function(){o(r,t.startSlide)}):o(r,t.startSlide)}})}(jQuery),function(n){var i="om-suggestion-list-row",t="om-state-hover";n.omWidget("om.omSuggestion",{options:{disabled:!1,readOnly:!1,minChars:1,delay:500,cacheSize:10,method:"GET",listMaxHeight:300,queryName:"key",crossDomain:!1,preProcess:function(n,t){return t},onBeforeSuggest:function(){},onSuggesting:function(){},onSuccess:function(){},onError:function(){},onSelect:function(){}},_create:function(){this.element.addClass("om-suggestion om-widget om-state-default om-state-nobg");this.dropList=n('<div class="om-widget"><div class="om-widget-content om-droplist"><\/div><\/div>').css({position:"absolute",zIndex:2e3}).appendTo(document.body).children().first().hide()},_init:function(){var u=this,t=this.options,f=this.element.attr("autocomplete","off"),r=this.dropList;t.minChars<0&&(t.minChars=0);t.cacheSize<0&&(t.cacheSize=0);t.delay<0&&(t.delay=0);t.disabled?this.disable():this.enable();t.readOnly?f.attr("readonly","readonly"):f.removeAttr("readonly");f.focus(function(){n(this).addClass("om-state-focus")}).blur(function(){n(this).removeClass("om-state-focus")}).keydown(function(t){t.keyCode==n.om.keyCode.TAB&&r.hide()}).keyup(function(e){var h=e.keyCode,o=n.om.keyCode,s;switch(h){case o.DOWN:r.css("display")!=="none"?u._selectNext():r.find("."+i).size()>0&&r.show();break;case o.UP:r.css("display")!=="none"?u._selectPrev():r.find("."+i).size()>0&&r.show();break;case o.ENTER:return r.css("display")==="none"?void 0:(r.hide(),u._triggerOnSelect(e),!1);case o.ESCAPE:r.hide();break;case o.TAB:break;default:if(t.disabled||t.readOnly)return!1;t.delay>0?(s=n.data(f,"delayTimer"),s&&clearTimeout(s),s=setTimeout(function(){u._suggest()},t.delay),n.data(f,"delayTimer",s)):u._suggest()}}).mousedown(function(n){n.stopPropagation()});r.mousedown(function(n){n.stopPropagation()});n(document).bind("mousedown.omSuggestion",this.globalEvent=function(){r.hide()})},clearCache:function(){n.removeData(this.element,"cache")},showMessage:function(t){var r=this.element,i=this.dropList.empty().css("height","auto"),u,f;return n("<div>"+t+"<div>").appendTo(i),i.parent().css("left",r.offset().left).css("top",r.offset().top+r.outerHeight()),u=this.options.listWidth,u?u!=="auto"&&i.parent().width(u):i.parent().width(r.outerWidth()),i.show(),f=this.options.listMaxHeight,f!=="auto"&&i.height()>f&&i.height(f).css("overflow","auto"),this},disable:function(){return this.options.disabled=!0,this.element.attr("disabled","disabled").addClass("om-state-disabled")},enable:function(){return this.options.disabled=!1,this.element.removeAttr("disabled").removeClass("om-state-disabled")},setData:function(n){var t=this.options;n&&(t.dataSource=n);t.cacheSize>0&&this.clearCache()},getData:function(){var t=n.data(this.element,"records");return t||null},getDropList:function(){return this.dropList},destroy:function(){n(document).unbind("mousedown.omSuggestion",this.globalEvent);this.dropList.parent().remove()},_clear:function(){return this.element.val(""),this.dropList.find("."+i).removeClass(t)},_selectNext:function(){var i=this.dropList,n=i.find("."+t).index(),r=this._clear();n+=1;n>=r.size()&&(n=0);this._scrollToAndSelect(r,n,i)},_selectPrev:function(){var i=this.dropList,n=i.find("."+t).index(),r=this._clear();n-=1;n<0&&(n=r.size()-1);this._scrollToAndSelect(r,n,i)},_scrollToAndSelect:function(i,r,u){var e,f,o;i.size()<1||(e=n(i.get(r)).addClass(t),f=e.position().top,f<=0?u.scrollTop(u.scrollTop()+f):(o=f+e.outerHeight()-u.height(),o>0&&u.scrollTop(u.scrollTop()+o)),this._select(r))},_select:function(t){var f=this.element,i=n.data(f,"records"),r,u;i.valueField?(r=i.data[t],u=r[i.valueField]):(r=i[t],u=r);f.val(u);n.data(f,"lastStr",u)},_suggest:function(){var r=this.element,t=r.val(),s=n.data(r,"lastStr"),i,e,f,u,o,h;if(!s||s!==t)if(n.data(r,"lastStr",t),i=this.options,e=n.data(r,"cache"),t.length>0&&t.length>=i.minChars){if(e&&(f=e[t],f)){n.data(r,"records",f);this._buildDropList(f,t);return}if(i.onBeforeSuggest&&this._trigger("onBeforeSuggest",null,t)===!1){this.dropList.empty().hide();return}u=this;o={url:i.dataSource,type:i.method,dataType:i.crossDomain?"jsonp":"json",data:{},success:function(f,e){var l=i.onSuccess,h,o,s,c;l&&u._trigger("onSuccess",null,f,e)===!1||(h=i.preProcess,h&&(f=h(t,f)),typeof f=="undefined"&&(f=[]),i.cacheSize>0&&(o=n.data(r,"cache")||{___keys:[]},s=o.___keys,s.length==i.cacheSize&&(c=s[0],o.___keys=s.slice(1),o[c]=undefined),o[t]=f,o.___keys.push(t),n.data(r,"cache",o)),n.data(r,"records",f),u._buildDropList(f,t))},error:function(n,t,r){var f=i.onError;f&&u._trigger("onError",null,n,t,r)}};o.data[i.queryName]=t;n.ajax(o);h=i.onSuggesting;h&&u._trigger("onSuggesting",null,t)}else this.dropList.empty().hide()},_buildDropList:function(r){var e=this.element,u=this.dropList.empty().css("height","auto"),l=r.valueField?!1:!0,o=this.options.clientFormatter,f=this,s,h,c;l?o?n(r).each(function(n){f._addRow(o(this,n),u)}):n(r).each(function(){f._addRow(this,u)}):o&&n(r.data).each(function(n){f._addRow(o(this,n),u)});s=u.find("."+i);s.size()>0&&(u.parent().css("left",parseInt(e.offset().left)).css("top",e.offset().top+e.outerHeight()),h=this.options.listWidth,h?h!=="auto"&&u.parent().width(h):u.parent().width(e.outerWidth()),s.mouseover(function(){s.removeClass(t);n(this).addClass(t)}).mousedown(function(n){var i=u.find("."+t).index();f._select(i);u.hide();f._triggerOnSelect(n)}),u.show(),c=this.options.listMaxHeight,c!=="auto"&&u.height()>c&&u.height(c).css("overflow","auto"),u.scrollTop(0))},_addRow:function(t,r){n('<div class="'+i+'">'+t+"<\/div>").appendTo(r)},_triggerOnSelect:function(i){var o=this.options.onSelect,r,u,f,e;if(o){if(r=this.dropList.find("."+t).index(),r<0)return;u=n.data(this.element,"records");u.valueField?(f=u.data[r],e=f[u.valueField]):(f=u[r],e=f);this._trigger("onSelect",i,f,e,r)}}})}(jQuery),function(){function u(n,t){return t.content&&$(n).html(t.content),$(n).omPanel(t)}function f(){return $.browser.msie&&parseInt($.browser.version)==7}var i="om-tabs-"+((1+Math.random())*65536|0).toString(16).substring(1)+"-",r=0,n="om-tabs-activated om-state-active",t="om-tabs-scroll-disabled";$.omWidget("om.omTabs",{options:{width:"auto",height:"auto",border:!0,tabWidth:"auto",tabHeight:27,scrollable:!0,distFactor:1,closable:!1,position:"top",switchMode:"click",autoPlay:!1,interval:1e3,active:0,lazyLoad:!1,tabMenu:!1,onBeforeActivate:function(){},onActivate:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeCloseAll:function(){},onCloseAll:function(){},onAdd:function(){},onBeforeAdd:function(){},onLoadComplete:function(){}},add:function(n){this._add(n)},close:function(n){this._close(n)},closeAll:function(){this._closeAll()},activate:function(n){this._activate(n)},getAlter:function(n){return this._getAlter(n)},getActivated:function(){return this._getActivated()},getLength:function(){return this._getLength()},setDataSource:function(n){n.index!==undefined&&(n.url||n.content)&&this._setDataSource(n)},reload:function(n,t,i){this._reload(n,t,i)},doLayout:function(){this._doLayout()},_create:function(){this._makeSketch();this._collectItems();this.history=[]},_init:function(){this._render();this._afterRender();this._buildEvent()},_makeSketch:function(){this.element.addClass("om-tabs om-widget om-widget-content om-corner-all").append('<div class="om-tabs-panels om-widget-content om-corner-bottom" />').find(">ul").wrap('<div class="om-tabs-headers om-helper-reset om-helper-clearfix om-widget-header om-corner-all" />');this.$menu=$("<div><\/div>").appendTo($("body"))},_collectItems:function(){var f=this,n=this.element,o=this.options,e=[],t=[];n.find(">div.om-tabs-headers a").each(function(){var s=this.getAttribute("href",2),a=s.split("#")[0],y,h,l,c,v,p;a&&(a===location.toString().split("#")[0]||(y=$("base")[0])&&a===y.href)&&(s=this.hash,this.href=s);h=$(this);l=h.attr("tabId")||h.attr("id")||i+r++;h.attr("tabId",l);c={tabId:l,title:h.text(),_closeMode:"visibility",header:!1,closed:!0,onSuccess:function(){f._trigger("onLoadComplete",null,c.tabId)},onError:function(){f._trigger("onLoadComplete",null,c.tabId)}};v=$(">"+s,n)[0];v||s.indexOf("#")==0||(o.lazyLoad===!1?c.url=s:t.push({tabId:l,url:s,loaded:!1}));p=new u(v||$("<div><\/div>")[0],c);e.push(p)});$ul=n.find(">div.om-tabs-headers ul");$ul.prepend($('<span class="left-placeholder"><\/span>'));$ul.append($('<span class="right-placeholder"><\/span>'));t.length>0&&(this.loadInfo=t);this.items=e},_render:function(){var i=this,t=this.element,n=this.options,u=this.items,e=t.find(">div.om-tabs-headers"),f,r;typeof n.active=="number"&&(n.active<0&&(n.active=0),n.active>u.length-1&&(n.active=u.length-1));n.border!==!1&&t.children(":first").addClass("header-no-border");n.width=="fit"?t.outerWidth(t.parent().width()):n.width!="auto"&&(t.css("width",n.width),f=isNaN(n.width)&&n.width.indexOf("%")!=-1,t.children(":first").outerWidth(f?"100%":n.width));n.height=="fit"?t.outerHeight(t.parent().height()):n.height!="auto"&&t.css("height",n.height);n.closable&&n.tabMenu&&$.fn.omMenu&&(r=t.attr("id"),this.menu=this.$menu.omMenu({contextMenu:!0,dataSource:[{id:r+"_001",label:"关闭"},{id:r+"_002",label:"关闭其它"},{id:r+"_003",label:"关闭所有"}],onSelect:function(n){n.id==r+"_001"?i.close(i.getAlter($(i.$currentLi).find("a.om-tabs-inner").attr("tabid"))):n.id==r+"_002"?e.find("ul li").each(function(n,t){var u=$(i.$currentLi).find("a.om-tabs-inner").attr("tabid"),r=$(t).find("a.om-tabs-inner").attr("tabid");u!==r&&i.close(i.getAlter(r))}):n.id==r+"_003"&&i.closeAll()}}));this._renderHeader();this._renderBody()},_renderHeader:function(){var u=this.element,t=this.options,r=this.history,i;$headers=u.find(">div.om-tabs-headers");$ul=$headers.find(">ul");$lis=$ul.find(">li");$lis.addClass("om-state-default om-corner-top");$lis.each(function(i){var u=$(this).find("a:first");f()&&u.attr("hideFocus","true");u.addClass("om-tabs-inner");i===t.active||t.active===u.attr("tabId")?($(this).addClass(n),t.activeTabId=u.attr("tabId"),t.active=i,$.inArray(t.activeTabId,r)||r.push(t.activeTabId)):$(this).removeClass(n);u.css({width:t.tabWidth,height:t.tabHeight});$('<span class="lileft"><\/span>').insertBefore(u);t.closable===!0||$.isArray(t.closable)&&-1!==$.inArray(i,t.closable)?(u.next(".om-icon-close").length<=0&&$('<a class="om-icon om-icon-close"><\/a>').insertAfter(u),$('<span class="liright"><\/span>').insertAfter(u.next(".om-icon-close"))):(u.next().remove(),$('<span class="liright"><\/span>').insertAfter(u))});i=$lis.find("a.om-tabs-inner").height();i||(i=27);$ul.css({height:++i,"line-height":i+"px"});$headers.height(i);this._checkScroller()&&this._enableScroller()},_renderBody:function(){var t=this.element,r=this.options,f=this.items,n=t.find(">div.om-tabs-panels"),i,e,o,u;for(n.children().detach(),i={},r.height!=="auto"&&(e=t.innerHeight(),o=t.find(">div.om-tabs-headers").outerHeight(),n.css("height",e-o),i.height=n.height()),r.width!=="auto"&&(i.width=n.width()),t.toggleClass("om-tabs-noborder",!r.border),u=f.length;u--;)f[u].addClass("om-state-nobd").omPanel("resize",i).parent().prependTo(n)},_afterRender:function(){var t=this.element,i=this.options,r=this.items,u=r.length,n;if(t.children().each(function(){$(this).is(".om-tabs-headers,.om-tabs-panels")||$(this).remove()}),i.lazyLoad){var n=$(r[i.active]),f=n.omPanel("option","tabId"),e=this._getUnloadedUrl(f);n.omPanel("open");n.omPanel("reload",e);this._removeLoadInfo(f)}else $(r).omPanel("reload");while(u--)n=$(r[u]),u==i.active?n.omPanel("open"):n.omPanel("close");t.css("height",t.height());t.css("height",i.height)},_buildEvent:function(){var t=this,i=this.element,n=this.options,f=i.find(">div.om-tabs-headers a.om-icon-close"),r;if(f.unbind("click.omtabs").bind("click.omtabs",function(n){var i=$(n.target).prev().attr("tabId");return t._close(i),!1}),r=i.find(">div.om-tabs-headers a.om-tabs-inner"),n.switchMode.indexOf("mouseover")!=-1?r.bind("mouseover.omtabs",function(){var r=$(this).attr("tabId"),n=$.data(i,"activateTimer");typeof n!="undefined"&&clearTimeout(n);n=setTimeout(function(){return t._activate(r),!1},100);$.data(i,"activateTimer",n)}):n.switchMode.indexOf("click")!=-1&&r.bind("click.omtabs",function(){t._activate($(this).attr("tabId"))}),r.bind("click.omtabs",function(){return!1}),n.autoPlay!=!1?n.autoInterId=setInterval(function(){i.omTabs("activate","next")},n.interval):clearInterval(n.autoInterId),n.switchMode.indexOf("mouseover")==-1){var u=i.find(">div.om-tabs-headers li"),e=function(n,t){t.is(":not(.om-state-disabled)")&&t.addClass("om-state-"+n)},o=function(n,t){t.removeClass("om-state-"+n)};u.bind("mouseover.omtabs",function(){e("hover",$(this))});u.bind("mouseout.omtabs",function(){o("hover",$(this))});n.closable&&n.tabMenu&&u.each(function(n,i){$(i).bind("contextmenu",function(n){$.fn.omMenu&&(t.$currentLi=this,$(t.menu).omMenu("show",n))})})}i.find(">div.om-tabs-headers >span").bind("click.omtabs",function(){if($(this).hasClass("om-tabs-scroll-disabled"))return!1;var i=$(this).parent().find("ul").children("li:last").outerWidth(!0)*n.distFactor;return $(this).hasClass("om-tabs-scroll-left")&&t._scroll(i,t._scrollCbFn()),$(this).hasClass("om-tabs-scroll-right")&&t._scroll(-i,t._scrollCbFn()),!1})},_purgeEvent:function(){var i=this.element,n=this.options,t=i.find(">div.om-tabs-headers");t.children().unbind(".omtabs");t.find(">ul >li >a").unbind(".omtabs");n.autoInterId&&clearInterval(n.autoInterId)},_activate:function(t){var l=this.element,u=this.options,f=this.items,a,s=l.find(">div.om-tabs-headers ul"),h,i,r,e,o,c;if(u.activeTabId===t||u.active===t||(t=t||0,i=t,t=="next"?t=(u.active+1)%f.length:t=="prev"&&(t=(u.active-1)%f.length),typeof t=="number"?i=this._getAlter(t):typeof t=="string"&&(t=this._getAlter(t)),u.onBeforeActivate&&this._trigger("onBeforeActivate",null,t)===!1))return!1;for(h=s.find("li a[tabId="+i+"]"),h.parent().addClass(n).siblings().removeClass(n),u.activeTabId=i,u.active=t,r=f.length,r=f.length;r--;r>=0)e=f[r],e.omPanel("option","tabId")==i&&(e.omPanel("open"),(a=this._getUnloadedUrl(i))&&(e.omPanel("reload",a),this._removeLoadInfo(i)));for(r=f.length;r--;r>=0)e=f[r],e.omPanel("option","tabId")!=i&&e.omPanel("close");if(this._checkScroller()){s.stop(!0,!0);l.clearQueue();var v=s.prev(),b=s.next(),y=h.parent().offset().left,k=y+h.parent().outerWidth(!0),p=v.offset().left+v.outerWidth(!0)+4-y,w=b.offset().left-k;p>=0?this._scroll(p,this._scrollCbFn()):w<=0?this._scroll(w,this._scrollCbFn()):this._scrollCbFn()()}o=this.history;c=$.inArray(i,o);c===-1?o.push(i):o.push(o.splice(c,1)[0]);u.onActivate&&this._trigger("onActivate",null,t)},_getUnloadedUrl:function(n){var t=this.loadInfo;for(var i in t)if(t[i].tabId===n&&t[i].loaded===!1)return t[i].url;return null},_removeLoadInfo:function(n){var t=this.loadInfo,i,r;if(t)for(i=t.length;r=t[--i];)if(r.tabId===n){t.splice(i,1);break}},_addLoadInfo:function(n,t){this.loadInfo.push({tabId:n,loaded:!1,url:t})},_getAlter:function(n){var i=this.element,t;return typeof n=="number"?t=i.find(">div.om-tabs-headers li:eq("+n+") a.om-tabs-inner").attr("tabId"):typeof n=="string"&&i.find(">div.om-tabs-headers li a.om-tabs-inner").each(function(i){if($(this).attr("tabId")==n)return t=i,!1}),t===undefined?null:t},_getActivated:function(){return this.options.activeTabId},_add:function(n){var s=this,a=this.element,e=this.options,h=this.items,c=a.find(">div.om-tabs-headers ul"),t=n.tabId?n.tabId:i+r++,l,o,p,w;if(n.index=n.index||"last",(n.index=="last"||n.index>h.length-1)&&(n.index=h.length),n.title=n.title||"New Title "+t,n.url=$.trim(n.url),n.content=$.trim(n.content),n.url?n.content=undefined:(n.url=undefined,n.content=n.content||"New Content "+t),e.onBeforeAdd&&s._trigger("onBeforeAdd",null,n)==!1)return!1;l=$('<li class="om-state-default om-corner-top"> <\/li>');o=$('<a class="om-tabs-inner"><\/a>').html(n.title).attr({href:"#"+t,tabId:t}).css({width:e.tabWidth,height:e.tabHeight}).appendTo(l);$('<span class="lileft"><\/span>').insertBefore(o);f()&&o.attr("hideFocus","true");n.closable===!0||n.closable==undefined&&e.closable?(o.after('<a class="om-icon om-icon-close"><\/a>'),$('<span class="liright"><\/span>').insertAfter(o.next(".om-icon-close"))):$('<span class="liright"><\/span>').insertAfter(o);var v={tabId:t,title:o.text(),_closeMode:"visibility",header:!1,closed:!0,onSuccess:function(){s._trigger("onLoadComplete",null,t)},onError:function(){s._trigger("onLoadComplete",null,t)}},y={},b=a.find(">div.om-tabs-panels");e.width!=="auto"&&(y.width=b.width());e.height!=="auto"&&(y.height=b.height());$.extend(v,n,y);n.url&&(e.lazyLoad||n.lazyLoad)&&(s.loadInfo||(s.loadInfo=[]),s.loadInfo.push({tabId:t,url:n.url,loaded:!1}),v.url=null);p=new u($("<div>"+(n.content||"")+"<\/div>")[0],v);n.index==h.length?(h[n.index]=p,l.insertBefore(c.find("span.right-placeholder"))):(h.splice(n.index,0,p),c.find(">li").eq(n.index).before(l));c.innerWidth()-l.position().left<500&&c.width(c.width()+500);this._checkScroller()&&this._enableScroller();w=h[n.index].addClass("om-state-nobd").parent();n.index>0?w.insertAfter(a.find(">div.om-tabs-panels").children().eq(n.index-1)):a.find(">div.om-tabs-panels").append(w);this._purgeEvent();this._buildEvent();this._trigger("onAdd",null,v);n.activateNew===!1||this._activate(n.index)},_close:function(n){var u=this.element,t=this.options,e=this.items,o=u.find(">div.om-tabs-headers"),f=u.find(">div.om-tabs-panels"),h=u.height(),s=n,i=this.history,r;if(n=n===undefined?t.active:n,typeof n=="string"?n=this._getAlter(n):s=this._getAlter(n),t.onBeforeClose&&this._trigger("onBeforeClose",null,n)==!1)return!1;for(this._removeLoadInfo(this._getAlter(n)),o.find("li").eq(n).remove(),f.children().find(">.om-panel-body").eq(n).empty().remove(),e.splice(n,1),f.children().length==0&&f.css({height:h-o.outerHeight()}),r=i.length-1;r>=0;r--)if(s===i[r]){i.splice(r,1);break}if(t.onClose&&this._trigger("onClose",null,n),e.length==0){t.active=-1;t.activeTabId=null;return}n==t.active?(t.active=-1,this._activate(i.length>0?i.pop():0)):(n<t.active&&t.active--,this._checkScroller()&&this._enableScroller())},_closeAll:function(){var r=this.element,n=this.options,t=this.items,u=r.find(">div.om-tabs-headers"),f=r.find(">div.om-tabs-panels"),o=r.height(),i,e;if(n.onBeforeCloseAll&&this._trigger("onBeforeCloseAll")===!1)return!1;for(i=0,e=t.length;i<e;i++)this._removeLoadInfo(t[i].omPanel("option","tabId"));u.find("li").remove();f.empty();t.splice(0,t.length);f.css({height:o-u.outerHeight()});n.active=-1;n.activeTabId=null;this.history=[];n.onCloseAll&&this._trigger("onCloseAll")},_checkScroller:function(){var i=this.element,r=this.options,n,t;return r.scrollable?(n=i.find(">div.om-tabs-headers ul"),t=4,n.children().each(function(){t+=$(this).outerWidth(!0)}),t>n.parent().innerWidth()?(n.hasClass("om-tabs-scrollable")||($("<span><\/span>").insertBefore(n).addClass("om-tabs-scroll-left"),$("<span><\/span>").insertAfter(n).addClass("om-tabs-scroll-right"),n.addClass("om-tabs-scrollable")),!0):(n.removeClass("om-tabs-scrollable").siblings().remove(),!1)):!1},_scrollCbFn:function(){var n=this;return function(){n._enableScroller()}},_enableScroller:function(){var i=this.element.find(">div.om-tabs-headers"),n=i.children("ul"),f=n.prev(),r=n.next(),u=n.children(":last"),e=i.offset().left,o=r.offset().left,s=n.offset().left,h=u.offset().left+u.outerWidth(!0);f.toggleClass(t+" om-tabs-scroll-disabled-left",s>=e);r.toggleClass(t+" om-tabs-scroll-disabled-right",h<=o)},_scroll:function(n,i){var r=this,u,f;($self=this.element,$ul=$self.find(">div.om-tabs-headers ul"),$li=$ul.children(":last"),n!=0)&&(u=n>0?$ul.prev().offset():$ul.next().offset(),f=function(f){if(n>0&&$ul.prev().hasClass(t)||n<0&&$ul.next().hasClass(t)){$ul.stop(!0,!0);$self.clearQueue();return}n=n>0?"+="+Math.min(u.left-$ul.offset().left,n):"-="+Math.min($li.offset().left+$li.outerWidth(!0)-u.left,Math.abs(n));r.isScrolling=!0;$ul.animate({left:n+"px"},"normal","swing",function(){!i||i();r.isScrolling=!1;f()})},$self.queue(f),$self.queue().length!=1||r.isScrolling||$self.dequeue())},_getLength:function(){return this.items.length},_doLayout:function(){this._checkScroller()&&this._enableScroller()},_setDataSource:function(n){var t=this.items,r=this.options,i=this._getAlter(n.index);n.url=$.trim(n.url);n.content=$.trim(n.content);n.url?r.lazyLoad!==!1?(this._addLoadInfo(i,n.url),t[n.index].omPanel("option","url",n.url)):(this._removeLoadInfo(i),t[n.index].omPanel("reload",n.url)):t[n.index].html(n.content)},_reload:function(n,t,i){var r=this.items,u=this._getAlter(n);t?(this._removeLoadInfo(u),r[n].omPanel("reload",t)):i?r[n].html(i):(r[n].omPanel("reload",this._getUnloadedUrl(u)),this._removeLoadInfo(u))}})}(jQuery),function(n){n.omWidget("om.omTooltip",{options:{width:"auto",minWidth:null,maxWidth:null,height:"auto",maxHeight:null,minHeight:null,delay:300,anchor:!1,trackMouse:!1,showOn:"mouseover",lazyLoad:!1,url:null,offset:[5,5],anchorOffset:0,region:null,html:null,contentEL:null},_create:function(){this.tipContent=n('<div class="tip-body"><\/div>');this.tipAnchor=n('<div class="tip-anchor"><\/div>');this.regionMap={right:"left",top:"bottom",left:"right",bottom:"top"};this.tip=n('<div class="tip"><\/div>').append(this.tipContent)},_init:function(){var i=this,t=i.options,r;this.tipContent.empty();this.tip.find("div.tip-anchor").remove();t.anchor&&i.tip.append(i.tipAnchor);i.adjustWidth=6;i.adjustHeight=6;t.width!="auto"?this.tip.css("width",t.width-i.adjustWidth):this.tip.css("width","auto");t.height!="auto"?this.tip.css("height",t.height-i.adjustHeight):this.tip.css("height","auto");t.minWidth&&this.tip.css("minWidth",t.minWidth-i.adjustWidth);t.maxWidth&&this.tip.css("maxWidth",t.maxWidth-i.adjustWidth);t.maxHeight&&this.tip.css("maxHeight",t.maxHeight-i.adjustHeight);t.minHeight&&this.tip.css("minHeight",t.minHeight-i.adjustHeight);t.url&&!t.lazyLoad?i._ajaxLoad(t.url):t.html?this.tip.find(".tip-body").append(t.html):(r=n(t.contentEL).clone(),n(t.contentEL).remove(),this.tip.find(".tip-body").append(r.show()));this._bindEvent()},_ajaxLoad:function(t){var i=this;n.ajax({url:t,method:"POST",dataType:"html",success:function(n){i.tip.find(".tip-body").append(n)},error:function(){i.tip.find(".tip-body").append(n.om.lang.omTooltip.FailedToLoad)}})},_bindEvent:function(){var n=this,t=n.options,i=n.element;t.showOn=="mouseover"?i.bind("mouseover.tooltip",function(i){n.showTime&&clearTimeout(n.showTime);n.showTime=setTimeout(function(){n.show(i)},t.delay)}):t.showOn=="click"&&(n.showTime=i.bind("click.tooltip",function(i){setTimeout(function(){n.show(i)},t.delay)}));t.trackMouse&&i.bind("mousemove.tooltip",function(t){n._adjustPosition(t)});i.bind("mouseleave.tooltip",function(){n.showTime&&clearTimeout(n.showTime);n.hideTime=setTimeout(function(){n.hide()},t.delay)});n.tip.bind("mouseover.tooltip",function(){n.hideTime&&clearTimeout(n.hideTime)}).bind("mouseleave.tooltip",function(){setTimeout(function(){n.hide()},t.delay)})},show:function(t){var i=this,r=i.options;n(document.body).find(i.tip).length<=0?(r.url&&r.lazyLoad&&i._ajaxLoad(r.url),i.tip.appendTo(document.body).fadeIn(),i._adjustPosition(t)):(i._adjustPosition(t),i.tip.fadeIn())},_adjustPosition:function(t){var i=this,r=i.options,e=i.element,u,f,o=n(e).offset(),s;t&&!r.region?(u=t.pageY+r.offset[0],f=t.pageX+r.offset[1],i.tip.find(".tip-anchor").css({top:r.anchorOffset+3,left:"-9px"}).addClass("tip-anchor-left")):(s=parseInt(n(e).css("borderBottomWidth").replace("px","")),u=o.top+n(e).height()+(isNaN(s)?0:s)+r.offset[0],f=o.left+r.offset[1],r.region=="right"?(f=o.left+r.offset[1]+n(e).width()+i.adjustWidth,u=u-i.element.height()+i.adjustHeight+r.offset[0],i.tip.find(".tip-anchor").css({top:r.anchorOffset+3,left:"-9px"})):r.region=="left"?(f=o.left-i.tip.width()-i.adjustWidth-r.offset[1]-2,u=u-i.element.height()-i.adjustHeight-r.offset[0],i.tip.find(".tip-anchor").css({top:r.anchorOffset+3,left:i.tip.outerWidth()-2})):r.region=="top"?(u=u-(i.element.height()+i.tip.height()+i.adjustHeight+2)-r.offset[0],f=f+r.offset[1],i.tip.find(".tip-anchor").css({top:i.tip.outerHeight()-3,left:r.anchorOffset+3})):r.region=="bottom"&&(u=u+r.offset[0],f=f+r.offset[1],i.tip.find(".tip-anchor").css({top:-9,left:r.anchorOffset+3})),i.tip.find(".tip-anchor").addClass("tip-anchor-"+i.regionMap[r.region]));f+i.tip.width()-n(document).scrollLeft()>document.documentElement.clientWidth&&(f=f-i.tip.width()-20);u+i.tip.height()-n(document).scrollTop()>document.documentElement.clientHeight&&(u=u-(i.element.height()+i.tip.height())-20);i.tip.css({top:u-n(document).scrollTop(),left:f-n(document).scrollLeft()})},hide:function(){this.tip.hide()},destroy:function(){clearTimeout(this.showTime);clearTimeout(this.hideTime);this.element.unbind(".tooltip");this.tip.remove()}});n.om.lang.omTooltip={FailedToLoad:"加载提示信息出错！"}}(jQuery),function(n){var t={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};n.omWidget("om.omTree",{_swapClass:function(n,t,i){var r=n.filter("."+t);n.filter("."+i).removeClass(i).addClass(t);r.removeClass(t).addClass(i)},_getParentNode:function(t){if(t){var i=n(t).parent().parent();if(i&&i.hasClass("om-tree-node"))return i}return null},_setParentCheckbox:function(n){var t=this._getParentNode(n);if(t){var i=t.find(">ul >li >div.tree-checkbox"),f=i.length,u=i.filter(".checkbox_full").length,e=i.filter(".checkbox_part").length,r=t.find(">div.tree-checkbox");r.removeClass("checkbox_full checkbox_part");u==f?r.addClass("checkbox_full"):(u>0||e>0)&&r.addClass("checkbox_part");this._setParentCheckbox(t)}},_setChildCheckbox:function(n,t){var i=n.find(">ul").find(".tree-checkbox");i.removeClass("checkbox_part checkbox_full");t&&i.addClass("checkbox_full")},_applyEvents:function(t){var i=this,r=i.options,u=r.onClick,f=r.onDblClick,e=r.onRightClick,o=r.onDrag,s=r.onDrop;t.find("span").bind("click",function(t){var r=i.element.data("nodes")[n(this).parent().attr("id")];return u&&i._trigger("onClick",t,r),i.select(r),!1}).bind("dblclick",function(t){var r=n(this).parent(),u=i.element.data("nodes")[r.attr("id")];r.hasClass("hasChildren")&&r.find("span.folder").removeClass("folder").addClass("placeholder");r.has("ul").length>0&&n(t.target,this)&&i.toggler(r);r.find("span.placeholder").removeClass("placeholder").addClass("folder");f&&i._trigger("onDblClick",t,u)}).bind("contextmenu",function(t){var r=i.element.data("nodes")[n(this).parent().attr("id")];e&&i._trigger("onRightClick",t,r)}).bind("mouseover mouseout",function(t){return t.type=="mouseover"?n(this).addClass("hover"):t.type=="mouseout"&&n(this).removeClass("hover"),!1});i._bindHitEvent(t);t.find("div.tree-checkbox").click(function(){var t=n(this).parent(),r=i.findByNId(t.attr("id"));i._toggleCheck(t,i.isCheck(r))});i.options.draggable&&(t.omDraggable({revert:"invalid",onStart:function(n,t){var r=i.findByNId(n.helper.attr("id"));o&&i._trigger("onDrag",t,r)}}),t.omDroppable({greedy:!0,accept:"li.om-tree-node",onDragOver:function(){var i=t.filter(".treenode-droppable");i.length>0?i.removeClass("treenode-droppable"):n(this).addClass("treenode-droppable")},onDragOut:function(){n(this).removeClass("treenode-droppable")},onDrop:function(t,r){var o=null,h=null,u=t,c=this,f,e,l;n(this).removeClass("treenode-droppable");u.css("left","");u.css("top","");f=i.findByNId(c.attr("id"));e=i.findByNId(u.attr("id"));c.has("ul").length>0?o=f:(h=f,e.pid=f.pid);l=i.findByNId(u.parent().find("li").attr("id"));i.remove(e);i.insert(e,o,h,!0);s&&i._trigger("onDrop",r,l)}}));t.bind("mousedown",function(n){n.stopPropagation()})},_bindHitEvent:function(t){var i=this;t.find("div.hitarea").click(function(){var t=n(this).parent();t.hasClass("hasChildren")&&t.find("span.folder").removeClass("folder").addClass("placeholder");i.toggler(t);t.find("span.placeholder").removeClass("placeholder").addClass("folder")})},options:{initExpandLevel:0,lineHover:!1,showIcon:!0,showLine:!0,showCheckbox:!1,cascadeCheck:!0,draggable:!1,filter:null,nodeCount:0,simpleDataModel:!1},_create:function(){this.element.data("nodes",[]).data("selected","").data("init_dataSource",[]).addClass("om-tree om-widget")},updateNode:function(n){var t=this,i=t.options,r=n.find("li");t._applyEvents(r);i.control&&t._treeController(t,i.control)},toggler:function(i){var r=this,u=r.options,c=i.attr("id"),f=r.findByNId(c),o=i.hasClass(t.expandable),s,h,e;if(o){if(s=u.onBeforeExpand,s&&!1===r._trigger("onBeforeExpand",null,f))return r}else if(h=u.onBeforeCollapse,h&&!1===r._trigger("onBeforeCollapse",null,f))return r;e=i.find(i.find(">.hitarea"));r._swapClass(e,t.collapsableHitarea,t.expandableHitarea);r._swapClass(e,t.lastCollapsableHitarea,t.lastExpandableHitarea);r._swapClass(i,t.collapsable,t.expandable);r._swapClass(i,t.lastCollapsable,t.lastExpandable);i.find(">ul").each(function(){var t,i;o?(n(this).show(),t=u.onExpand,t&&r._trigger("onExpand",null,f)):(n(this).hide(),i=u.onCollapse,i&&r._trigger("onCollapse",null,f))})},_init:function(){var t=this,r=t.options,i=t.element,n=r.dataSource;i.empty();n&&(typeof n=="string"?t._ajaxLoad(i,n):typeof n=="object"&&(r.simpleDataModel&&(n=t._transformToNodes(n)),i.data("init_dataSource",n),t._appendNodes.apply(t,[i,n]),t.updateNode(i)))},_ajaxLoad:function(t,i){var r=this,u=this.options,f=u.onBeforeLoad,e=u.onSuccess,o=u.onError;f&&r._trigger("onBeforeLoad",null,r.findByNId(t.parent().attr("id")));n.ajax({url:i,method:"POST",dataType:"json",cache:!1,success:function(n){u.simpleDataModel&&(n=r._transformToNodes(n));t.data("init_dataSource",n);r._appendNodes.apply(r,[t,n]);r.updateNode(t);e&&r._trigger("onSuccess",null,n)},error:function(n,t,i){o&&r._trigger("onError",null,n,t,i)}})},check:function(t){this._toggleCheck(n("#"+t.nid),!1)},uncheck:function(t){this._toggleCheck(n("#"+t.nid),!0)},_toggleCheck:function(n,t){var r=n.find(">div.tree-checkbox"),i=this,u=i.options,f=u.onCheck;t?r.removeClass("checkbox_part checkbox_full"):r.removeClass("checkbox_part").addClass("checkbox_full");i.options.cascadeCheck&&(i._setChildCheckbox(n,!t),i._setParentCheckbox(n));f&&i._trigger("onCheck",null,i.findByNId(n.attr("id")))},checkAll:function(n){n?this.element.find(".tree-checkbox").removeClass("checkbox_part").addClass("checkbox_full"):this.element.find(".tree-checkbox").removeClass("checkbox_part checkbox_full")},isCheck:function(t){return n("#"+t.nid).find(">div.tree-checkbox").hasClass("checkbox_full")},getChecked:function(t){var i=this,r=[],u=t?".checkbox_full":":not(.checkbox_full)";return i.element.find(".tree-checkbox").filter(u).each(function(){r.push(i.element.data("nodes")[n(this).parent().attr("id")])}),r},select:function(t){var i=this,e=this.options,o=e.onBeforeSelect,s=e.onSelect,u,r,f;if(o&&!1===i._trigger("onBeforeSelect",null,t))return i;u=n("#"+t.nid);n(" >span",u).addClass("selected");r=i.element.data("selected");f=u.attr("id");r==""||r==f||n("#"+r+" >span").removeClass("selected");i.element.data("selected",f);s&&i._trigger("onSelect",null,t)},unselect:function(t){var i=n("#"+t.nid),r,u;n(" >span",i).removeClass("selected");r=this.element.data("selected");u=i.attr("id");r==u&&this.element.data("selected","")},getSelected:function(){var n=this.element.data("selected");return n?this.element.data("nodes")[n]:null},findNodes:function(n,t,i,r){var u=[],o,e=i?i.children:this.element.data("init_dataSource"),f;if(r=r!=!1?!0:r,e&&(o=e.length)>0)for(f=0;f<o;f++)u=this._searchNode.apply(e[f],[n,t,this._searchNode,u,!1,r]);return u.length>0?u:null},findNode:function(n,t,i,r){var f,o,e=i?i.children:this.element.data("init_dataSource"),u;if(r=r!=!1?!0:r,e&&(o=e.length)>0)for(u=0;u<o;u++)if(f=this._searchNode.apply(e[u],[n,t,this._searchNode,[],!0,r]),f!=null)return f;return null},findByNId:function(n){return this.element.data("nodes")[n]||null},findNodesBy:function(n,t,i){var e,u=t?t.children:this.element.data("init_dataSource"),f,r;if(i=i!=!1?!0:i,f=[],u&&(len=u.length)>0)for(r=0;r<len;r++)n.call(u[r],u[r])===!0&&f.push(u[r]),i&&u[r].children&&(e=this.findNodesBy(n,u[r],i),e&&(f=f.concat(e)));return f.length>0?f:null},findNodeBy:function(n,t,i){var f,r=t?t.children:this.element.data("init_dataSource"),u,e;if(i=i!=!1?!0:i,r&&(e=r.length)>0)for(u=0,e=r.length;u<e;u++){if(n.call(r[u],r[u])===!0)return r[u];if(i&&(f=this.findNodeBy(n,r[u],i),f!=null))return f}return null},_searchNode:function(t,i,r,u,f,e){var s,o;if(f){if(this[t]==i)return this;if(this.children&&this.children.length&&e)for(s in this.children)if(o=r.apply(this.children[s],[t,i,r,[],!0,e]),o)return o}else return this[t]==i&&u.push(this),this.children&&this.children.length&&e&&n.each(this.children,r,[t,i,r,u,!1,e]),u},getParent:function(n){var t=this.element.data("nodes")["pid"+n.nid];return t?this.findByNId(t):null},getChildren:function(n){return n.children},getData:function(){return this.options.dataSource},setData:function(n){this.options.dataSource=n},expand:function(i){if(i.nid){var r=t.expandable,u=n("#"+i.nid),f=n(">div."+t.hitarea,u).filter(function(){return r?n(this).parent("."+r).length:!0}).parent().parentsUntil(this.element).andSelf().filter(function(){return n(this).filter("li").hasClass(r)});this.toggler(f)}},collapse:function(i){i.nid&&this._collapseHandler(t.collapsable,n("#"+i.nid))},expandAll:function(){this._collapseHandler(t.expandable,this.element,!0)},collapseAll:function(){this._collapseHandler(t.collapsable,this.element,!0)},_collapseHandler:function(i,r,u){var f=(u?"":">")+"div."+t.hitarea;this.toggler(n(f,r).filter(function(){return i?n(this).parent("."+i).length:!0}).parent())},refresh:function(t){var i=this,f=i.element,r=i.getData(),u,e,o,s;if(t)o=n("#"+t.nid).next(),s=f.data("nodes")["pid"+t.nid],i.remove(t),i.insert(t,i.findByNId(s),i.findByNId(o.attr("id")));else if(f.empty(),typeof r=="string")i._ajaxLoad(f,r);else if(typeof r=="object")for(i.setData([]),u=0,e=r.length;u<e;u++)i.insert(r[u])},_transformToNodes:function(n){var t,r,f,i,u;if(!n)return[];for(f=[],i=[],t=0,r=n.length;t<r;t++)i[n[t].id]=n[t];for(t=0,r=n.length;t<r;t++)i[n[t].pid]?(u=n[t].pid,i[u].children||(i[u].children=[]),i[u].children.push(n[t])):f.push(n[t]);return f},_appendNodes:function(i,r,u,f){var s=this,o=[],b=s.options.showCheckbox,k=s.element.attr("id")?s.element.attr("id"):"treeId"+parseInt(Math.random()*1e3),c,d,v,p,y,w,l;for(s.element.attr("id",k),c=0,d=r.length;c<d;c++){var e=r[c],a=c==r.length-1,h="om-tree-node "+(b?"treenode-checkable ":"")+(e.hasChildren?"hasChildren ":""),g=k+"_"+ ++s.options.nodeCount;e.nid=g;v=s.element.data("nodes");v[e.nid]=e;typeof i=="string"?(v["pid"+e.nid]=i,a&&(i=null)):v["pid"+e.nid]=i.parent("li").attr("id");p=[];e.children&&e.children.length>0&&p.push(s._appendNodes(e.nid,e.children).join(""));y=0;h=e.children&&(y=e.children.length)>0||e.hasChildren?e.expanded?h+"open "+t.collapsable+" "+(a?t.lastCollapsable:""):h+t.expandable+" "+(a?t.lastExpandable:""):h+(a?t.last:"");o.push("<li id='",e.nid,"' class='",h,"'>");(e.hasChildren||y>0)&&(w="",n.each(h.split(" "),function(){w+=this+"-hitarea "}),o.push("<div class='",t.hitarea+" "+w,"'/>"));b&&o.push("<div class='tree-checkbox'/>");l=e.classes?e.classes:"";s.options.showIcon&&(l=e.hasChildren||e.children&&e.children.length>0?l+" folder ":l+" file ");o.push("<span class='",l,"'>","<a href='#'>",e.text,"<\/a><\/span>");(e.hasChildren||y>0)&&(o.push("<ul"," style='display:",e.expanded?"block":"none","'>"),o.push(p.join("")),o.push("<\/ul>"));o.push("<\/li>")}return u?f?n("#"+u.nid).after(o.join("")):n("#"+u.nid).before(o.join("")):i&&i.append(o.join("")),o},remove:function(i,r){var c,f=this,o=r?r.children:f.element.data("init_dataSource"),s,e,h,l,u;for(s in o){if(o[s]==i){for(e=[],e=f._findChildrenId(i,e),e.push(i.nid),h=0,l=e.length;h<l;h++)delete f.element.data("nodes")[e[h]],delete f.element.data("nodes")["pid"+e[h]];return i.nid==f.element.data("selected")&&this.element.data("selected",null),u=n("#"+i.nid).prev(),n("#"+i.nid).next().length<1&&u.length>0&&(u.hasClass(t.collapsable)?(u.addClass(t.lastCollapsable),u.find("div.hitarea").first().addClass(t.lastCollapsableHitarea)):u.hasClass(t.expandable)?(u.addClass(t.lastExpandable),u.find("div.hitarea").first().addClass(t.lastExpandableHitarea)):u.addClass(t.last)),n("#"+i.nid).remove(),o.splice(s,1),r&&r.nid&&o.length<1&&f._changeToFolderOrFile(r,!1),!0}if(o[s].children&&(c=f.remove(i,o[s]),c))return!0}return!1},_findChildrenId:function(n,t){if(n.children)for(var i=0,r=n.children,u=r.length;i<u;i++)t.push(r[i].nid),r[i].children&&this._findChildrenId(r[i],t);return t},insert:function(i,r,u,f){var v,s,c,y;if(i){var e=this,h=[],o,l,a=n.isArray(i);a?h=i:h.push(i);u&&(r=r||e.findByNId(e.element.data("nodes")["pid"+u.nid]));s=r?r.children:e.element.data("init_dataSource");r&&(!r.children||r.children.length<1)&&(r.hasChildren||(e._changeToFolderOrFile(r,!0),e._bindHitEvent(n("#"+r.nid))),s=r.children=[]);o=r?n("#"+r.nid).children("ul").first():e.element;l=o.find("li");u&&(v=n.inArray(u,s))>=0?(e._appendNodes(o,h,u,f),s.splice(v,0,i)):(e._appendNodes(o,h,u,f),a?n.merge(s,i):s.push(i));c=o.find("li").filter("."+t.last+",."+t.lastCollapsable+",."+t.lastExpandable).not(o.find("li").filter(":last-child:not(ul)"));c.removeClass(t.last+" "+t.lastCollapsable+" "+t.lastExpandable);c.find(" >div").removeClass(t.lastCollapsableHitarea+" "+t.lastExpandableHitarea);y=o.find("li").not(l);e._applyEvents(y)}},_changeToFolderOrFile:function(i,r){var u=n("#"+i.nid),f=this,o,e;r?(o=n("<ul/>").css("display","block").appendTo(u),u.addClass("open "+t.collapsable),f._swapClass(u,t.last,t.lastCollapsable),i.children=[]):(u.find("ul").remove(),u.find("div."+t.hitarea).remove(),u.filter("."+t.lastCollapsable+",."+t.lastExpandable).removeClass(t.lastCollapsable+" "+t.lastExpandable).addClass(t.last),u.removeClass("open "+t.collapsable+" "+t.expandable));f.options.showIcon&&f._swapClass(u.children("span"),"file","folder");e=u.filter(":has(>ul)").prepend('<div class="'+t.hitarea+'"/>').find("div."+t.hitarea);e.each(function(){var t="";n.each(n(this).parent().attr("class").split(" "),function(){t+=this+"-hitarea "});n(this).addClass(t)})},modify:function(t,i,r){if(t&&i){var u=this,f=n("#"+t.nid).next(),e=null;r=r||this.findByNId(u.element.data("nodes")["pid"+t.nid]);(f.is("ul")||f.is("li"))&&(e=u.findByNId(f.attr("id")));u.remove(t,r);u.insert(i,r,e)}},disable:function(){},enable:function(){}})}(jQuery),function(n){n.extend(n.fn,{validate:function(t){if(!this.length){t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var i=n.data(this[0],"validator");return i?i:(i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){i.cancelSubmit=!0}),i.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){i.submitButton=this}),this.submit(function(t){function r(){if(i.settings.submitHandler){if(i.submitButton)var t=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm);return i.settings.submitHandler.call(i,i.currentForm),i.submitButton&&t.remove(),!1}return!0}return(i.settings.debug&&t.preventDefault(),i.cancelSubmit)?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){if(n(this[0]).is("form"))return this.validate().form();var t=!0,i=n(this[0].form).validate();return this.each(function(){t&=i.element(this)}),t},removeAttrs:function(t){var i={},r=this;return n.each(t.split(/\s/),function(n,t){i[t]=r.attr(t);r.removeAttr(t)}),i},rules:function(t,i){var r=this[0],o,u,h;if(t){var e=n.data(r.form,"validator").settings,s=e.rules,f=n.validator.staticRules(r);switch(t){case"add":n.extend(f,n.validator.normalizeRule(i));s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(o={},n.each(i.split(/\s/),function(n,t){o[t]=f[t];delete f[t]}),o):(delete s[r.name],f)}}return u=n.validator.normalizeRules(n.extend({},n.validator.metadataRules(r),n.validator.classRules(r),n.validator.attributeRules(r),n.validator.staticRules(r)),r),u.required&&(h=u.required,delete u.required,u=n.extend({required:h},u)),u}});n.extend(n.expr[":"],{blank:function(t){return!n.trim(""+t.value)},filled:function(t){return!!n.trim(""+t.value)},unchecked:function(n){return!n.checked}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return arguments.length==1?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(new RegExp("\\{"+n+"\\}","g"),i)}),t)};n.extend(n.validator,{defaults:{validateOnEmpty:!1,messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,focusCleanup:!1,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(n)).hide())},onfocusout:function(n){this.settings.validateOnEmpty?(!this.checkable(n)||n.name in this.submitted)&&this.element(n):!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(n){(n.name in this.submitted||n==this.lastElement)&&this.element(n)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){t.type==="radio"?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){t.type==="radio"?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function r(t){var i=n.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");i.settings[r]&&i.settings[r].call(i,this[0])}var i,t;this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();i=this.groups={};n.each(this.settings.groups,function(t,r){n.each(r.split(/\s/),function(n,r){i[r]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",r).validateDelegate(":radio, :checkbox, select, option","click",r);this.settings.invalidHandler&&n(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){t=this.clean(t);this.lastElement=t;this.prepareElement(t);this.currentElements=n(t);var i=this.check(t);return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){n.extend(this.errorMap,t);this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t=0;for(var i in n)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&n.grep(this.errorList,function(n){return n.element.name==t.name}).length==1&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return(!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(n(this).rules()))?!1:(i[this.name]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){return n(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([]);this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},check:function(t){var i,r,u,f,e;t=this.clean(t);this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]);i=n(t).rules();r=!1;for(u in i){f={method:u,parameters:i[u]};try{if(e=n.validator.methods[u].call(this,t.value.replace(/\r/g,""),t,f.parameters),e=="dependency-mismatch"){r=!0;continue}if(r=!1,e=="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!e)return this.formatAndAdd(t,f),!1}catch(o){this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+f.method+"' method",o);throw o;}}if(!r)return this.objectLength(i)&&this.successList.push(t),!0},customMetaMessage:function(t,i){if(n.metadata){var r=this.settings.meta?n(t).metadata()[this.settings.meta]:n(t).metadata();return r&&r.messages&&r.messages[i]}},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor==String?i:i[t])},findDefined:function(){for(var n=0;n<arguments.length;n++)if(arguments[n]!==undefined)return arguments[n];return undefined},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customMetaMessage(t,i),!this.settings.ignoreTitle&&t.title||undefined,n.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"<\/strong>")},formatAndAdd:function(n,t){var i=this.defaultMessage(n,t.method),r=/\$?\{(\d+)\}/g;typeof i=="function"?i=i.call(this,t.parameters,n):r.test(i)&&(i=jQuery.format(i.replace(r,"{$1}"),t.parameters));this.errorList.push({message:i,element:n});this.errorMap[n.name]=i;this.submitted[n.name]=i},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var t,i,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r=this.errorsFor(t);r.length?(r.removeClass().addClass(this.settings.errorClass),r.attr("generated")&&r.html(i)):(r=n("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,n(t)):r.insertAfter(t)));!i&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r));this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return n(this).attr("for")==i})},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){var i=this.currentForm;return n(document.getElementsByName(t)).map(function(n,r){return r.form==i&&r.name==t&&r||null})},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){return!n.validator.methods.required.call(this,n.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(n){this.pending[n.name]||(this.pendingRequest++,this.pending[n.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[t.name];i&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!i&&this.pendingRequest==0&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor==String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},f=n(t),r,u;for(r in n.validator.methods)u=f.attr(r),u&&(i[r]=u);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},metadataRules:function(t){if(!n.metadata)return{};var i=n.data(t.form,"validator").settings.meta;return i?n(t).metadata()[i]:n(t).metadata()},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1){delete t[r];return}if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=u.param!==undefined?u.param:!0:delete t[r]}}),n.each(t,function(r,u){t[r]=n.isFunction(u)?u(i):u}),n.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),n.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if(typeof t=="string"){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=r!=undefined?r:n.validator.messages[t];i.length<3&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";switch(i.nodeName.toLowerCase()){case"select":var u=n(i).val();return u&&u.length>0;case"input":if(this.checkable(i))return this.getLength(t,i)>0;default:return n.trim(t).length>0}},remote:function(t,i,r){var f,u,e;return this.optional(i)?"dependency-mismatch":(f=this.previousValue(i),this.settings.messages[i.name]||(this.settings.messages[i.name]={}),f.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=f.message,r=typeof r=="string"&&{url:r}||r,this.pending[i.name])?"pending":f.old===t?f.valid:(f.old=t,u=this,this.startRequest(i),e={},e[i.name]=t,n.ajax(n.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:e,success:function(r){var e,h,s,o;u.settings.messages[i.name].remote=f.originalMessage;e=r===!0;e?(h=u.formSubmitted,u.prepareElement(i),u.formSubmitted=h,u.successList.push(i),u.showErrors()):(s={},o=r||u.defaultMessage(i,"remote"),s[i.name]=f.message=n.isFunction(o)?o(t):o,u.showErrors(s));f.valid=e;u.stopRequest(i,e)}},r)),"pending")},minlength:function(t,i,r){return this.optional(i)||this.getLength(n.trim(t),i)>=r},maxlength:function(t,i,r){return this.optional(i)||this.getLength(n.trim(t),i)<=r},rangelength:function(t,i,r){var u=this.getLength(n.trim(t),i);return this.optional(i)||u>=r[0]&&u<=r[1]},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||n<=i},range:function(n,t,i){return this.optional(t)||n>=i[0]&&n<=i[1]},email:function(n,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(n)},url:function(n,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(Date.parse(n.replace(/-/g,"/"))))},number:function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},accept:function(n,t,i){return i=typeof i=="string"?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||n.match(new RegExp(".("+i+")$","i"))},equalTo:function(t,i,r){var u=n(r).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){n(i).valid()});return t==u.val()}}});n.format=n.validator.format}(jQuery),function(n){var t={},i;n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;n.mode=="abort"&&(t[u]&&t[u].abort(),t[u]=r)}):(i=n.ajax,n.ajax=function(r){var f=("mode"in r?r:n.ajaxSettings).mode,u=("port"in r?r:n.ajaxSettings).port;return f=="abort"?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments)):i.apply(this,arguments)})}(jQuery),function(n){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||n.each({focus:"focusin",blur:"focusout"},function(t,i){function r(t){return t=n.event.fix(t),t.type=i,n.event.handle.call(this,t)}n.event.special[i]={setup:function(){this.addEventListener(t,r,!0)},teardown:function(){this.removeEventListener(t,r,!0)},handler:function(t){return arguments[0]=n.event.fix(t),arguments[0].type=i,n.event.handle.apply(this,arguments)}}});n.extend(n.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var u=n(i.target);if(u.is(t))return r.apply(u,arguments)})}})}(jQuery);
/*
//# sourceMappingURL=operamasks-ui.min.js.map
*/